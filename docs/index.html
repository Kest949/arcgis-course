<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Симофей Самсонов" />
  <title>Практикум по геоинформатике</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="template.css" />
</head>
<body>
    <div class="navbar navbar-static-top">
    <div class="navbar-inner">
      <div class="container">
        <span class="doc-title">Практикум по геоинформатике</span>
        <ul class="nav pull-right doc-info">
                    <li><p class="navbar-text">Симофей Самсонов</p></li>
                            </ul>
      </div>
    </div>
  </div>
    <div class="container">
    <div class="row">
            <div id="TOC" class="span3">
        <div class="well toc">
        <ul>
          <li class="nav-header">Table of Contents</li>
        </ul>
        <ul>
        <li><a href="#оформление-климатической-карты">Оформление климатической карты</a><ul>
        <li><a href="#введение">Введение</a></li>
        <li><a href="#начало-работы">Начало работы</a></li>
        <li><a href="#оформление-слоев">Оформление слоев</a></li>
        <li><a href="#настройка-подписей">Настройка подписей</a></li>
        <li><a href="#настройка-компоновки">Настройка компоновки</a></li>
        <li><a href="#экспорт-в-графический-файл">Экспорт в графический файл</a></li>
        <li><a href="#ответы-на-вопросы">Ответы на вопросы</a></li>
        </ul></li>
        <li><a href="#оформление-социально-экономической-карты">Оформление социально-экономической карты</a><ul>
        <li><a href="#введение-1">Введение</a></li>
        <li><a href="#начало-работы-1">Начало работы</a></li>
        <li><a href="#оформление-тематических-слоев">Оформление тематических слоев</a></li>
        <li><a href="#оформление-общегеографических-слоев">Оформление общегеографических слоев</a></li>
        <li><a href="#настройка-подписей-1">Настройка подписей</a></li>
        <li><a href="#настройка-компоновки-1">Настройка компоновки</a></li>
        <li><a href="#экспорт-в-графический-файл-1">Экспорт в графический файл</a></li>
        <li><a href="#контрольные-вопросы">Контрольные вопросы</a></li>
        </ul></li>
        <li><a href="#оформление-карты-четвертичных-отложений">Оформление карты четвертичных отложений</a><ul>
        <li><a href="#введение-2">Введение</a></li>
        <li><a href="#изучение-данных-в-приложении-arcmap">Изучение данных в приложении ArcMap</a></li>
        <li><a href="#способы-изображения">Способы изображения</a></li>
        <li><a href="#подписи">Подписи</a></li>
        <li><a href="#компоновка-карты">Компоновка карты</a></li>
        <li><a href="#редактирование-атрибутов">Редактирование атрибутов</a></li>
        <li><a href="#создание-и-вычисление-атрибутов-дополнительно">Создание и вычисление атрибутов (дополнительно)</a></li>
        <li><a href="#контрольные-вопросы-1">Контрольные вопросы</a></li>
        </ul></li>
        <li><a href="#оформление-общегеографической-карты">Оформление общегеографической карты</a><ul>
        <li><a href="#введение-3">Введение</a></li>
        <li><a href="#начало-работы-2">Начало работы</a></li>
        <li><a href="#оформление-рельефа">Оформление рельефа</a></li>
        <li><a href="#оформление-векторных-слоев">Оформление векторных слоев</a></li>
        <li><a href="#создание-подписей">Создание подписей</a></li>
        <li><a href="#классификация-населенных-пунктов">Классификация населенных пунктов</a></li>
        <li><a href="#маска-и-подписи-стран">Маска и подписи стран</a></li>
        <li><a href="#настройка-компоновки-карты">Настройка компоновки карты</a></li>
        <li><a href="#экспорт-в-графический-файл-2">Экспорт в графический файл</a></li>
        <li><a href="#контрольные-вопросы-2">Контрольные вопросы</a></li>
        </ul></li>
        <li><a href="#привязка-и-цифрование-гидрогеологической-карты">Привязка и цифрование гидрогеологической карты</a><ul>
        <li><a href="#введение-4">Введение</a></li>
        <li><a href="#оформление-базовых-слоев">Оформление базовых слоев</a></li>
        <li><a href="#привязка-карты">Привязка карты</a></li>
        <li><a href="#создание-слоя-гидрогеологического-районирования">Создание слоя гидрогеологического районирования</a></li>
        <li><a href="#пространственный-запрос">Пространственный запрос</a></li>
        <li><a href="#оверлей">Оверлей</a></li>
        <li><a href="#оформление-карты">Оформление карты</a></li>
        <li><a href="#ответы-на-вопросы-1">Ответы на вопросы</a></li>
        </ul></li>
        <li><a href="#создание-тематической-базы-геоданных-административного-деления-города">Создание тематической базы геоданных административного деления города</a><ul>
        <li><a href="#введение-5">Введение</a></li>
        <li><a href="#добавление-референцных-данных">Добавление референцных данных</a></li>
        <li><a href="#привязка-карты-1">Привязка карты</a></li>
        <li><a href="#создание-слоя-городских-районов">Создание слоя городских районов</a></li>
        <li><a href="#расчет-статистики-по-районам">Расчет статистики по районам</a></li>
        <li><a href="#построение-картодиаграмм">Построение картодиаграмм</a></li>
        <li><a href="#настройка-оформления-других-слоев">Настройка оформления других слоев</a></li>
        <li><a href="#компоновка">Компоновка</a></li>
        <li><a href="#ответы-на-вопросы-2">Ответы на вопросы</a></li>
        </ul></li>
        <li><a href="#привязка-и-цифрование-туристской-карты">Привязка и цифрование туристской карты</a><ul>
        <li><a href="#введение-6">Введение</a></li>
        <li><a href="#привязка-карт">Привязка карт</a></li>
        <li><a href="#создание-базы-данных-и-классов-пространственных-объектов">Создание базы данных и классов пространственных объектов</a></li>
        <li><a href="#цифрование-регионов">Цифрование регионов</a></li>
        <li><a href="#атрибутирование-регионов">Атрибутирование регионов</a></li>
        <li><a href="#цифрование-маршрутов-и-точек-интереса">Цифрование маршрутов и точек интереса</a></li>
        <li><a href="#оформление-карты-1">Оформление карты</a></li>
        <li><a href="#компоновка-карты-1">Компоновка карты</a></li>
        <li><a href="#контрольные-вопросы-3">Контрольные вопросы</a></li>
        </ul></li>
        <li><a href="#картографирование-по-статистическим-данным">Картографирование по статистическим данным</a><ul>
        <li><a href="#введение-7">Введение</a></li>
        <li><a href="#скачивание-географических-данных-с-сайта-nuts">Скачивание географических данных с сайта NUTS</a></li>
        <li><a href="#скачивание-таблиц-с-сайта-nuts">Скачивание таблиц с сайта NUTS</a></li>
        <li><a href="#скачивание-структурных-таблиц-с-сайта-nuts">Скачивание структурных таблиц с сайта NUTS</a></li>
        <li><a href="#форматирование-таблиц-для-загрузки-в-гис">Форматирование таблиц для загрузки в ГИС</a></li>
        <li><a href="#подготовка-проекта">Подготовка проекта</a></li>
        <li><a href="#отображение-картодиаграмм-по-единицам-2-го-уровня">Отображение картодиаграмм по единицам 2-го уровня</a></li>
        <li><a href="#отображение-картограмм-по-единицам-3-го-уровня">Отображение картограмм по единицам 3-го уровня</a></li>
        <li><a href="#отображение-структурных-картодиаграмм-по-единицам-3-го-уровня">Отображение структурных картодиаграмм по единицам 3-го уровня</a></li>
        <li><a href="#оформление-итоговых-карт">Оформление итоговых карт</a></li>
        <li><a href="#экспорт-карты-числа-транспортных-средств">Экспорт карты числа транспортных средств</a></li>
        <li><a href="#экспорт-карты-населения">Экспорт карты населения</a></li>
        </ul></li>
        <li><a href="#анализ-распределения-типов-подстилающей-поверхности">Анализ распределения типов подстилающей поверхности</a><ul>
        <li><a href="#введение-8">Введение</a></li>
        <li><a href="#оформление-базовых-слоев-1">Оформление базовых слоев</a></li>
        <li><a href="#построение-регулярной-сетки">Построение регулярной сетки</a></li>
        <li><a href="#подсчет-доли-водных-объектов-в-площади-ячеек">Подсчет доли водных объектов в площади ячеек</a></li>
        <li><a href="#подсчет-доли-прочих-типов-поверхности-в-площади-ячеек">Подсчет доли прочих типов поверхности в площади ячеек</a></li>
        <li><a href="#добавление-и-инициализация-атрибутивных-полей">Добавление и инициализация атрибутивных полей</a></li>
        <li><a href="#присоединение-таблицы-с-долей-водных-объектов">Присоединение таблицы с долей водных объектов</a></li>
        <li><a href="#присоединение-таблиц-прочих-типов-поверхностей">Присоединение таблиц прочих типов поверхностей</a></li>
        <li><a href="#вычисление-доли-прочих-поверхностей">Вычисление доли прочих поверхностей</a></li>
        <li><a href="#вычисление-координат-центров-ячеек">Вычисление координат центров ячеек</a></li>
        <li><a href="#экспорт-таблицы-в-файл">Экспорт таблицы в файл</a></li>
        <li><a href="#построение-картодиаграмм-1">Построение картодиаграмм</a></li>
        <li><a href="#оформление-компоновки-карты">Оформление компоновки карты</a></li>
        <li><a href="#контрольные-вопросы-4">Контрольные вопросы</a></li>
        </ul></li>
        <li><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">Анализ пространственных взаимосвязей методом оверлея на основе векторных данных</a><ul>
        <li><a href="#введение-9">Введение</a></li>
        <li><a href="#визуальный-анализ-векторных-слоев">Визуальный анализ векторных слоев</a></li>
        <li><a href="#организация-рабочего-пространства">Организация рабочего пространства</a></li>
        <li><a href="#оверлей-слоев-методом-пересечения">Оверлей слоев методом пересечения</a></li>
        <li><a href="#слияние-результатов-пересечения-с-целью-получения-показателя-пространственной-связи">Слияние результатов пересечения с целью получения показателя пространственной связи</a></li>
        <li><a href="#подсчет-суммарной-площади-каждой-комбинации-подтипа-почв-и-типа-рельефа">Подсчет суммарной площади каждой комбинации подтипа почв и типа рельефа</a></li>
        <li><a href="#подсчет-суммарной-площади-каждого-подтипа-почв">Подсчет суммарной площади каждого подтипа почв</a></li>
        <li><a href="#добавление-нового-поля-для-результирующих-значений">Добавление нового поля для результирующих значений</a></li>
        <li><a href="#соединение-таблиц-по-названию-подтипа-почв">Соединение таблиц по названию подтипа почв</a></li>
        <li><a href="#вычисление-результирующих-значений">Вычисление результирующих значений</a></li>
        <li><a href="#ответы-на-вопросы-3">Ответы на вопросы</a></li>
        </ul></li>
        <li><a href="#выбор-оптимального-местоположения-средствами-растрового-анализа">Выбор оптимального местоположения средствами растрового анализа</a><ul>
        <li><a href="#введение-10">Введение</a></li>
        <li><a href="#подготовка-рабочего-пространства">Подготовка рабочего пространства</a></li>
        <li><a href="#преобразование-слоя-типов-землепользования-в-растровое-представление">Преобразование слоя типов землепользования в растровое представление</a></li>
        <li><a href="#расчет-углов-наклона">Расчет углов наклона</a></li>
        <li><a href="#расчет-расстояний">Расчет расстояний</a></li>
        <li><a href="#классификация-углов-наклона">Классификация углов наклона</a></li>
        <li><a href="#классификация-расстояний">Классификация расстояний</a></li>
        <li><a href="#нахождение-мест-с-наилучшей-комбинацией-факторов-с-помощью-взвешенного-оверлея">Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</a></li>
        <li><a href="#конвертация-результирующих-зон-в-векторный-формат">Конвертация результирующих зон в векторный формат</a></li>
        <li><a href="#ответы-на-вопросы-4">Ответы на вопросы</a></li>
        </ul></li>
        <li><a href="#сетевой-анализ">Сетевой анализ</a><ul>
        <li><a href="#введение-11">Введение</a></li>
        <li><a href="#оформление-базовых-слоев-2">Оформление базовых слоев</a></li>
        <li><a href="#построение-маршрута">Построение маршрута</a></li>
        <li><a href="#определение-зоны-обслуживания">Определение зоны обслуживания</a></li>
        <li><a href="#определение-ближайшего-пункта-обслуживания">Определение ближайшего пункта обслуживания</a></li>
        <li><a href="#размещениераспределение">Размещение—распределение</a></li>
        <li><a href="#районирование-города-по-зонам-обслуживания">Районирование города по зонам обслуживания</a></li>
        <li><a href="#компоновка-карты-2">Компоновка карты</a></li>
        <li><a href="#ответы-на-вопросы-5">Ответы на вопросы</a></li>
        </ul></li>
        <li><a href="#геометрическое-моделирование-речной-сети">Геометрическое моделирование речной сети</a><ul>
        <li><a href="#введение-12">Введение</a></li>
        <li><a href="#создание-набора-данных-речной-сети">Создание набора данных речной сети</a></li>
        <li><a href="#копирование-и-цифрование-линий-водотоков">Копирование и цифрование линий водотоков</a></li>
        <li><a href="#притягивание-снэппинг-притоков-и-разрезание-осевой-линии-основных-рек">Притягивание (снэппинг) притоков и разрезание осевой линии основных рек</a></li>
        <li><a href="#установка-точки-стока">Установка точки стока</a></li>
        <li><a href="#построение-и-настройка-геометрической-сети">Построение и настройка геометрической сети</a></li>
        <li><a href="#анализ-и-редактирование-геометрической-сети">Анализ и редактирование геометрической сети</a></li>
        <li><a href="#контрольные-вопросы-5">Контрольные вопросы</a></li>
        </ul></li>
        <li><a href="#картографирование-на-основе-адресных-данных">Картографирование на основе адресных данных</a><ul>
        <li><a href="#введение-13">Введение</a></li>
        <li><a href="#подключение-к-сервисам">Подключение к сервисам</a></li>
        <li><a href="#геокодирование-адресов">Геокодирование адресов</a></li>
        <li><a href="#визуализация-посещаемости-в-точках">Визуализация посещаемости в точках</a></li>
        <li><a href="#построение-поля-посещаемости">Построение поля посещаемости</a></li>
        <li><a href="#оформление-карты-2">Оформление карты</a></li>
        <li><a href="#ответы-на-вопросы-6">Ответы на вопросы</a></li>
        </ul></li>
        <li><a href="#анализ-плотности-пространственного-распределения">Анализ плотности пространственного распределения</a><ul>
        <li><a href="#введение-14">Введение</a></li>
        <li><a href="#оценка-плотности-дорожной-сети">Оценка плотности дорожной сети</a></li>
        <li><a href="#оценка-влияния-радиуса-поиска-kernel-density">Оценка влияния радиуса поиска (kernel density)</a></li>
        <li><a href="#масштабирование-значение-показателя">Масштабирование значение показателя</a></li>
        <li><a href="#оформление-слоя-густоты-дорожной-сети">Оформление слоя густоты дорожной сети</a></li>
        <li><a href="#оформление-итоговой-карты">Оформление итоговой карты</a></li>
        <li><a href="#контрольные-вопросы-6">Контрольные вопросы</a></li>
        </ul></li>
        <li><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">Интерполяция и картографирование гидрометеорологических полей</a><ul>
        <li><a href="#введение-15">Введение</a></li>
        <li><a href="#оформление-базовых-слоев-3">Оформление базовых слоев</a></li>
        <li><a href="#оценка-необходимого-разрешения-растра">Оценка необходимого разрешения растра</a></li>
        <li><a href="#интерполяция-поверхностей">Интерполяция поверхностей</a></li>
        <li><a href="#настройка-отображения-поверхностей">Настройка отображения поверхностей</a></li>
        <li><a href="#сглаживание-поверхности-полученной-методом-кригинга">Сглаживание поверхности, полученной методом кригинга</a></li>
        <li><a href="#построение-линии-профиля">Построение линии профиля</a></li>
        <li><a href="#определение-температур-по-линии-профиля">Определение температур по линии профиля</a></li>
        <li><a href="#оформление-карты-3">Оформление карты</a></li>
        <li><a href="#ответы-на-вопросы-7">Ответы на вопросы</a></li>
        </ul></li>
        <li><a href="#гидрологический-анализ-цифровой-модели-рельефа">Гидрологический анализ цифровой модели рельефа</a><ul>
        <li><a href="#введение-16">Введение</a></li>
        <li><a href="#оформление-данных">Оформление данных</a></li>
        <li><a href="#направление-тока">Направление тока</a></li>
        <li><a href="#аккумуляция-тока">Аккумуляция тока</a></li>
        <li><a href="#выделение-и-классификация-водотоков">Выделение и классификация водотоков</a></li>
        <li><a href="#векторизация-водотоков">Векторизация водотоков</a></li>
        <li><a href="#выделение-и-разделение-устьевых-точек">Выделение и разделение устьевых точек</a></li>
        <li><a href="#построение-водосборных-бассейнов">Построение водосборных бассейнов</a></li>
        <li><a href="#расчет-привязка-и-визуализация-статистики-по-водосборным-бассейнам">Расчет, привязка и визуализация статистики по водосборным бассейнам</a></li>
        <li><a href="#оформление-итоговой-карты-1">Оформление итоговой карты</a></li>
        <li><a href="#ответы-на-вопросы-8">Ответы на вопросы</a></li>
        </ul></li>
        <li><a href="#трехмерное-моделирование">Трехмерное моделирование</a><ul>
        <li><a href="#введение-17">Введение</a></li>
        <li><a href="#организация-рабочего-пространства-1">Организация рабочего пространства</a></li>
        <li><a href="#визуализация-цифровой-модели-рельефа">Визуализация цифровой модели рельефа</a></li>
        <li><a href="#подготовка-вспомогательных-цифровых-моделей-для-учета-препятствий">Подготовка вспомогательных цифровых моделей для учета препятствий</a></li>
        <li><a href="#преобразование-растровых-моделей-в-триангуляционные">Преобразование растровых моделей в триангуляционные</a></li>
        <li><a href="#визуализация-данных-в-трехмерной-среде-и-знакомство-с-приложением-arcscene">Визуализация данных в трехмерной среде и знакомство с приложением ArcScene</a></li>
        <li><a href="#визуализация-трехмерных-объектов-геодезические-пункты-и-здания">Визуализация трехмерных объектов: геодезические пункты и здания</a></li>
        <li><a href="#анализ-зоны-видимости-наблюдательного-пункта">Анализ зоны видимости наблюдательного пункта</a></li>
        <li><a href="#изменение-высоты-наблюдения">Изменение высоты наблюдения</a></li>
        <li><a href="#контрольные-вопросы-7">Контрольные вопросы</a></li>
        </ul></li>
        </ul>
        </div>
      </div>
            <div class="span9">
            <h1 id="оформление-климатической-карты">Оформление климатической карты</h1>
<h2 id="введение">Введение</h2>
<p><strong>Цель задания</strong> --- знакомство с моделями пространственных объектов и базой пространственных данных. Визуализация данных на карте. Оформление легенды и компоновки карты.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td><kbd>Гидрометпоток</kbd></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Не требуется</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Модели пространственных данных, модели пространственных объектов, базы пространственных объектов, картографические проекции</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>Климатические пояса по Алисову (полигональный слой), границы морей и океанов IHO (International Hydrographic Organization), направления основных течений OSCAR (Ocean Surface Current Analyses – Real time), крупнейшие мировые реки и озера, города (данные Esri).</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>Тематическая карта «Климат и основные объекты гидросферы» масштаба 1:90 000 000</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Модели пространственных данных, модели пространственных объектов, базы пространственных данных, классы пространственных объектов, визуализация пространственных данных, геоинформационное картографирование</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист">Контрольный лист</h3>
<ul>
<li>[x] Добавить на карту слои базы пространственных данных и оформить их</li>
<li>[x] Настроить подписи объектов</li>
<li>[x] Создать компоновку карты, легенду и координатную сетку</li>
<li>[x] Экспортировать результат в графический файл</li>
</ul>
<h3 id="аннотация">Аннотация</h3>
<p>Задание посвящено знакомству с созданием тематических карт на основе баз пространственных данных. Вы познакомитесь с представлением площадных, линейных, точечных объектов в базе пространственных данных. Научитесь создавать карты на их основе, оформлять легенду, сетку координат и зарамочные элементы карты.</p>
<h2 id="начало-работы">Начало работы</h2>
<p><a href="#оформление-климатической-карты">К содержанию ⇡</a></p>
<p>В каталоге <em>Ex01</em> находится база геоданных <em>Ex01.gdb</em>, содержащая исходные данные для выполнения задания.</p>
<blockquote>
<p><strong>База геоданных</strong> --- это структурированное хранилище, внутри которого можно создавать слои данных, группировать их и связывать различными отношениями.</p>
</blockquote>
<p>Внутри базы геоданных могут быть объекты следующих типов:</p>
<ul>
<li><img src="../images/Ex01/image7.png" /><img src="../images/Ex01/image8.png" /><img src="../images/Ex01/image9.png" /> --- слои векторных данных (классы пространственных объектов),</li>
<li><img src="../images/Ex01/image10.png" /> — слои растровых данных;</li>
<li><img src="../images/Ex01/image11.png" /> — обычные таблицы;</li>
</ul>
<blockquote>
<p><strong>Класс пространственных объектов (feature class)</strong> --- это набор пространственных объектов одного типа геометрии (точки, линии, полигоны или объемные тела). Для класса могут быть определены атрибуты, а его представлением является таблица, содержащая как обычные столбцы (текстовые, числовые и т.д.) так и специальное поле Shape, в котором хранится информация о геометрии. Каждая строчка в таблице — это описание одного объекта.</p>
</blockquote>
<ol type="1">
<li><p>Запустите приложение <strong>ArcMap</strong> и откройте окно <strong>Catalog</strong>, нажав кнопку <img src="../images/Ex01/image5.png" /> на панели инструментов</p></li>
<li><p>Раскройте папку <em>D:/GIS</em> в дереве каталогов и найдите в ней директорию <em>Ex01</em> в вашем каталоге, содержащую исходные данные для выполнения первого задания. Если директории <em>D:/GIS</em> нет в списке, подключитесь к ней c помощью кнопки <img src="../images/Ex01/image6.png" />.</p></li>
<li><p>Раскройте базу данных <em>MapData.gdb</em> и изучите ее содержимое, состоящее из следующих классов:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Класс</strong></th>
<th style="text-align: left;"><strong>Содержание</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Cities</em></td>
<td style="text-align: left;">Города</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Climates</em></td>
<td style="text-align: left;">Климатические зоны</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Coast</em></td>
<td style="text-align: left;">Побережье</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Countries</em></td>
<td style="text-align: left;">Страны</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Currents</em></td>
<td style="text-align: left;">Данные о течениях</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Lakes</em></td>
<td style="text-align: left;">Озера</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Rivers</em></td>
<td style="text-align: left;">Крупнейшие реки</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Seas</em></td>
<td style="text-align: left;">Моря</td>
</tr>
</tbody>
</table>
<p>К какому типу геометрии относятся данные классы?</p></li>
<li><p>Дважды щелкните на слое <em>Climates</em> и перейдите на вкладку XY Coordinate System.</p></li>
</ol>
<p>Внимательно прочитайте информацию. Этот слой хранится в <em>Географической системе координат (GCS)</em>, отнесенной к эллипсоиду WGS-1984. Это означает, что координаты каждого объекта хранятся в виде широты и долготы. В любой момент этот слой можно спроецировать в любую проекцию. При этом координаты будут представлены в метрических единицах, а система координат получит название <em>Проецированной системы координат (PCS)</em>.</p>
<h2 id="оформление-слоев">Оформление слоев</h2>
<p><a href="#оформление-климатической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Добавьте на карту слой <em>Countries</em>, просто перетащив его из окна каталога.</p></li>
<li><p>Дважды щелкните на названии слоя <em>Countries</em> и перейдите на вкладку Symbology.</p></li>
<li><p>Внимательно изучите список способов изображения слева. Они разделены на категории <strong>Features</strong> (единый символ), <strong>Categories</strong> (качественные характеристики), <strong>Quantities</strong> (количественные характеристики), <strong>Charts</strong> (картодиаграммы), <strong>Multiple Attributes</strong> (способы изображения по нескольким атрибутам).Разверните каждую группу и щелкните на каждом способе. Сопоставьте их с традиционной классификацией способов изображения:</p>
<figure>
<img src="../images/Ex01/image12.png" />
</figure></li>
<li><p>Выберите способ единого символа (<strong>Features &gt; Single symbol</strong>)</p></li>
<li><p>Щелкните на кнопке с изображением символа и измените оформление следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Цвет заливки (Fill Color)</em></td>
<td>Без заливки <img src="../images/Ex01/image13.png" /></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Цвет обводки (Outline Color)</em></td>
<td>Серый 50% <img src="../images/Ex01/image14.png" /></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Толщина обводки (Outline width)</em></td>
<td>0,5 <img src="../images/Ex01/image15.png" /></td>
</tr>
</tbody>
</table>
<p>Диалог свойств слоя:</p>
<figure>
<img src="../images/Ex01/image16.png" />
</figure>
<p>Результат:</p>
<figure>
<img src="../images/Ex01/image17.png" />
</figure></li>
<li><p>Измените проекцию карты на <em>проекцию Робинсона (Robinson)</em>. Ее можно найти в группе <strong>Projected Сoordinate Systems &gt; World</strong>. Обратите внимание на то, как изменятся очертания объектов:</p>
<figure>
<img src="../images/Ex01/image18.png" />
</figure></li>
<li><p>Добавьте на карту слой <em>Coast</em>, расположите его поверх слоя <em>Countries</em> и измените цвет линии на <em>Delft Blue:</em></p>
<figure>
<img src="../images/Ex01/image19.png" />
</figure></li>
<li><p>Добавьте на карту слой <em>Rivers</em> расположите его поверх слоя <em>Coast</em> и измените цвет линии на <em>Delft Blue,</em> а толщину сделайте равной 0,5 пиксела<em>.</em></p></li>
<li><p>Добавьте на карту слой <em>Lakes</em>, расположите его поверх слоя <em>Rivers</em> и измените его оформление следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th style="text-align: left;"><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Цвет заливки</em></td>
<td style="text-align: left;">Sodalite Blue</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Цвет обводки</em></td>
<td style="text-align: left;">Delft Blue</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Толщина обводки</em></td>
<td style="text-align: left;">0,5</td>
</tr>
</tbody>
</table>
<p>Результат:</p>
<figure>
<img src="../images/Ex01/image20.png" />
</figure></li>
<li><p>Сохраните карту в свою директорию <em>Ex01</em>.</p></li>
<li><p>Добавьте на карту слой <em>Cities</em>, расположите его поверх слоя <em>Lakes</em> и измените его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th><strong>Параметр</strong></th>
<th><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Символ</em></td>
<td>Circle 1</td>
</tr>
<tr class="even">
<td><em>Цвет</em></td>
<td>Черный</td>
</tr>
<tr class="odd">
<td><em>Размер</em></td>
<td>4</td>
</tr>
</tbody>
</table>
<figure>
<img src="../images/Ex01/image21.png" />
</figure></li>
<li><p>Добавьте на карту слой <em>Seas</em>, расположите его внизу таблицы содержания и измените его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th style="text-align: left;"><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Цвет заливки</em></td>
<td style="text-align: left;">Нет заливки</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Цвет обводки</em></td>
<td style="text-align: left;">Серый 50%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Толщина обводки</em></td>
<td style="text-align: left;">0,5</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Прозрачность</em></td>
<td style="text-align: left;">50%</td>
</tr>
</tbody>
</table>
<p>Результат:</p>
<figure>
<img src="../images/Ex01/image22.png" />
</figure></li>
<li><p>Добавьте на карту слой <em>Сlimates</em>, расположите его внизу таблицы содержания.</p></li>
<li><p>Откройте таблицу атрибутов слоя <em>Сlimates</em>, щелкнув на его названии правой кнопкой мыши и выбрав команду <strong>Open Attribute Table</strong>. Найдите в ней столбец <em>Type</em>, просмотрите его значения. Это поле таблицы хранит информацию о типе климата для каждой области. Вы будете использовать ее для классификации при отображении данного слоя.</p></li>
<li><p>Найдите поля <em>Shape</em> и <em>ObjectID</em>.</p>
<blockquote>
<p>В поле <em>ObjectID</em> хранится уникальный идентификатор каждого объекта. Он нужен системе для того, чтобы каждый объект можно было гарантированно найти по некому однозначному критерию.</p>
</blockquote>
<blockquote>
<p>В поле <em>Shape</em> (вспомните, что слой полигональный) хранится список координат вершин полигона. Геометрия объектов редактируется специальными инструментами, поэтому содержимое поля Shape скрыто от пользователя.</p>
</blockquote></li>
<li><p>Климатические пояса показываются на картах способом <em>качественного фона</em>. Для этого измените оформление слоя <em>Climates</em> следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th style="text-align: left;"><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Тип визуализатора</em></td>
<td style="text-align: left;">Categories &gt; Unique values</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Поле классификации</em></td>
<td style="text-align: left;">Type</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Сортировка значений</em></td>
<td style="text-align: left;">От арктического к экваториальному</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Цвета полигонов</em></td>
<td style="text-align: left;">Традиционные цвета климатических поясов (выберите вручную)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Обводка полигонов</em></td>
<td style="text-align: left;">Нет обводки</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Показывать остальные значения</em></td>
<td style="text-align: left;">Нет</td>
</tr>
</tbody>
</table>
<p>Диалог настройки символики слоя должен выглядеть следующим образом:</p>
<figure>
<img src="../images/Ex01/image23.png" />
</figure></li>
<li><p>Добавьте на карту слой <em>Сurrents</em>, расположите его поверх слоя <em>Сlimates</em>. Этот слой содержит данные о течениях <em>OSCAR (Ocean Surface Current Analyses – Real time)</em>, осредненные с 1993 по 2003 год.</p>
<blockquote>
<p>Течения относятся к векторным полям. Существует множество способов визуализации векторных полей. В картографии распространен способ <strong>градиентного поля</strong>, при котором стрелки размещаются по регулярной сетке, их поворот соответствует направлению векторного поля в точке, а длина — скорости. Для реализации способа градиентного поля вам нужно выбрать символ (стрелку), а также указать атрибутивные поля слоя, в соответствии с которыми будет меняться их направление и длина.</p>
</blockquote></li>
<li><p>Измените тип символа слоя на символьный маркер и задайте его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th><strong>Параметр</strong></th>
<th style="text-align: left;"><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Шрифт</em></td>
<td style="text-align: left;">Esri Geology</td>
</tr>
<tr class="even">
<td><em>Символ</em></td>
<td style="text-align: left;">Unicode 83</td>
</tr>
<tr class="odd">
<td><em>Размер</em></td>
<td style="text-align: left;">28</td>
</tr>
<tr class="even">
<td><em>Цвет</em></td>
<td style="text-align: left;">Серый 70%</td>
</tr>
</tbody>
</table>
<figure>
<img src="../images/Ex01/image24.png" />
</figure></li>
<li><p>Нажмите <em>ОК</em> и еще раз <em>ОК</em>.</p></li>
<li><p>Чтобы задать направление стрелки, не выходя из диалога свойств слоя на вкладке <strong>Symbology</strong> нажмите <strong>Advanced &gt; Rotation…</strong> и настройте следующие параметры вращения:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th style="text-align: left;"><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поле</em></td>
<td style="text-align: left;">Direction</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Направление</em></td>
<td style="text-align: left;">Арифметическое</td>
</tr>
</tbody>
</table></li>
<li><p>Для изменения размера стрелки в зависимости от скорости течения нажмите <strong>Advanced &gt; Size…</strong> Выберите в списке поле <em>Length</em>. Нажмите ОК.</p>
<p>Результат: <img src="../images/Ex01/image25.png" /></p></li>
<li><p>Сохраните карту.</p></li>
</ol>
<h2 id="настройка-подписей">Настройка подписей</h2>
<p><a href="#оформление-климатической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Включите механизм размещения подписей Maplex</p>
<figure>
<img src="../images/Ex01/image26.png" />
</figure></li>
<li><p>Дважды щелкните на слое <em>Cities</em>, и перейдите на вкладку <em>Labels</em>.</p></li>
<li><p>Включите подписи для слоя <em>Cities</em>:</p>
<figure>
<img src="../images/Ex01/image27.png" />
</figure></li>
<li><p>Настройте параметры подписей следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th style="text-align: left;"><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Label Field</em></td>
<td style="text-align: left;">Название</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер</em></td>
<td style="text-align: left;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Цвет</em></td>
<td style="text-align: left;">Черный</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Разрешение конфликтов</em></td>
<td style="text-align: left;">Never remove (никогда не удалять)</td>
</tr>
</tbody>
</table>
<figure>
<img src="../images/Ex01/image28.png" />
</figure></li>
<li><p>Включите подписи для слоя <em>Rivers</em> со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th style="text-align: left;"><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Label Field</em></td>
<td style="text-align: left;">Title</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер</em></td>
<td style="text-align: left;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Цвет</em></td>
<td style="text-align: left;">Delft Blue</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Начертание</em></td>
<td style="text-align: left;">Курсивное</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Размещение</em></td>
<td style="text-align: left;">Curved (криволинейно вдоль)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Удалять дубликаты</em></td>
<td style="text-align: left;">Да</td>
</tr>
</tbody>
</table></li>
<li><p>Включите подписи для слоя <em>Seas</em> со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th><strong>Параметр</strong></th>
<th><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Поле</em></td>
<td>Name</td>
</tr>
<tr class="even">
<td><em>Размер</em></td>
<td>7</td>
</tr>
<tr class="odd">
<td><em>Цвет</em></td>
<td>Delft Blue</td>
</tr>
</tbody>
</table></li>
<li><p>Переименуйте все слои на русский язык следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Исходное название</strong></th>
<th><strong>Результирующее название</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Cities</em></td>
<td>Города</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Climates</em></td>
<td>Климат</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Coast</em></td>
<td>Побережье</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Countries</em></td>
<td>Страны</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Currents</em></td>
<td>Течения</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Lakes</em></td>
<td>Озера</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Rivers</em></td>
<td>Реки</td>
</tr>
</tbody>
</table>
<p>Результат:</p>
<figure>
<img src="../images/Ex01/image29.png" />
</figure></li>
<li><p>Сохраните карту.</p></li>
</ol>
<h2 id="настройка-компоновки">Настройка компоновки</h2>
<p><a href="#оформление-климатической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Переключитесь в вид компоновки с помощью команды меню <em>View — Layout View</em>.</p></li>
<li><p>Настройте макет страницы следующим образом:</p>
<ul>
<li>Размер А3</li>
<li>Альбомная ориентировка</li>
</ul></li>
<li><p>Подгоните размер фрейма данных таким образом, чтобы карта заняла площадь всего листа с небольшим запасом.</p></li>
<li><p>Установите масштаб равным <code>1:90 000 000</code> и отцентрируйте карту в пределах листа.</p>
<p>Результат: <img src="../images/Ex01/image30.png" /></p></li>
<li><p>Добавьте на карту легенду с помощью команды <strong>Insert &gt; Legend</strong>, включив в нее только слои <em>Климат</em> и <em>Течения:</em></p>
<figure>
<img src="../images/Ex01/image31.png" />
</figure></li>
<li><p>В следующем диалоге название легенды оставьте пустым:</p>
<figure>
<img src="../images/Ex01/image32.png" />
</figure></li>
<li><p>Далее все параметры оставьте по умолчанию.</p></li>
<li><p>Уберите заголовок поля для слоя <em>Климат</em>:</p>
<p><img src="../images/Ex01/image33.png" /> <img src="../images/Ex01/image34.png" /></p></li>
<li><p>Добавьте градусную сетку координат со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th><strong>Параметр</strong></th>
<th><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Шаг по X</em></td>
<td>20</td>
</tr>
<tr class="even">
<td><em>Шаг по Y</em></td>
<td>20</td>
</tr>
</tbody>
</table></li>
<li><p>Измените начало расстановки линий сетки для оси <em>Y</em> на 0.</p></li>
<li><p>Отключите отображение нулевых минут и секунд</p></li>
<li><p>Разместите над картой текст «КЛИМАТ И ОСНОВНЫЕ ОБЪЕКТЫ ГИДРОСФЕРЫ».</p></li>
<li><p>Разместите под картой по центру численный масштаб <code>1:90 000 000</code>.</p></li>
<li><p>Разместите в правом нижнем углу карты текст «Выполнил» и свое ФИО.</p>
<p>Результат: <img src="../images/Ex01/image35.png" /></p></li>
<li><p>Сохраните карту.</p></li>
</ol>
<h2 id="экспорт-в-графический-файл">Экспорт в графический файл</h2>
<p><a href="#оформление-климатической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Экспортируйте карту из режима компоновки в формат <code>PNG</code> с разрешением 300 точек на дюйм с помощью команды <strong>File &gt; Export Map</strong>. Сохраните его в свою директорию.</p></li>
<li><p>Вставьте карту в отчетный файл</p></li>
</ol>
<h2 id="ответы-на-вопросы">Ответы на вопросы</h2>
<p><a href="#оформление-климатической-карты">К содержанию ⇡</a></p>
<p>Ответьте на вопросы в отчетном файле. После окончания положите ваш отчет в сетевую папку для проверки вашим преподавателем</p>
<h1 id="оформление-социально-экономической-карты">Оформление социально-экономической карты</h1>
<h2 id="введение-1">Введение</h2>
<p><strong>Цель задания</strong> --- знакомство с моделями пространственных объектов и базой пространственных данных. Визуализация данных на карте. Оформление легенды и компоновки карты.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td><kbd>Экономический поток</kbd></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Модели пространственных данных, модели пространственных объектов, базы пространственных объектов, картографические проекции</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Не требуется</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>Сетка субъектов Федерации с привязанной статистикой по населению, государственная граница России, крупнейшие города России, крупнейшие озера, страны.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>Тематическая карта «Население России» масштаба 1:35 000 000</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Модели пространственных данных, модели пространственных объектов, базы пространственных данных, классы пространственных объектов, визуализация пространственных данных, геоинформационное картографирование</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-1">Контрольный лист</h3>
<ul>
<li>[x] Добавить на карту слои базы пространственных данных и оформить их</li>
<li>[x] Настроить подписи объектов</li>
<li>[x] Создать компоновку карты, легенду и координатную сетку</li>
<li>[x] Экспортировать результат в графический файл</li>
</ul>
<h3 id="аннотация-1">Аннотация</h3>
<p>Задание посвящено знакомству с созданием тематических карт на основе баз пространственных данных. Вы познакомитесь с представлением площадных, линейных, точечных объектов в базе пространственных данных. Научитесь создавать карты на их основе, оформлять легенду, сетку координат и зарамочные элементы карты, познакомитесь с применением картограмм и картодиаграмм в геоинформационном картографировании.</p>
<h2 id="начало-работы-1">Начало работы</h2>
<p><a href="#оформление-социально-экономической-карты">К содержанию ⇡</a></p>
<p>В каталоге <em>Ex01</em> находится база геоданных <em>MapData.gdb</em>, содержащая исходные данные для выполнения задания.</p>
<blockquote>
<p><strong>База геоданных</strong> — это структурированное хранилище, внутри которого можно создавать слои данных, группировать их и связывать различными отношениями.</p>
</blockquote>
<p>Внутри базы геоданных могут быть объекты следующих типов:</p>
<ul>
<li><img src="../images/Ex02/image3.png" /><img src="../images/Ex02/image4.png" /><img src="../images/Ex02/image5.png" /> --- слои векторных данных (классы пространственных объектов),</li>
<li><img src="../images/Ex02/image6.png" /> — слои растровых данных;</li>
<li><img src="../images/Ex02/image7.png" /> — обычные таблицы;</li>
</ul>
<blockquote>
<p><strong>Класс пространственных объектов (feature class)</strong> --- это набор пространственных объектов одного типа геометрии (точки, линии, полигоны или объемные тела). Для класса могут быть определены атрибуты, а его представлением является таблица, содержащая как обычные столбцы (текстовые, числовые и т.д.) так и специальное поле Shape, в котором хранится информация о геометрии. Каждая строчка в таблице — это описание одного объекта.</p>
</blockquote>
<ol type="1">
<li><p>Запустите приложение <strong>ArcMap</strong> и откройте окно <strong>Каталога</strong></p></li>
<li><p>Подключитесь к рабочему каталогу <em>Ex01</em> в окне <strong>Сatalog</strong>:</p>
<figure>
<img src="../images/Ex02/image2.png" />
</figure></li>
<li><p>Раскройте базу данных <em>MapData.gdb</em> и изучите классы пространственных объектов внутри нее:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Класс</strong></th>
<th style="text-align: left;"><strong>Содержание</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Borders</em></td>
<td style="text-align: left;">Государственная граница РФ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Cities</em></td>
<td style="text-align: left;">Города</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Lakes</em></td>
<td style="text-align: left;">Озера</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Regions</em></td>
<td style="text-align: left;">Субъекты федерации</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Countries</em></td>
<td style="text-align: left;">Страны</td>
</tr>
</tbody>
</table>
<p>К какому типу геометрии относятся данные классы?</p></li>
<li><p>Дважды щелкните на слое <em>Regions</em> и перейдите на вкладку <strong>XY Coordinate System</strong>.</p>
<p>Внимательно прочитайте информацию. Этот слой хранится в <em>Географической системе координат (GCS)</em>, отнесенной к эллипсоиду WGS-1984. Это означает, что координаты каждого объекта хранятся в виде широты и долготы. Этот слой можно спроецировать в любую проекцию. При этом координаты будут представлены в метрических единицах, а система координат получит название <em>Проецированной системы координат (PCS)</em>.</p></li>
</ol>
<h2 id="оформление-тематических-слоев">Оформление тематических слоев</h2>
<p><a href="#оформление-социально-экономической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Добавьте на карту слой <em>Regions</em>. Для этого просто перетащите его из окна Каталога на карту.</p></li>
<li><p>Переименуйте его в «<em>Плотность населения</em>». Для этого дважды (медленно) щелкните на названии слоя или выделите его и нажмите клавишу <kbd>F2</kbd>:</p>
<figure>
<img src="../images/Ex02/image8.png" />
</figure></li>
<li><p>Измените проекцию карты на равновеликую коническую проекцию Альберса. Ее можно найти по следующему пути:</p>
<p><strong>Projected Coordinate Systems &gt; Continental &gt; Asia &gt; Asia North Albers Equal Area Conic</strong></p>
<p>Обратите внимание на то, как изменится форма отображаемых объектов.</p></li>
<li><p>Откройте таблицу атрибутов слоя. Найдите в ней столбец <em>Density</em>, просмотрите его значения. Это поле таблицы хранит значения плотности населения по субъектам.</p></li>
<li><p>Найдите поля <em>Shape</em> и <em>ObjectID</em>.</p>
<blockquote>
<p>В поле <em>ObjectID</em> хранится уникальный идентификатор каждого объекта. Он нужен системе для того, чтобы каждый объект можно было гарантированно найти по некому однозначному критерию.</p>
</blockquote>
<blockquote>
<p>В поле <em>Shape</em> хранится геометрия объектов. Если слой точечный — это будут просто пары координат X и Y для каждого объекта. Для линейных и полигональных слоев это будет уже упорядоченный набор пар координат вершин границы объекта. Геометрия редактируется специальными инструментами, поэтому содержимое поля Shape скрыто от пользователя.</p>
</blockquote></li>
<li><p>Дважды щелкните на названии слоя и на вкладке <strong>Symbology</strong> и выберите способ изображения <em>Quantity — Graduated colors</em> (Картограммы).</p></li>
<li><p>Выберите в списке <strong>Value Field</strong> поле <em>Density</em>, система автоматически сформирует список классов, созданных методом естественных интервалов.</p>
<blockquote>
<p>Существует множество методов классификаций: равных интервалов, квантилей, стандартных отклонений и т.д. По умолчанию всегда выбирается метод естественных интервалов, т.к. считается, что он в среднем неплохо отражает особенности распределения. Следует знать, однако, что этот метод классификации плохо справляется с распределениями, обладающими значительной асимметрией и эксцессом (<em>heavy-tail distribution</em>).</p>
</blockquote></li>
<li><p>Измените число классов на 7:</p>
<figure>
<img src="../images/Ex02/image9.png" />
</figure></li>
<li><p>Измените метод классификации. Для этого нажмите <strong>Classify</strong>. В появившемся диалоговом окне выберите в списке сверху ручной метод задания интервалов (<em>Manual</em>) и в правом столбце замените первые шесть значений на следующие: 1, 10, 25, 50, 100, 250. Максимальное значение оставьте без изменений. Жмите <strong>ОК</strong>:</p>
<figure>
<img src="../images/Ex02/image10.png" />
</figure></li>
<li><p>На вкладке <strong>Symbology</strong> выберите цветовую шкалу <em>Yellow To Dark Red</em>:</p>
<figure>
<img src="../images/Ex02/image11.png" />
</figure></li>
<li><p>Инвертируйте сортировку классов, чтобы наверху оказались максимальные градации:</p>
<figure>
<img src="../images/Ex02/image12.png" />
</figure></li>
<li><p>Инвертируйте цветовую шкалу, чтобы цвета соответствовали градациям:</p>
<figure>
<img src="../images/Ex02/image13.png" />
</figure></li>
<li><p>В основном диалоге настройки символов исправьте подписи классов (столбец <em>Label</em>) в соответствии с нижеприведенным фрагментом:</p>
<figure>
<img src="../images/Ex02/image14.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>.</p></li>
<li><p>Переименуйте показатель в «<em>чел/кв. км</em>»:</p>
<figure>
<img src="../images/Ex02/image15.png" />
</figure>
<p>Результат:</p>
<figure>
<img src="../images/Ex02/image16.png" />
</figure></li>
<li><p>Сохраните карту</p></li>
<li><p>Скопируйте и вставьте слой «<em>Плотность населения</em>». Переименуйте его в «<em>Численность населения</em>»:</p>
<figure>
<img src="../images/Ex02/image17.png" />
</figure></li>
<li><p>Разместите новый слой поверх слоя плотности населения.</p></li>
<li><p>Измените его способ изображения на <em>Картодиаграммы (Quantities &gt; Graduated Symbols)</em>.</p></li>
<li><p>Выберите для отображения поле <em>SUM_Все_население</em>. Появится шкала классификации картодиаграмм.</p></li>
<li><p>Измените цвет кружка на голубой. Для этого нажмите кнопку <strong>Template</strong>, выберите значок <em>Circle 2</em> с тонкой обводкой и смените цвет заливки:</p>
<figure>
<img src="../images/Ex02/image18.png" />
</figure></li>
<li><p>Установите число классов равным 6:</p>
<figure>
<img src="../images/Ex02/image19.png" />
</figure></li>
<li><p>Аналогично предыдущему слою выберите ручной метод классификации и введите следующие границы классов: <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?500%2C%201000%2C%202500%2C%205000%2C%2010000" alt="500, 1000, 2500, 5000, 10000" title="500, 1000, 2500, 5000, 10000" />. Максимальную границу оставьте прежней:</p>
<figure>
<img src="../images/Ex02/image20.png" />
</figure></li>
<li><p>Нажмите ОК</p></li>
<li><p>Инвертируйте порядок классов и порядок символов в классификации (аналогично предыдущему слою) так чтобы наверху оказались максимальные значения.</p></li>
<li><p>Установите на вкладке <strong>Symbology</strong> максимальный и минимальный размер значка равным 18 и 4 пункта соответственно:</p>
<figure>
<img src="../images/Ex02/image21.png" />
</figure></li>
<li><p>Отредактируйте подписи классов по аналогии с картограммами:</p>
<figure>
<img src="../images/Ex02/image22.png" />
</figure></li>
<li><p>Задайте символ фона картодиаграмм в виде полигона с пустой заливкой и пустой обводкой. Для этого щелкните на кнопке <strong>Background</strong> и выберите режим <em>No Color</em> для заливки и для обводки:</p>
<figure>
<img src="../images/Ex02/image23.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>.</p>
<p>Результат:</p>
<figure>
<img src="../images/Ex02/image24.png" />
</figure></li>
<li><p>Сохраните карту</p></li>
</ol>
<h2 id="оформление-общегеографических-слоев">Оформление общегеографических слоев</h2>
<p><a href="#оформление-социально-экономической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Добавьте на карту слои <em>Borders</em>, <em>Cities</em>, <em>Countries</em> и <em>Lakes</em>. Установите следующий порядок слоев в таблице содержания:</p>
<ol type="a">
<li><em>Cities</em></li>
<li><em>Borders</em></li>
<li><em>Lakes</em></li>
<li><em>Численность населения</em></li>
<li><em>Плотность населения</em></li>
<li><em>Countries</em></li>
</ol></li>
<li><p>Переименуйте вновь добавленные слои следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Исходное название</strong></th>
<th><strong>Результирующее название</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Cities</em></td>
<td>Города</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Borders</em></td>
<td>Граница РФ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Lakes</em></td>
<td>Озера</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Countries</em></td>
<td>Страны</td>
</tr>
</tbody>
</table></li>
<li><p>Присвойте слою <em>Граница РФ</em> единый символ <em>Boundary, National.</em></p></li>
<li><p>Присвойте слою <em>Озера</em> единый символ <em>Lake.</em></p></li>
<li><p>Измените цвет точек слоя <em>Города</em> на белый.</p></li>
<li><p>Установите следующие параметры оформления для площадного слоя <em>Страны</em>:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Цвет заливки</em></td>
<td>Серый 10%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Цвет обводки</em></td>
<td>Серый 50%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Толщина обводки</em></td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Результат: <img src="../images/Ex02/image25.png" /></p></li>
<li><p>Сохраните карту</p></li>
</ol>
<h2 id="настройка-подписей-1">Настройка подписей</h2>
<p><a href="#оформление-социально-экономической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Включите механизм размещения подписей <strong>Maplex</strong>:</p>
<figure>
<img src="../images/Ex02/image26.png" />
</figure></li>
<li><p>Включите подписи для слоя <em>Города</em> на вкладке <strong>Labels</strong>. Выберите в качестве поля для подписей <em>name_2.</em> Остальные настройки оставьте по умолчанию:</p>
<figure>
<img src="../images/Ex02/image27.png" />
</figure></li>
<li><p>Включите подписи для слоя Страны. Настройте подписи следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th style="text-align: left;"><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поле (label field)</em></td>
<td style="text-align: left;">Название</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Тип размещения</em></td>
<td style="text-align: left;">Криволинейное (Curved)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Разрядка слов</em></td>
<td style="text-align: left;">Да</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Разрядка букв</em></td>
<td style="text-align: left;">Да</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Подписывать только наибольшую часть</em></td>
<td style="text-align: left;">Да</td>
</tr>
</tbody>
</table>
<p>Результат:</p>
<figure>
<img src="../images/Ex02/image28.png" />
</figure></li>
</ol>
<h2 id="настройка-компоновки-1">Настройка компоновки</h2>
<p><a href="#оформление-социально-экономической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Переключитесь в вид компоновки через команду меню <strong>View &gt; Layout View</strong></p></li>
<li><p>Настройте макет страницы следующим образом:</p>
<ul>
<li>Размер А4</li>
<li>Альбомная ориентировка</li>
</ul></li>
<li><p>Установите масштаб карты равным <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?1%3A35%20000%20000" alt="1:35 000 000" title="1:35 000 000" />. Подгоните размер фрейма данных таким образом, чтобы он был слегка больше контура России. Для этого используйте стрелку <img src="../images/Ex02/image29.png" /> на панели <strong>Tools</strong>. Разместите его в правом верхнем углу карты.</p></li>
<li><p>Отцентрируйте контур России внутри фрейма (рамки). Для этого используйте лапу <img src="../images/Ex02/image30.png" /> на панели <strong>Tools</strong>.</p></li>
<li><p>Смените цвет фрейма данных (фона) на светло-голубой.</p>
<p>Результат: <img src="../images/Ex02/image31.png" /></p></li>
<li><p>Добавьте на карту легенду, включив в нее только слои <em>Численность населения</em> и <em>Плотность населения.</em> Нажмите <strong>Далее</strong>.</p>
<figure>
<img src="../images/Ex02/image32.png" />
</figure></li>
<li><p>В следующем диалоге название легенды оставьте пустым:</p>
<figure>
<img src="../images/Ex02/image33.png" />
</figure></li>
<li><p>Далее все параметры оставьте по умолчанию.</p></li>
<li><p>Добавьте сетку координат со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Тип сетки</em></td>
<td>градусная</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Шаг по широте</em></td>
<td>10</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Шаг по долготе</em></td>
<td>10</td>
</tr>
</tbody>
</table></li>
<li><p>Отключите отображение нулевых минут и секунд</p></li>
<li><p>Разместите над картой текст заголовка карты, используя панель <strong>Drawing</strong> или меню <strong>Insert</strong>:</p>
<figure>
<img src="../images/Ex02/image34.png" />
</figure></li>
<li><p>Разместите под картой по центру численный масштаб <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?1%3A30%20000%20000" alt="1:30 000 000" title="1:30 000 000" />.</p></li>
<li><p>Разместите в правом нижнем углу карты текст «Выполнил» и свое ФИО.</p>
<p>Результат: <img src="../images/Ex02/image35.png" /></p></li>
<li><p>Сохраните карту.</p></li>
</ol>
<h2 id="экспорт-в-графический-файл-1">Экспорт в графический файл</h2>
<p><a href="#оформление-социально-экономической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Экспортируйте карту из режима компоновки в формат <strong>PNG</strong> с разрешением 300 точек на дюйм. Сохраните его в свою директорию.</p></li>
<li><p>Вставьте карту в отчетный файл</p></li>
</ol>
<h2 id="контрольные-вопросы">Контрольные вопросы</h2>
<p><a href="#оформление-социально-экономической-карты">К содержанию ⇡</a></p>
<p>Ответьте на вопросы в отчетном файле. После окончания положите ваш отчет в сетевую папку для проверки преподавателем</p>
<h1 id="оформление-карты-четвертичных-отложений">Оформление карты четвертичных отложений</h1>
<h2 id="введение-2">Введение</h2>
<p><strong>Цель задания</strong> --- знакомство с моделями пространственных объектов и базой пространственных данных. Визуализация данных на карте. Оформление легенды и компоновки карты.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Параметр</strong></th>
<th><strong>Значение</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td><kbd>Физико-географический поток</kbd></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Модели пространственных данных, модели пространственных объектов, базы пространственных объектов, картографические проекции</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Не требуется</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>База данных ГИС “Сатино”.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>Карта четвертичных отложений Сатинского учебного полигона масштаба 1:30 000</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Модели пространственных данных, модели пространственных объектов, базы пространственных данных, классы пространственных объектов, визуализация пространственных данных, геоинформационное картографирование</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-2">Контрольный лист</h3>
<ul>
<li>[x] Добавить на карту слои базы пространственных данных и оформить их</li>
<li>[x] Настроить подписи объектов</li>
<li>[x] Создать компоновку карты, легенду и координатную сетку</li>
<li>[x] Экспортировать результат в графический файл</li>
</ul>
<h3 id="аннотация-2">Аннотация</h3>
<p>Задание посвящено знакомству с созданием тематических карт на основе баз пространственных данных. Вы познакомитесь с представлением площадных, линейных, точечных объектов в базе пространственных данных. Научитесь создавать карты на их основе, оформлять легенду, сетку координат и зарамочные элементы карты.</p>
<h2 id="изучение-данных-в-приложении-arcmap">Изучение данных в приложении ArcMap</h2>
<p><a href="#оформление-карты-четвертичных-отложений">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Скопируйте папку <em>Ex03</em> с сервера в каталог под своей фамилией.</p></li>
<li><p>Откройте приложение <strong>ArcMap</strong></p>
<blockquote>
<p><strong>ArcMap</strong> — это основное приложение ArcGIS, предназначенное для редактирования и анализа данных, создания новых объектов и оформления карт.</p>
</blockquote></li>
<li><p>Откройте окно <strong>Catalog</strong>, нажав кнопку <img src="../images/Ex03/image2.png" /> на панели инструментов.</p>
<blockquote>
<p><strong>Catalog (Каталог)</strong> — это файловый менеджер для управления пространственными данными. Его задачи в чем-то аналогичны Проводнику в Windows или Finder в Mac OS X: создание, копирование, удаление и т.д., но видит она только файлы тех форматов, которые можно использовать в ГИС.</p>
</blockquote>
<figure>
<img src="../images/Ex03/image3.png" alt="Приложение ArcMap" /><figcaption>Приложение ArcMap</figcaption>
</figure></li>
<li><p>Раскройте папку <em>D:/GIS</em> в дереве каталогов и найдите в ней директорию <em>Ex03</em> в вашем каталоге, содержащую исходные данные для выполнения первого задания. Если директории <em>D:/GIS</em> нет в списке, подключитесь к ней c помощью кнопки <img src="../images/Ex03/image4.png" />.</p></li>
<li><p>Внутри директории <em>Ex03</em> раскройте содержимое объекта под названием <img src="../images/Ex03/image5.png" /> <em>Satino.gdb</em> — это база пространственных данных, созданная в формате <em>File Geodatabase</em> (файловая база геоданных).</p></li>
</ol>
<blockquote>
<p><strong>База геоданных</strong> — это структурированное хранилище, внутри которого можно создавать слои данных, группировать их и связывать различными отношениями. В базе геоданных <em>Satino.gdb</em> есть две группы: <img src="../images/Ex03/image6.png" /> General (общегеографические данные) и <img src="../images/Ex03/image6.png" /> Thematic (тематические данные).</p>
</blockquote>
<p>Внутри базы геоданных есть данные трех типов:</p>
<ul>
<li><img src="../images/Ex03/image7.png" /><img src="../images/Ex03/image8.png" /><img src="../images/Ex03/image9.png" /> --- слои векторных данных (классы пространственных объектов),</li>
<li><img src="../images/Ex03/image10.png" /> — слои растровых данных;</li>
<li><img src="../images/Ex03/image11.png" /> — обычные таблицы;</li>
</ul>
<blockquote>
<p><strong>Класс пространственных объектов (feature class)</strong> --- это набор пространственных объектов одного типа геометрии (точки, линии, полигоны или объемные тела). Для класса могут быть определены атрибуты, а его представлением является таблица, содержащая как обычные столбцы (текстовые, числовые и т.д.) так и специальное поле <em>Shape</em>, в котором хранится информация о геометрии. Каждая строчка в таблице — это описание одного объекта.</p>
</blockquote>
<p>Представьте, что вы работаете с двумя слоями: один содержит точки наблюдений скорости течения реки Протвы, другой — представление самой реки на меженный уровень в виде площадного объекта. Съемка точек производилась с помощью GPS-приемника, координаты измерены в виде геодезических широт и долгот на эллипсоиде <em>WGS-1984</em>. Береговая линия реки получена с топографического плана и сохранена в проекции <em>UTM</em>, координаты точек границы представлены семизначными числами в метрах.</p>
<p><em>Как совместить эти два слоя, чтобы составить карту фактического материала?</em> Очевидно, надо преобразовать координаты одного слоя в систему координат другого слоя: либо в метры в проекции UTM, либо в градусы на эллипсоиде <em>WGS-1984</em>.</p>
<ol type="1">
<li><p>Дважды щелкните на слое <em>WaterPolygon</em> в группе <em>General</em> и перейдите на вкладку <strong>XY Coordinate System</strong>.</p></li>
<li><p>Найдите строку <strong>Projection</strong>.</p>
<p><mark>В какой проекции хранятся координаты?</mark></p>
<p>Как вы помните, проекции обладают разными искажениями. В частности, проекция <em>Меркатора</em> вытягивает все приполярные объекты вдоль меридианов, следовательно, величины плоских прямоугольных координат зависят о того, какая проекция используется.</p></li>
<li><p>Найдите строку <strong>Linear Unit</strong>.</p>
<p><mark>В каких единицах измерения записаны координаты в проекции слоя WaterPolygon? Это могут быть градусы, метры, футы (в США) и т.д.</mark></p></li>
<li><p>Откройте свойства слоя <em>HydroMeasures</em>, лежащего к корне базы геоданных. Этот слой хранится в <em>Географической системе координат (ГСК)</em> — широтах и долготах, отнесенных к эллипсоиду <em>WGS-1984</em>. Т.е. у него <strong>нет проекции</strong>.</p></li>
<li><p>Закройте свойства слоя <em>HydroMeasures</em>.</p></li>
<li><p>Перенесите в таблицу содержания слой <em>WaterPolygon</em> из группы <em>General</em>.</p>
<p>Обратите внимание на то, что слой добавился под названием Гидрография (полигоны). У него был русскоязычный псевдоним (<em>alias</em>). Его можно задать в свойствах слоя в <strong>Каталоге</strong>.</p>
<blockquote>
<p><strong>Объекты базы геоданных</strong>, такие как слои, наборы данных, атрибутивные поля, обычно называют латинскими буквами, однако вы можете дать им русскоязычные псевдонимы, которые будут отображаться вместо названий в <strong>ArcMap</strong>.</p>
</blockquote></li>
<li><p>Добавьте в таблицу содержания слой <em>HydroMeasures</em>. Обратите внимание на то, что слои совместились, несмотря на то, что у них различные системы координат!</p></li>
<li><p>Откройте панель инструментов <strong>Tools</strong> (инструменты), щелкнув правой кнопкой мыши вверху окна и выбрав ее из списка.</p></li>
<li><p>Попробуйте инструменты навигации с панели <strong>Tools</strong>: увеличить/уменьшить <img src="../images/Ex03/image12.png" /> и переместить <img src="../images/Ex03/image13.png" />. Обратите внимание на то, как будет меняться масштаб вверху окна.</p>
<blockquote>
<p>Для быстрого доступа к инструментам <strong>увеличить, уменьшить и переместить</strong> используйте клавиши <kbd>Z</kbd>, <kbd>X</kbd> и <kbd>C</kbd> соответственно.</p>
</blockquote></li>
<li><p>Выберите инструмент <img src="../images/Ex03/image14.png" /> <strong>Identify</strong> и щелкните мышью на любом объекте, либо растяните прямоугольник вокруг объектов.</p>
<p><mark>Какую информацию позволяет узнать инструмент идентификации?</mark></p></li>
<li><p>Откройте атрибутивную таблицу слоя <em>Гидрография (полигоны)</em>, щелкнув на нем правой кнопкой мыши и выбрав команду <strong>Open Attribute Table</strong>.</p></li>
<li><p>Найдите поля <em>Shape</em> и <em>ObjectID</em>.</p>
<blockquote>
<p><strong>Звездочка</strong> (*) рядом с названием поля означает, что для него внутри базы геоданных построен <em>индекс</em> — невидимая вспомогательная таблица, позволяющая быстро находить объекты по их атрибутам или местоположению. Соответственно, различают атрибутивный и пространственный индекс.</p>
</blockquote>
<p>В поле <em>ObjectID</em> хранится уникальный идентификатор каждого объекта. Он нужен системе для того, чтобы каждый объект можно было гарантированно найти по некому однозначному критерию.</p>
<p>В поле <em>Shape</em> (вспомните, что слой полигональный) хранится список координат вершин полигона. Геометрия объектов редактируется специальными инструментами, поэтому содержимое поля <em>Shape</em> скрыто от пользователя.</p></li>
<li><p>Закройте атрибутивную таблицу.</p></li>
</ol>
<h2 id="способы-изображения">Способы изображения</h2>
<p><a href="#оформление-карты-четвертичных-отложений">К содержанию ⇡</a></p>
<p><strong>Карта</strong> — язык географии, и квалифицированный географ должен уметь пользоваться современным диалектом этого языка. В основе языка карт, как вы помните, лежат символы и способы изображения.</p>
<ol type="1">
<li><p>Удалите из таблицы содержания слой <em>HydroMeasures</em> и добавьте слой <em>QDeposit</em> (четвертичные отложения). Перетащите его вниз списка и дважды щелкните на нем.</p></li>
<li><p>Перейдите на вкладку <strong>Symbology</strong>. Здесь вы встретите многие знакомые вам способы изображения.</p>
<p><mark>Просмотрите список в левой части диалога и попробуйте назвать способы изображения, основываясь на вспомогательных иллюстрациях. Обсудите их с преподавателем.</mark></p>
<p>Четвертичные отложения показываются качественным фоном. В ArcGIS этот способ изображения называется <strong>Categories</strong> (категории).</p></li>
<li><p>Выберите пункт <strong>Categories</strong> в списке слева, и в нем же выберите режим <em>Unique values</em> (уникальные значения).</p>
<p>Вверху вы должны увидеть два списка: поле, из которого необходимо взять уникальные значения, и цветовая шкала.</p></li>
<li><p>Выберите поле <em>Отложения</em> в списке <strong>Value Field</strong>, и нажмите внизу диалога кнопку <strong>Add All Values</strong>. Программа просканирует всем строчкитаблицы, найдет уникальные значения, которые там есть, и подставит их в список. В крайнем правом поле отображается количество объектов каждого уникального значения:</p>
<figure>
<img src="../images/Ex03/image15.png" alt="Диалог настройки способа изображения" /><figcaption>Диалог настройки способа изображения</figcaption>
</figure>
<p>Обратите внимание на то, что типам объектов были автоматически присвоены символы из той цветовой шкалы, которая выбрана справа вверху.</p></li>
<li><p>Снимите галочку <strong>All other values</strong>, расположенную вверху списка.</p></li>
<li><p>Разверните список цветовых шкал <strong>Color Ramp</strong> и выберите любую другую на свой вкус. Цвета объектов в легенде автоматически поменяются.</p>
<p>Вы помните, однако, что есть официальные и неофициальные договоренности относительно цветов, используемых на геологических, геоморфологических, почвенных, геоботанических картах. Вы можете задать каждому типу индивидуально тот цвет, который требуется. Более того, вы можете сохранить набор цветов как шкалу.</p></li>
<li><p>Щелкните дважды на любом символе в легенде. Перед вами появится диалог настройки символа, в котором вы можете поэкспериментировать.</p></li>
<li><p>Закройте диалог настройки символа и нажмите <strong>ОК</strong> в диалоге свойств слоя.</p></li>
</ol>
<p>Теперь слой <em>Четвертичные отложения</em> показан методом качественного фона с использованием тех цветов, которые были назначены каждому типу.</p>
<h2 id="подписи">Подписи</h2>
<p><a href="#оформление-карты-четвертичных-отложений">К содержанию ⇡</a></p>
<p>В предыдущем разделе вы изучили возможные способы изображения и показали типы рельефа методом качественного фона. Однако карты без подписей встречаются крайне редко. Если в слое есть поле с теми значениями, которые надо вынести в качестве подписей, это делается автоматически.</p>
<ol type="1">
<li><p>Убедитесь, что включен механизм расстановки подписей <strong>Maplex</strong>. Для этого откройте панель инструментов <strong>Labeling</strong> и поставьте соответствующую галочку:</p>
<figure>
<img src="../images/Ex03/image16.png" alt="Включение механизма расстановки подписей Maplex" /><figcaption>Включение механизма расстановки подписей Maplex</figcaption>
</figure></li>
<li><p>Откройте снова свойства слоя Четвертичные отложения и перейдите на вкладку <strong>Labels</strong>.</p></li>
<li><p>Отметьте галочкой опцию <strong>Label features in this layer</strong>. Эта опция включает подписи для слоя.</p></li>
<li><p>В поле <strong>Label Field</strong> выберите значение <em>Индекс</em> Подписи будут браться из этого поля. Рядом расположены элементы настройки шрифта, с которыми вы можете поэкспериментировать:</p>
<figure>
<img src="../images/Ex03/image17.png" alt="Диалог настройки подписей для объектов" /><figcaption>Диалог настройки подписей для объектов</figcaption>
</figure></li>
<li><p>Нажмите кнопку <strong>Placement Properties</strong>. Появившийся диалог позволяет вам настроить, как именно будут размещены подписи относительно самих объектов. Это очень мощный инструмент, который управляет множеством нюансов расстановки подписей.</p></li>
<li><p>В диалоге <strong>Placement Properties</strong> нажмите кнопку <strong>Position</strong> и изучите возможные варианты. Попробуйте применить разные варианты. В конце верните способ по умолчанию — горизонтально внутри.</p></li>
<li><p>Закройте все диалоговые окна, последовательно нажимая кнопку <strong>OK</strong> в каждом из них.</p></li>
<li><p>Нажмите кнопку <img src="../images/Ex03/image18.png" /> на панели <strong>Tools</strong>, чтобы вся карта уместилась в окне просмотра. Окно приложения примет вид, примерно соответствующий тому, что показано на рисунке ниже:</p>
<figure>
<img src="../images/Ex03/image19.png" alt="Карта четвертичных отложений с индексами в произвольной цветовой шкале" /><figcaption>Карта четвертичных отложений с индексами в произвольной цветовой шкале</figcaption>
</figure></li>
</ol>
<p>Обратите внимание, что на вашей карте все объекты подписаны одинаково. Если требуется, чтобы подписи объектов были разными в зависимости от типа объекта, на вкладке <strong>Labels</strong> свойств слоя необходимо сменить режим <em>Label all the features the same way</em> на режим <em>Define classes…</em> и произвести настройку.</p>
<p><kbd><strong>Снимок экрана №1.</strong> Окно карты с подписями объектов</kbd></p>
<h2 id="компоновка-карты">Компоновка карты</h2>
<p><a href="#оформление-карты-четвертичных-отложений">К содержанию ⇡</a></p>
<p>Если карту необходимо подготовить к печати, снабдить заголовком, масштабом, легендой и градусной сеткой, используется режим компоновки.</p>
<ol type="1">
<li><p>Выберите пункт меню <strong>View &gt; Layout View</strong>. Приложение перейдет в режим компоновки.</p></li>
<li><p>Откройте панель инструментов <strong>Layout</strong>. С ее помощью вы можете осуществлять навигацию в режиме компоновки:</p>
<figure>
<img src="../images/Ex03/image20.png" alt="Панель инструментов Layout" /><figcaption>Панель инструментов Layout</figcaption>
</figure></li>
<li><p>Откройте меню <strong>Insert</strong> и изучите его содержание.</p>
<p><mark>Обсудите с преподавателем, какие элементы компоновки можно создать.</mark></p></li>
<li><p>Вставьте название карты (<strong>Insert &gt; Title</strong>). В появившемся диалоге введите текст «Карта четвертичных отложений». Сдвиньте название в угол листа.</p></li>
<li><p>Вставьте легенду (<strong>Insert &gt; Legend</strong>). Добавьте туда только слой четвертичных отложений. Разберитесь самостоятельно с мастером создания легенды.</p>
<p><mark>Настройка легенды разнесена на несколько диалоговых окон. Изучите назначение каждого из них. Обсудите их с преподавателем.</mark></p>
<p>Сетка прямоугольных координат строго привязана к местоположению самой карты, поэтому она является ее свойством. Для того, чтобы вставить ее, выполните следующие шаги:</p></li>
<li><p>Дважды щелкните на заголовке фрейма данных <strong>Layers</strong> и перейдите на вкладку <strong>Grid</strong>.</p></li>
<li><p>Нажмите кнопку <strong>New Grid</strong>.</p>
<p><mark>Перед вами окажется диалог с тремя типами возможных сеток. Чем они отличаются? Обсудите их с преподавателем.</mark></p></li>
<li><p>Выберите режим <em>Measured Grid</em>, который создает сетку в плоских прямоугольных координатах. Изучите модерждание каждого последующего диалога, параметры оставьте по умолчанию</p></li>
<li><p>Нажмите <strong>ОК</strong> в свойствах фрейма данных. Теперь поверх вашей карты должна отображаться сетка прямоугольных координат.</p></li>
<li><p>Разместите на карте линейный масштаб в метрах.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №2.</strong> Компоновка карты с легендой и масштабом</kbd></p>
<p>Сохраните карту через команду меню <strong>File &gt; Save as</strong> в свою директорию под названием <em>Ex03.mxd</em>.</p>
<h2 id="редактирование-атрибутов">Редактирование атрибутов</h2>
<p><a href="#оформление-карты-четвертичных-отложений">К содержанию ⇡</a></p>
<p>Атрибуты играют важную роль в геоинформационных системах. На их основе происходит визуализация данных, также они участвуют в большинстве операций пространственного анализа. Необходимо овладеть техникой их создания, редактирования и использования.</p>
<p>Редактирование атрибутов может понадобиться при заполнении полей для новых объектов, исправлении ошибок и заполнении пустых значений.</p>
<ol type="1">
<li><p>Переключитесь обратно в режим <strong>View &gt; Data View</strong>.</p></li>
<li><p>Добавьте на карту слой <img src="../images/Ex03/image8.png" /> <em>WaterLine</em> (линейные объекты гидрографии).</p></li>
<li><p>Исправьте его символ на голубую линию толщиной 1.5 пиксела, чтобы он лучше читался на карте.</p></li>
<li><p>Включите подписи по полю <em>RiverName</em> на вкладке <strong>Labels</strong>, задайте им синий цвет, криволинейное размещение и нажмите <strong>OK</strong> в диалоге свойств слоя.</p>
<p><mark>Появились ли подписи ручьев?</mark></p>
<p>По всей видимости, с полем <em>RiverName</em> что-то не в порядке. Давайте проинспектируем атрибутивную таблицу.</p></li>
<li><p>Зажмите клавишу <kbd>Ctrl</kbd> и дважды кликните на названии слоя <em>Гидрография (линии)</em>. Откроется его атрибутивная таблица.</p>
<blockquote>
<p>Таблицу также можно открыть через контекстное меню слоя, выбрав пункт <strong>Open Attribute Table</strong>. Свойства слоя также доступны из пункта <strong>Properties</strong> в контекстном меню. Однако вариант с двойным нажатием более быстрый и, скорее всего, более удобный.</p>
</blockquote>
<p>Похоже, что создатель слоя забыл внести в него названия водотоков. Следует исправить этот недочет.</p></li>
<li><p>Пристыкуйте таблицу в нижнюю часть окна, чтобы она не загораживала карту.</p></li>
<li><p>Выделите в таблице содержания слой Гидрография (линии) и в его контекстном меню выберите пункт <strong>Edit Features &gt; Start Editing</strong>. Включится режим редактирования, который позволяет вручную править атрибуты и геометрию объектов. Должна появиться панель редактора:</p>
<figure>
<img src="../images/Ex03/image21.png" alt="Панель редактирования Editor" /><figcaption>Панель редактирования Editor</figcaption>
</figure></li>
<li><p>Чтобы не выделять лишних объектов, в контекстном меню слоя <em>Гидрография (линии)</em> выберите пункт <strong>Selection &gt; Make this the only selectable layer</strong></p></li>
<li><p>Возьмите с панели редактора инструмент выбора (отмечен на рисунке) и выделите с его помощью ручей <em>Язвицы</em> (на севере полигона). Он автоматически подсветится в таблице. Введите название в ячейку поля <em>RiverName</em>:</p>
<figure>
<img src="../images/Ex03/image22.png" alt="Редактирование таблицы атрибутов слоя" /><figcaption>Редактирование таблицы атрибутов слоя</figcaption>
</figure></li>
<li><p>Найдите на карте Чолоховский ручей (на юге полигона), выделите его и в контекстном меню выберите пункт <strong>Attributes</strong>. Перед вами откроется окно редактора атрибутов --- это еще один способ редактирования таблицы, ориентированный на индивидуальную работу с каждым объектом:</p>
<figure>
<img src="../images/Ex03/image23.png" alt="Редактор атрибутов" /><figcaption>Редактор атрибутов</figcaption>
</figure></li>
<li><p>Найдите поле <em>RiverName</em> и введите название ручья.</p></li>
<li><p>Завершите редактирование, выбрав на панели редактора пункт меню <strong>Editor &gt; Stop Editing</strong>. В появившемся диалоге нажмите Да.</p></li>
</ol>
<p><mark>Появились ли теперь подписи ручьев Язвицы и Чолоховский?</mark></p>
<p><kbd><strong>Снимок экрана №3.</strong> Окно карты с подписями ручьев</kbd></p>
<p>Сохраните документ карты еще раз. Сохраните ваш отчетный файл и положите его в сетевую папку преподавателя.</p>
<h2 id="создание-и-вычисление-атрибутов-дополнительно">Создание и вычисление атрибутов (дополнительно)</h2>
<p><a href="#оформление-карты-четвертичных-отложений">К содержанию ⇡</a></p>
<p>Поля можно не только заполнять вручную, их можно вычислять и копировать значения из других полей. Но для начала необходимо научиться их создавать.</p>
<p>Предположим, что бригада топографов произвела съемку границы леса в целях ее сравнения с данными 10-летней давности. Чтобы построить карту границы леса и совместить ее с другими данными, необходимо знать координаты опорных геодезических пунктов, которые участвовали в планово-высотном обосновании. Эти пункты есть в базе геоданных <em>Satino.gdb</em>.</p>
<ol type="1">
<li><p>Добавьте на карту слой <img src="../images/Ex03/image7.png" /> <em>GeoPoints</em> (геодезические пункты).</p></li>
<li><p>Смените через свойства слоя значок на белый треугольник с точкой посередине (он есть в библиотеке).</p></li>
<li><p>Откройте атрибутивную таблицу слоя.</p>
<p><mark>Есть ли координаты точек в таблице слоя Геодезические пункты? В каком поле они должны храниться?<mark></p>
<p>Координаты объектов точечного слоя можно вывести в числовое поле. Для этого создадим два поля <em>X</em> и <em>Y</em>.</p></li>
<li><p>Выберите в окне таблицы пункт меню <img src="../images/Ex03/image24.png" /> <strong>Table Options — Add Field...</strong>.</p></li>
<li><p>В диалоге введите <em>X</em> (латиницей) в название поля <strong>Name</strong>.</p></li>
<li><p>Теперь необходимо задать тип поля. Раскройте ниспадающий список <strong>Type</strong>.</p>
<p><mark>Какой тип должно иметь поле для хранения координат геодезических пунктов и почему? Обсудите с преподавателем все варианты, которые есть в списке и случаи, когда их необходимо использовать.</mark></p></li>
<li><p>Установите тип поля <em>Float</em>. Остальные параметры оставьте по умолчанию. Нажмите <strong>OK</strong>.</p></li>
<li><p>Повторите операцию, создав поле <em>Y</em>.</p></li>
<li><p>Нажмите правой кнопкой на заголовке поля <em>X</em> и выберите в контекстном меню <strong>Calculate Geometry...</strong>.</p></li>
<li><p>В появившемся диалоге из ниспадающего списка выберите величину <em>X Coordinate of Point</em> и единицы измерения <em>Meters</em>.</p>
<p>Обратите внимание, что инструмент <strong>Calculate Geometry</strong> позволяет вам вычислять координаты не только в проекции данных (<em>data source</em>), но и в проекции карты (<em>data frame</em>).</p></li>
<li><p>Нажмите <strong>OK</strong>.</p></li>
<li><p>Повторите вычисление координаты для поля <strong>Y</strong></p>
<p><mark>Какого порядка величины получились в полях <strong>X</strong> и <strong>Y</strong>? Вспомните, куда направлена ось <em>X</em> в проеции <em>UTM/Гаусса-Крюгера</em>. Нет ли здесь противоречия?</mark></p>
<blockquote>
<p>В ArcGIS используется стандартная система плоских прямоугольных координат, в которой ось <em>X</em> направлена на восток, а ось <em>Y</em> — на север. То же самое касается и проекций Гаусса-Крюгера и UTM</p>
</blockquote></li>
</ol>
<h2 id="контрольные-вопросы-1">Контрольные вопросы</h2>
<p><a href="#оформление-карты-четвертичных-отложений">К содержанию ⇡</a></p>
<h1 id="оформление-общегеографической-карты">Оформление общегеографической карты</h1>
<h2 id="введение-3">Введение</h2>
<p><strong>Цель задания</strong> --- знакомство с моделями пространственных объектов и базой пространственных данных. Визуализация данных на карте. Оформление легенды и компоновки карты.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td><kbd>Общий</kbd></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Модели пространственных данных, модели пространственных объектов, базы пространственных объектов, картографические проекции</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Не требуется</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>Картографическая база данных на территорию Швейцарии</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>Общегеографическая карта Швейцарии в масштабе 1:1 750 000.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Модели пространственных данных, модели пространственных объектов, базы пространственных данных, классы пространственных объектов, визуализация пространственных данных</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-3">Контрольный лист</h3>
<ul>
<li>[x] Добавить на карту слои базы пространственных данных и оформить их</li>
<li>[x] Настроить подписи объектов</li>
<li>[x] Создать компоновку карты и легенду</li>
<li>[x] Экспортировать результат в графический файл</li>
</ul>
<h3 id="аннотация-3">Аннотация</h3>
<p>Задание посвящено знакомству с созданием тематических карт на основе баз пространственных данных. Вы познакомитесь с представлением площадных, линейных, точечных объектов в базе пространственных данных. Научитесь создавать карты на их основе, оформлять легенду, сетку координат и зарамочные элементы карты.</p>
<h2 id="начало-работы-2">Начало работы</h2>
<p><a href="#оформление-общегеографической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Запустите приложение <strong>ArcMap</strong> и откройте окно <strong>Сatalog</strong></p></li>
<li><p>Подключитесь к рабочему каталогу <em>Ex04</em> в окне <strong>Сatalog</strong>.</p>
<p>В каталоге <em>Ex04</em> находится база геоданных <em>MapData.gdb</em>, содержащая исходные данные для выполнения задания. Внутри базы геоданных могут быть объекты следующих типов:</p>
<ul>
<li><img src="../images/Ex04/image5.png" /><img src="../images/Ex04/image6.png" /><img src="../images/Ex04/image7.png" /> --- слои векторных данных (классы пространственных объектов),</li>
<li><img src="../images/Ex04/image8.png" /> — слои растровых данных;</li>
<li><img src="../images/Ex04/image9.png" /> — обычные таблицы;</li>
</ul></li>
<li><p>Раскройте базу данных <em>MapData.gdb</em> и изучите ее содержимое:</p>
<figure>
<img src="../images/Ex04/image10.png" />
</figure></li>
</ol>
<p>Векторные слои базы данных <em>MapData.gdb</em>:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Слой</th>
<th style="text-align: left;">Содержание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Airports</em></td>
<td style="text-align: left;">Аэропорты</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Borders</em></td>
<td style="text-align: left;">Границы</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Cities</em></td>
<td style="text-align: left;">Города</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Countries</em></td>
<td style="text-align: left;">Страны</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Frame</em></td>
<td style="text-align: left;">Рамка (фрейм)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Heights</em></td>
<td style="text-align: left;">Высотные отметки</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Lakes</em></td>
<td style="text-align: left;">Озера</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Railroads</em></td>
<td style="text-align: left;">Железные дороги</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Rivers</em></td>
<td style="text-align: left;">Реки</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Roads</em></td>
<td style="text-align: left;">Дороги</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Snow</em></td>
<td style="text-align: left;">Ледники и снежники</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>UrbanAreas</em></td>
<td style="text-align: left;">Урбанизированные территории</td>
</tr>
</tbody>
</table>
<p>Растровые слои базы данных <em>MapData.gdb</em>:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Слой</th>
<th style="text-align: left;">Содержание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Elevation</em></td>
<td style="text-align: left;">Высоты рельефа</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Hillshade</em></td>
<td style="text-align: left;">Отмывка рельефа</td>
</tr>
</tbody>
</table>
<h2 id="оформление-рельефа">Оформление рельефа</h2>
<p><a href="#оформление-общегеографической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Добавьте на карту слой <em>Elevation</em> из базы данных <em>MapData.gdb</em>.</p></li>
<li><p>В настройках оформления растрового слоя установите способ градиентной окраски со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Шкала</em></td>
<td style="text-align: left;">Surface <img src="../images/Ex04/image11.png" /></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Растяжка гистограммы</em></td>
<td style="text-align: left;">Минимум-Максимум (Minimum-maximum)</td>
</tr>
</tbody>
</table></li>
<li><p>Установите передискретизацию слоя в режим кубической cвертки (<em>Cubic Convolution</em>).</p>
<p><em>Результат:</em> <img src="../images/Ex04/image12.png" /></p></li>
<li><p>Наложите отмывку поверх гипсометрической окраски. Для этого добавьте на карту слой отмывки <em>Hillshade</em> и установите для него следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Прозрачность</em></td>
<td style="text-align: left;">50%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Режим передискретизации</em></td>
<td style="text-align: left;">Кубическая свертка</td>
</tr>
</tbody>
</table>
<p>Остальные параметры оставьте по умолчанию.</p>
<p><em>Результат</em>: <img src="../images/Ex04/image13.png" /></p></li>
</ol>
<p><mark>Сохраните документ карты в каталог Ex04 под названием Ex04_Фамилия.</mark></p>
<h2 id="оформление-векторных-слоев">Оформление векторных слоев</h2>
<p><a href="#оформление-общегеографической-карты">К содержанию ⇡</a></p>
<p>Добавьте на карту и оформите векторные слои, содержащиеся в базе данных <em>MapData.gdb</em>, все кроме слоя <em>Countries</em>. Для каждого слоя выберите единый символ. В качестве образца оформления используйте рисунок ниже. <img src="../images/Ex04/image14.png" /></p>
<p>Учтите, что:</p>
<ul>
<li><p>Слой <em>Snow</em> располагается между отмывкой и цветовой окраской рельефа. Это позволяет показать заснеженные территории, но при этом сохранить светотеневую пластику.</p></li>
<li><p>При выборе значка для аэропорта следует воспользоваться поиском по символам, набрав ключевое слово <em>«airport»</em></p></li>
</ul>
<p><em>Результат</em>: <img src="../images/Ex04/image15.png" /></p>
<h2 id="создание-подписей">Создание подписей</h2>
<p><a href="#оформление-общегеографической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Установите масштаб карты равным 1:1 750 000.</p></li>
<li><p>Включите <strong>Maplex</strong> для размещения подписей и переведите его в режим <em>Best</em></p></li>
<li><p>Сделайте подписи для слоев <em>Cities</em>, <em>Heights</em>, <em>Rivers</em>, <em>Lakes</em> со следующими параметрами:</p>
<p><em>Cities</em>:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Шрифт</em></td>
<td style="text-align: left;">Calibri</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер</em></td>
<td style="text-align: left;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Цвет</em></td>
<td style="text-align: left;">Черный</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Начертание</em></td>
<td style="text-align: left;">Обычный</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Размещение</em></td>
<td style="text-align: left;">По умолчанию</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Образец</em></td>
<td style="text-align: left;">-<img src="../images/Ex04/image16.png" /></td>
</tr>
</tbody>
</table>
<p><em>Heights</em>:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Шрифт</em></td>
<td style="text-align: left;">Calibri</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер</em></td>
<td style="text-align: left;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Цвет</em></td>
<td style="text-align: left;">Серый 80%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Начертание</em></td>
<td style="text-align: left;">Курсивный</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Размещение</em></td>
<td style="text-align: left;">По умолчанию</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Образец</em></td>
<td style="text-align: left;">-<img src="../images/Ex04/image17.png" /></td>
</tr>
</tbody>
</table>
<p><em>Rivers</em>:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Шрифт</em></td>
<td style="text-align: left;">Calibri</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер</em></td>
<td style="text-align: left;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Цвет</em></td>
<td style="text-align: left;">Синий Dark Navy</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Начертание</em></td>
<td style="text-align: left;">Курсивный</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Размещение</em></td>
<td style="text-align: left;">Regular Placement &gt; Offset Curved</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Образец</em></td>
<td style="text-align: left;">-<img src="../images/Ex04/image18.png" /></td>
</tr>
</tbody>
</table>
<p><em>Lakes</em>:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Шрифт</em></td>
<td style="text-align: left;">Calibri</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер</em></td>
<td style="text-align: left;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Цвет</em></td>
<td style="text-align: left;">Синий Dark Navy</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Начертание</em></td>
<td style="text-align: left;">Курсивный</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Размещение</em></td>
<td style="text-align: left;">Regular Placement &gt; Curved</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Образец</em></td>
<td style="text-align: left;">-<img src="../images/Ex04/image19.png" /></td>
</tr>
</tbody>
</table></li>
</ol>
<p><em>Результат</em> должен выглядеть примерно следующим образом: <img src="../images/Ex04/image20.png" /></p>
<h2 id="классификация-населенных-пунктов">Классификация населенных пунктов</h2>
<p><a href="#оформление-общегеографической-карты">К содержанию ⇡</a></p>
<p>Недостатком полученной карты является то, что все населенные пункты показаны одинаково. Чтобы исправить этого, необходимо разделить их по категориям численности населения. Для этого:</p>
<ol type="1">
<li><p>В диалоге настройки символов слоя включите режим отображения <strong>Categories (unique values)</strong>, используя значения поля <em>Население_диапазон</em></p></li>
<li><p>Отсортируйте классы численности в нужном порядке, используя стрелочки.</p></li>
<li><p>Настройте размер кружка таким образом, чтобы его диаметр менялся от 3 до 7 пунктов</p>
<p><em>Результат</em>: <img src="../images/Ex04/image21.png" /></p></li>
<li><p>Перейдите на вкладку <strong>Labels</strong> и переключите подписи в режим нескольких классов.</p></li>
<li><p>Импортируйте классы с помощью кнопки <strong>Get Symbol Classes</strong>.</p></li>
<li><p>Настройте подписи следующим образом:</p>
<ul>
<li>Шрифт <em>Calibri</em> черного цвета</li>
<li>Размер шрифта должен увеличиваться от низшего класса (менее 10 000) до самого крупного (от 250 000 до 500 000) с 8 до 12 пунктов.</li>
<li>Подписи городов крупнее 100 000 человек должны быть жирным шрифтом.</li>
</ul>
<p><em>Результат</em>: <img src="../images/Ex04/image22.png" /></p></li>
</ol>
<h2 id="маска-и-подписи-стран">Маска и подписи стран</h2>
<p><a href="#оформление-общегеографической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Добавьте на карту слой <em>Countries</em> и расположите его между слоями <em>Hillshade</em> и <em>Snow</em>.</p></li>
<li><p>Настройте отображение слоя способом <strong>Categories (unique values)</strong> по полю <em>Name</em>.</p></li>
<li><p>Установите следующие параметры отображения:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Цвет заливки</em></td>
<td style="text-align: left;">Швейцария — нет заливки, остальные страны — серый 50%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Цвет обводки</em></td>
<td style="text-align: left;">Нет</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Прозрачность слоя</em></td>
<td style="text-align: left;">50%</td>
</tr>
</tbody>
</table></li>
<li><p>Включите подписи стран по полю <em>Name</em>, используя следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Шрифт</em></td>
<td style="text-align: left;">Garamond</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер</em></td>
<td style="text-align: left;">24</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Цвет</em></td>
<td style="text-align: left;">Коричневый/Бардовый</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Начертание</em></td>
<td style="text-align: left;">Обычный</td>
</tr>
</tbody>
</table></li>
<li><p>Также установите следующие параметры размещения:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Позиция</em></td>
<td style="text-align: left;">Type &gt; Land Parcel Placement</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Растяжка</em></td>
<td style="text-align: left;">Распределять символы (Spread Characters)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Плотность размещения</em></td>
<td style="text-align: left;">Подписывать только крупнейшую часть (Label largest feature part)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Разрешение конфликтов</em></td>
<td style="text-align: left;">Никогда не удалять (Never Remove)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Образец</em></td>
<td style="text-align: left;">-<img src="../images/Ex04/image23.png" /></td>
</tr>
</tbody>
</table></li>
</ol>
<p><em>Результат</em>: <img src="../images/Ex04/image24.png" /></p>
<h2 id="настройка-компоновки-карты">Настройка компоновки карты</h2>
<p><a href="#оформление-общегеографической-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Переключитесь в вид компоновки</p></li>
<li><p>Настройте макет листа следующим образом:</p>
<ul>
<li>Размер А4</li>
<li>Альбомная ориентировка</li>
</ul></li>
<li><p>Подгоните размер фрейма данных таким образом, чтобы карта оказалась в верхней части листа</p></li>
<li><p>Установите масштаб равным 1:1 750 000</p>
<p><em>Результат</em>: <img src="../images/Ex04/image25.png" /></p></li>
<li><p>Используя настройки по умолчанию, вставьте легенду, включив в нее все слои, кроме <em>Elevation</em>, <em>Countries</em> и <em>Hillshade</em></p>
<p><em>Результат</em>: <img src="../images/Ex04/image26.png" /></p></li>
<li><p>Измените название показателя для слоя <em>Cities</em> на «число жителей». Уменьшите размер шрифта до 9 и сделайте его курсивным.</p></li>
<li><p>Уменьшите размер шрифта для стиля названия слоя <em>Cities</em> до 10 пунктов.</p></li>
<li><p>Переименуйте все слои в таблице содержания на русский язык в соответствии с таблицей в начале упражнения. Обратите внимание на то, что в легенде они переименуются автоматически.</p></li>
<li><p>Переименуйте заголовок легенды на русский язык.</p></li>
<li><p>Увеличьте интервал между слоями в легенде до 10 пунктов.</p>
<p><em>Результат</em>: <img src="../images/Ex04/image27.png" /></p></li>
<li><p>Вставьте на карту координатную сетку типа <strong>Graticule</strong> с шагом 1° по широте и долготе. Отключите для градусной сетки показ минут и секунд.</p></li>
<li><p>Вставьте название карты над картой по центру, используя следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Шрифт</em></td>
<td style="text-align: left;">Arial</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер шрифта</em></td>
<td style="text-align: left;">16</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Начертание</em></td>
<td style="text-align: left;">Полужирный</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Разрядка</em></td>
<td style="text-align: left;">10 пунктов</td>
</tr>
</tbody>
</table></li>
<li><p>Вставьте <em>километровую</em> масштабную линейку по нижеприведенному образцу, чтобы завершить оформление карты:</p>
<figure>
<img src="../images/Ex04/image28.png" />
</figure></li>
</ol>
<h2 id="экспорт-в-графический-файл-2">Экспорт в графический файл</h2>
<p><a href="#оформление-общегеографической-карты">К содержанию ⇡</a></p>
<p>Экспортируйте карту из режима компоновки в формат <kbd>PNG</kbd> с разрешением 300 точек на дюйм.</p>
<h2 id="контрольные-вопросы-2">Контрольные вопросы</h2>
<p><a href="#оформление-общегеографической-карты">К содержанию ⇡</a></p>
<h1 id="привязка-и-цифрование-гидрогеологической-карты">Привязка и цифрование гидрогеологической карты</h1>
<h2 id="введение-4">Введение</h2>
<p><strong>Цель задания</strong> — знакомство с привязкой, трансформированием и цифрованием геоизображений, элементами базовых технологий ГИС (оверлей, пространственные запросы).</p>
<table style="width:11%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Поток</td>
<td>Гидрометпоток, Физпоток</td>
</tr>
<tr class="even">
<td>Теоретическая подготовка</td>
<td>Системы координат и проекции на картах, привязка геоизображений, трансформирование геоизображений, цифрование геоизображений. Методы трансформации: аффинное, проективное, полиномиальное, метод резинового листа (сплайны). Пространственные запросы, атрибутивные запросы, оверлей.</td>
</tr>
<tr class="odd">
<td>Практическая подготовка</td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Работа с базой геоданных. Настройка символики и подписей объектов.</td>
</tr>
<tr class="even">
<td>Исходные данные</td>
<td>Слои картографической основы (карт масштаба 1:2 500 000), растровая карта гидрогеологического районирования на район среднего течения Дона.</td>
</tr>
<tr class="odd">
<td>Результат</td>
<td>Слой гидрогеологического районирования в базе данных. Слой рек, обогащенный данными о принадлежности участков рек к артезианским бассейнам. Проект карты с оформленной компоновкой</td>
</tr>
<tr class="even">
<td>Ключевые слова</td>
<td>Системы координат, проекции, трансформирование координат, пространственная привязка, цифрование, оверлей, пространственные запросы, атрибутивные запросы</td>
</tr>
</tbody>
</table>
<p><strong>Контрольный лист</strong>:</p>
<ul>
<li>[ ] Привязать растровую карту к опорным данным</li>
<li>[ ] Создать в базе геоданных класс пространственных объектов для районов</li>
<li>[ ] Наполнить класс районов путем цифрования растровой карты</li>
<li>[ ] Заполнить названия районов</li>
<li>[ ] Осуществить оверлей для обогащения слоя рек данными о принадлежности к бассейнам, выполнить пространственный и атрибутивный запрос</li>
<li>[ ] Подготовить проект гидрогеологической карты с компоновкой</li>
</ul>
<p><strong>Аннотация</strong></p>
<p>Задание посвящено знакомству с привязкой растровых карт, созданием и наполнением баз пространственных данных путем цифрования, использовании оверлея, пространственных и атрибутивных запросов. Эти методы входят в число базовых технологий геоинформатики. С их помощью в дальнейшем вы сможете решать множество задач. Одним из источников питания рек являются артезианские воды. К артезианским водам относятся подземные воды, находящиеся в водоносных горизонтах, перекрытых и подстилаемых водоупорными (или относительно водоупорными) слоями горных пород, и обладающие гидростатическим напором. В задании предлагается перевести в векторный вид карту гидрогеологического районирования среднего течения Дона и далее наполнить этой информацией участки рек, чтобы в дальнейшем определять источник питания каждой реки.</p>
<h2 id="оформление-базовых-слоев">Оформление базовых слоев</h2>
<ol type="1">
<li><p>Скопируйте каталог <em>Ex02</em> в свою папку.</p></li>
<li><p>Откройте приложение <strong>ArcMap</strong>, создайте новый документ карты и сохраните его в свою папку <em>Ex02</em>.</p></li>
<li><p>Подключитесь в окне каталога к папке <em>Ex02</em>. Убедитесь, что в ней находится база геоданных <em>Don.gdb</em> и растровый файл <em>DonArtesian.png</em>.</p></li>
<li><p>Раскройте базу геоданных и перенесите на карту классы <em>Lakes</em> и <em>Rivers</em></p></li>
<li><p>Присвойте слою <em>Lakes</em> символ с голубой заливкой и синей обводкой.</p></li>
<li><p>Настройте оформление слоя <em>Rivers</em> следующим образом:</p>
<ul>
<li><p>Выберите способ изображения по категориям (уникальные значения).</p></li>
<li><p>В качестве поля для отображения используйте атрибут <em>Тип</em>. Нажмите <em>Add All Values</em>.</p></li>
<li><p>Покрасьте все реки в синий цвет. Для этого щелкните на заголовке первого столбца <em>Symbol</em> и вызовите команду <em>Properties for all symbols</em>. Выберите <em>точно такой же цвет</em>, что вы использовали для обводки озер.</p></li>
<li><p>Установите следующие параметры толщины линий:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Реки постоянные крупные</td>
<td style="text-align: left;">2 пункта</td>
</tr>
<tr class="even">
<td style="text-align: left;">Реки постоянные средние</td>
<td style="text-align: left;">1,5 пункта</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Остальные классы</td>
<td style="text-align: left;">1 пункт</td>
</tr>
</tbody>
</table></li>
</ul>
<p>Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex05/image7.png" alt="Рисунок 5" /><figcaption>Рисунок 5</figcaption>
</figure></li>
<li><p>Включите опцию подписи рек. Перейдите на вкладу <strong>Labels</strong> и отметьте флажок <strong>Label features in this layer</strong>. Выберите поле <em>Название</em> в качестве поля для подписей, смените их цвет на темно-синий и установите криволинейное размещение вдоль линии. Нажмите ОК. В результате операции все реки будут подписаны.</p></li>
<li><p>Чтобы были подписаны только крупнейшие реки, необходимо использовать определяющий запрос на языке SQL. Для этого откройте снова свойства слоя и на вкладке <strong>Labels</strong> выберите метод «<em>Define classes of features and label each class separately</em>». Нажмите кнопку <strong>SQL query…</strong> и введите в поле следующий текст запроса:</p>
<p><code>&quot;CLASS&quot; = 2 OR &quot;CLASS&quot; = 3</code></p>
<p>Чтобы избежать ошибок ввода, вы можете дважды щелкнуть на поле <code>CLASS</code> в списке слева — оно подставится в запрос. Добавьте знак <code>=</code>. Далее нажмите кнопку <strong>Get unique values</strong> и найдите 2-й класс. Щелкните на нем дважды — после этого название поля подставится в текст запроса. После этого введите оператор <code>OR</code> и повторите ввод для 3-го класса. Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex05/image8.png" />
</figure></li>
<li><p>Нажмите ОК в диалоге свойств слоя. Карта примет следующий вид:</p>
<figure>
<img src="../images/Ex05/image9.png" />
</figure></li>
<li><p>Сохраните документ карты в <em>свою</em> папку <em>Ex02</em> под именем <em>Don.mxd</em>.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №1</strong> — <em>Реки</em></kbd></p>
<h2 id="привязка-карты">Привязка карты</h2>
<ol type="1">
<li><p>Внимательно прочтите раздел <em>Привязка растровых данных (Georeferencing)</em> в файле <em>Описание функций</em>.</p></li>
<li><p>Добавьте на карту из базы данных слой <em>DonArtesian.png.</em> и поместите его непосредственно под слоем Rivers. При добавлении слоя появится диалоговое окно, предупреждающее о том, что файл не имеет привязки. Закройте его.</p></li>
<li><p>Поместите карту в центр окна ArcMap.</p></li>
<li><p>Откройте панель инструментов <strong>Georeferencing</strong>. Убедитесь, что в ее списке выбран файл <em>DonArtesian</em>. Выберите в ее меню команду <strong>Fit to Display</strong>, чтобы переместить непривязанный растр на середину области отображения.</p></li>
<li><p>Поместите растр непосредственно под слоем <em>Rivers</em>.</p></li>
<li><p>Используя инструмент расстановки контрольных точек, укажите пять контрольных точек в разных частях карты. Желательно, чтобы точки были равномерно распределены по полю карты (по краям и в центре) и <em>не располагались на одной линии</em> — это обеспечит хорошие коэффициенты трансформации. В качестве точек используйте места впадения притоков и впадения рек в водохранилища. Например, можно использовать точку впадения реки Хопёр в реку Дон:</p>
<figure>
<img src="../images/Ex05/image10.png" />
</figure>
<figure>
<img src="../images/Ex05/image11.png" />
</figure></li>
<li><p>Ознакомьтесь с доступными методами трансформирования по контрольным точкам. Для этого в меню <strong>Georeferencing</strong> выберите команду <strong>Transformation</strong>. По умолчанию выбрано аффинное преобразование.</p>
<blockquote>
<p>Какие еще виды трансформирования доступны? Чем проективное преобразование отличается от аффинного?</p>
</blockquote>
<p>Оставьте выбранным аффинное преобразование.</p></li>
<li><p>Осуществите трансформирование растра. На панели инструментов <strong>Georeferencing</strong> выберите команду меню <strong>Georeferencing &gt; Update Georeferencing</strong>. Контрольные точки удалятся.</p>
<p>Картографическое изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex05/image12.png" />
</figure>
<p><kbd><strong>Снимок экрана №2</strong> — <em>Привязанная растровая карта</em></kbd></p></li>
<li><p>Сохраните документ карты в формате mxd в папке отчета.</p></li>
</ol>
<h2 id="создание-слоя-гидрогеологического-районирования">Создание слоя гидрогеологического районирования</h2>
<ol type="1">
<li><p>Прочтите раздел <em>Создание классов пространственных объектов</em> в файле <em>Описание функций</em>.</p></li>
<li><p>Создайте новый класс пространственных объектов в базе геоданных <em>Don.gdb</em>. Для этого:</p>
<ul>
<li><p>На первом шаге назовите слой <em>Artesian</em>, выберите площадную модель пространственных объектов (<em>Polygon features</em>).</p></li>
<li><p>На втором шаге выберите систему координат. Оптимально использовать ту же систему, что используется в базовых данных. Для этого ее можно импортировать у существующего слоя. Нажмите <strong>Add Coordinate Systems &gt; Import</strong>, найдите и укажите любой слой в базе данных <em>Don.gdb</em>.</p></li>
<li><p>На 3-м и 4-м шагах оставьте все параметры по умолчанию.</p></li>
<li><p>На 5-м шаге добавьте в первую пустую строку новое поле <em>Basin</em>. Тип поля — <em>Text</em>. В этом поле вы будете хранить название гидрогеологического бассейна.</p></li>
<li><p>Нажмите <strong>Finish</strong>.</p></li>
</ul></li>
<li><p>Добавьте получившийся слой на карту и разместите его вверху таблицы содержания.</p></li>
<li><p>Отключите слои рек и озер.</p></li>
<li><p>Прочтите раздел <em>Редактирование</em> в файле <em>Описание функций</em>, особенно уделив внимание разделам <em>Создание объектов</em> и <em>Цифрование в режиме автозавершения (auto-complete)</em>.</p></li>
<li><p>Включите режим редактирования слоя. Для этого в его контекстном меню выберите команду <strong>Edit Features &gt; Start Editing</strong>.</p></li>
<li><p>Откройте список шаблонов слоя и посмотрите доступные опции редактирования в нижней части окна.</p></li>
<li><p>Оцифруйте все бассейны. Выполняйте работу в следующей последовательности.</p>
<ul>
<li><p>Сначала оцифруйте Донецко-Донской бассейн (IV) с помощью обычного инструмента <strong>Polygon</strong>.</p></li>
<li><p>Далее последовательно пристыкуйте к нему оставшиеся бассейны с помощью инструмента <strong>Auto Complete Polygon</strong>. Замкните их по границе листа.</p></li>
</ul></li>
<li><p>После того как редактирование районов завершено, сохраните изменения, выбрав команду <strong>Editor — Save Edits</strong>.</p></li>
<li><p>Откройте таблицу атрибутов слоя районов. Поочередно выделяя каждый из них (для этого щелкните в самом начале строки), введите в поле <em>Basin</em> его название, ориентируясь по карте. Слово «бассейн» не вводите:</p>
<figure>
<img src="../images/Ex05/image13.png" />
</figure></li>
<li><p>После ввода названий снова сохраните изменения.</p></li>
<li><p>Завершите редактирование, выбрав команду <strong>Editor &gt; Stop Editing</strong>.</p></li>
<li><p>Измените оформление слоя в соответствии с цветами на исходном растре.</p></li>
<li><p>Включите подписи районов по полю <em>Basin</em>.</p></li>
<li><p>Отключите слой растровой карты. Включите снова слои рек и озер и переместите их вверх таблицы содержания. Картографическое изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex05/image14.png" />
</figure></li>
<li><p>Сохраните документ карты в папке отчета.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №3</strong> — <em>Слой артезианских бассейнов</em></kbd></p>
<h2 id="пространственный-запрос">Пространственный запрос</h2>
<p>Для получения информации о взаимном положении объектов или поиске объектов, основанном на их местоположении, вы можете использовать три метода:</p>
<ul>
<li>Вычисление расстояний</li>
<li>Пространственный запрос</li>
<li>Оверлей</li>
</ul>
<p>Вычисление расстояний позволяет оценить попарные расстояния между объектами, найти для каждого объекта ближайший к нему. Пространственный запрос осуществляет выборку объектов, находящихся в указанных топологических отношениях с другими объектами. Например, вы можете сказать «<em>выбрать реки, находящиеся целиком внутри (completely within) Московского артезианского бассейна</em>» или смягчить запрос, указав «<em>выбрать реки, пересекающие (intersect) Московский артезианский бассейн</em>». Частным случаем пространственного запроса также является поиск объектов по координатам, диапазону координат или произвольно заданной области. В этом случае пользователь чаще всего обводит на карте прямоугольником интересующую его зону, при этом выбираются объекты, пересекающие или находящиеся целиком внутри выделенной зоны.</p>
<p>Рассмотрим, как можно выберать реки, принадлежащие Приволжско-Хоперскому бассейну.</p>
<ol type="1">
<li><p>Выделите на карте Приволжско-Хоперский бассейн, используя инструмент <img src="../images/Ex05/image15.png" /> на панели <strong>Tools</strong>.</p></li>
<li><p>Откройте диалог пространственной выборки (меню <strong>Selection &gt; Select by Location</strong>)</p></li>
<li><p>Выберите в диалоге пространственной выборки слой <em>Rivers</em> в качестве выбираемого (<strong>target</strong>) и слой <em>Artesian</em> в качестве выбирающего (<strong>source</strong>). Отметьте галочкой пункт <strong>Use Selected Features</strong> — это позволит выбирать с использованием уже выбранных объектов.</p></li>
<li><p>Выберите метод выборки «<em>intersect the source layer feature</em>» —пересечение.</p></li>
<li><p>Нажмите <strong>Apply</strong>. Будут выбраны реки, пересекающие выбранный артезианский бассейн:</p>
<figure>
<img src="../images/Ex05/image16.png" />
</figure>
<p><kbd><strong>Снимок экрана №4</strong> — <em>Пространственный запрос методом пересечения</em></kbd></p></li>
<li><p>Выберите метод выборки «<em>are completely within the source layer feature</em>» (полностью внутри).</p></li>
<li><p>Нажмите <strong>Apply</strong>. Будут выбраны реки, находящиеся полностью внутри выбранного бассейна:</p>
<figure>
<img src="../images/Ex05/image17.png" />
</figure>
<p><kbd><strong>Снимок экрана №5</strong> — <em>Пространственный запрос методом «внутри»</em></kbd></p></li>
<li><p>Очистите выборку с помощью инструмента <strong>Clear Selected Features</strong>:</p></li>
</ol>
<figure>
<img src="../images/Ex05/image18.png" />
</figure>
<h2 id="оверлей">Оверлей</h2>
<p><strong>Оверлей</strong> (от англ. <em>overlay</em> — наложение), в отличие от пространственного запроса, создает новые данные путем геометрической композиции входных слоев. Полученные участки наследуют атрибуты от каждого слоя. Эта операция базируется на стандартных отношениях множеств, таких как пересечение, объединение и симметрическая разность. Оверлей позволяет понять, какие комбинации объектов встречаются в пространстве. Так, если в качестве аргументов служат реки и бассейны, то в результате выполнения оверлея реки будут разрезаны на участки в соответствии с границами бассейнов.</p>
<p>Для выполнения оверлея вы будете использовать инструменты <strong>геообработки</strong>.</p>
<blockquote>
<p><strong>Геообработка (geoprocessing)</strong> в терминологии ArcGIS — это анализ и преобразование пространственных данных. Инструменты геообработки находятся в Арктулбоксе (ArcToolbox), где они сгруппированы по назначению. Некоторые наборы инструментов, такие как Spatial Analyst и 3D Analyst, с которыми вы познакомитесь на следующих занятиях, являются дополнительными модулями ArcGIS.</p>
</blockquote>
<p>С помощью оверлея можно разбить речную сеть на сегменты, принадлежащие разным бассейнам, а полученным сегментам автоматически присвоить название бассейна.</p>
<ol type="1">
<li><p>Щелкните по базе данных <em>Don.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong>. Эта команда указывает системе, что все результаты обработки данных (новые слои) следует помещать в выбранную базу геоданных.</p></li>
<li><p>Откройте <strong>ArcToolbox</strong> с помощью кнопки <img src="../images/Ex05/image19.png" /> на главной панели инструментов.</p></li>
<li><p>Раскройте группу инструментов <strong>Analysis Tools &gt; Overlay</strong>. Здесь можно найти различные режимы оверлея.</p></li>
<li><p>Запустите инструмент <strong>Identity</strong>, который находит геометрическое пересечение двух слоев и присваивает атрибуты второго слоя участкам первого слоя.</p></li>
<li><p>Заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Input features</td>
<td style="text-align: left;"><code>Rivers</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Identity Features</td>
<td style="text-align: left;"><code>Artesian</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Output Feature Class</td>
<td style="text-align: left;"><code>&lt;Ваша папка&gt;\Ex02\Don.gdb\Rivers_Identity</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">JoinAttributes</td>
<td style="text-align: left;"><code>ALL</code></td>
</tr>
</tbody>
</table>
<p>Диалог инструмента примет следующий вид:</p>
<figure>
<img src="../images/Ex05/image20.png" />
</figure></li>
</ol>
<p>После выполнения инструмента слой будет добавлен на карту. Раскройте его таблицу атрибутов, чтобы убедиться, что каждому участку реки присвоена принадлежность к артезианскому бассейну (часть строк будет пустой, так как созданный вами слой артезианских бассейнов покрывает не всю территорию):</p>
<figure>
<img src="../images/Ex05/image21.png" />
</figure>
<h3 id="атрибутивный-запрос">Атрибутивный запрос</h3>
<p>Атрибутивный запрос позволяет искать объекты по значениям их атрибутов. В результате выполнения оверлея вы можете найти участки рек, принадлежащие артезианским бассейнам, по информации, содержащейся в поле <em>Basin</em>.</p>
<ol type="1">
<li><p>Откройте диалог атрибутивной выборки (меню <strong>Selection &gt; Select by Attributes</strong>).</p></li>
<li><p>Выберите в качестве выбираемого слой <em>Rivers_Identity</em>.</p></li>
<li><p>Введите следующий текст запроса:</p>
<p><code>&quot;Basin&quot; = 'Приволжско-Хоперский'</code></p></li>
<li><p>На карте будут выделены водотоки, принадлежащие данному артезианскому бассейну. Обратите внимание на то, что выборка теперь полностью совпадает с границами бассейна.</p></li>
<li><p>Откройте таблицу атрибутов слоя <em>Rivers_Identity</em> и укажите опцию <strong>Show Selected records</strong>, чтобы показывать только выбранные объекты:</p>
<figure>
<img src="../images/Ex05/image22.png" />
</figure></li>
<li><p>Скомпонуйте окна приложения таким образом, чтобы было видно одновременно окно атрибутивного запроса, таблицу атрибутов слоя со столбцом <em>Basin</em>, а также картографическое изображение с выделенными реками. Окно приложения примет следующий вид:</p>
<figure>
<img src="../images/Ex05/image23.png" />
</figure></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №6</strong> — <em>Атрибутивный запрос</em></kbd></p>
<h2 id="оформление-карты">Оформление карты</h2>
<ol type="1">
<li><p>Отключите слой <em>Rivers_Identity</em> и завершите оформление карты, добавив на нее слои <em>Boundaries</em> (границы) и <em>Cities</em> (города). Используйте для их отображения способ <strong>Категорий</strong> и настройте отображение разными символами классов границ, а также городов в соответствии с численностью населения. При оформлении подписей городов используйте метод <em>Классифицированных подписей</em> (прочтите соответствующий раздел в файле <em>Описание функций</em>). Пример результирующего изображения:</p>
<figure>
<img src="../images/Ex05/image24.png" />
</figure>
<p><kbd><strong>Снимок экрана №7</strong> — Карта</kbd></p></li>
<li><p>Переключитесь в режим компоновки и оформите легенду карты. Добавьте название «<em>Гидрогеологическое районирование среднего течения Дона</em>», а также масштаб и свои ФИО.</p></li>
<li><p>Экспортируйте результирующую карту в файл с расширением <code>png</code> и вставьте его в отчет.</p></li>
</ol>
<h2 id="ответы-на-вопросы-1">Ответы на вопросы</h2>
<p>Заполните отчетный файл и положите его в сетевую папку для проверки преподавателем.</p>
<h1 id="создание-тематической-базы-геоданных-административного-деления-города">Создание тематической базы геоданных административного деления города</h1>
<h2 id="введение-5">Введение</h2>
<p><strong>Цель задания</strong> — знакомство с привязкой, трансформированием и цифрованием геоизображений, элементами базовых технологий ГИС (оверлей, пространственные запросы).</p>
<table style="width:11%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Поток</td>
<td>Экономический</td>
</tr>
<tr class="even">
<td>Теоретическая подготовка</td>
<td>Системы координат и проекции на картах, привязка геоизображений, трансформирование геоизображений, цифрование геоизображений. Методы трансформации: аффинное, проективное, полиномиальное, метод резинового листа (сплайны). Пространственные запросы, атрибутивные запросы, оверлей.</td>
</tr>
<tr class="odd">
<td>Практическая подготовка</td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Работа с базой геоданных. Настройка символики и подписей объектов.</td>
</tr>
<tr class="even">
<td>Исходные данные</td>
<td>Cлои картографической основы OpenStreetMap, растровая карта районов Лондона.</td>
</tr>
<tr class="odd">
<td>Результат</td>
<td>База данных со слоем границ районов Лондона. Результаты выборки и статистика по количеству отелей в пределах каждого района. Картодиаграммы по числу отелей в каждом районе. Проект карты с оформленной компоновкой</td>
</tr>
<tr class="even">
<td>Ключевые слова</td>
<td>Системы координат, проекции, трансформирование координат, пространственная привязка, цифрование, оверлей, пространственные запросы, атрибутивные запросы, библиотеки символов, картодиаграммы</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-4">Контрольный лист:</h3>
<ul>
<li>Привязать растровую карту к опорным данным</li>
<li>Дополнить класс районов путем цифрования растровой карты</li>
<li>Заполнить названия новых районов</li>
<li>Определить путем пространственного запроса количество отелей в каждом районе.</li>
<li>Построить картодиаграммы по полученным значениям с использованием нестандартных библиотек символов</li>
<li>Подготовить проект карты с компоновкой</li>
</ul>
<h3 id="аннотация-4">Аннотация</h3>
<p>Задание посвящено знакомству с привязкой растровых карт, созданием и наполнением баз пространственных данных путем цифрования, оформлением карт на основе баз данных. В этом задании вы также познакомитесь с запросами, с помощью которых можно ограничивать число отображаемых объектов.</p>
<p>В задании предлагается выполнить координатную привязку карты районов Лондона и оцифровать недостающие районы для создания персональной БГД «Административные районы Лондона». Далее, используя запросы к БГД, по каждому району определить количество входящих в него отелей, и построить социально-экономическую карту, которая показывает способом картодиаграмм количество отелей в каждом районе. Работа завершается оформлением компоновки карты.</p>
<h2 id="добавление-референцных-данных">Добавление референцных данных</h2>
<p><a href="#создание-тематической-базы-геоданных-административного-деления-города">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Скопируйте каталог <em>Ex2</em> в свою папку и разархивируйте внутри него файл <em>London.zip</em> — он содержит базу геоданных для выполнения упражнения.</p></li>
<li><p>Подключитесь в окне Каталога к вашей папке <em>Ex2</em>. Убедитесь, что в ней находится база геоданных <em>London.gdb</em> и растровый файл <em>InnerLondon.png</em>:</p>
<figure>
<img src="../images/Ex06/image6.png" />
</figure></li>
<li><p>Раскройте базу геоданных и перенесите на карту класс пространственных объектов <em>Roads</em>, присвойте ему символ в виде черной линии толщиной 0,5 пункта.</p></li>
<li><p>Добавьте на карту также слой <em>Water</em> и присвойте ему символ <em>Lake</em> (голубой полигон с синей обводкой). Картографическое изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex06/image7.png" />
</figure>
<p><kbd><strong>Снимок экрана №1</strong>. Картографическая основа</kbd></p></li>
<li><p>Сохраните документ карты в <em>свою</em> папку <em>Ex2</em> под именем <em>London.mxd</em>.</p></li>
</ol>
<h2 id="привязка-карты-1">Привязка карты</h2>
<p><a href="#создание-тематической-базы-геоданных-административного-деления-города">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Внимательно прочтите раздел <strong><em>Привязка растровых данных (Georeferencing)</em></strong> в файле <strong><em>Описание функций</em></strong>.</p></li>
<li><p>Добавьте на карту из окна каталога слой <em>InnerLondon.png</em> и поместите его под слои Water и Roads. При добавлении слоя появится диалоговое окно, предупреждающее о том, что файл не имеет привязки. Закройте его.</p></li>
<li><p>Расположите карту в центре окна <strong>ArcMap</strong>.</p></li>
<li><p>Откройте панель инструментов <strong>Georeferencing</strong>. Выберите в ее меню команду <strong>Fit to Display</strong>, чтобы переместить непривязанный растр на середину области отображения.</p></li>
<li><p>Используя инструмент расстановки контрольных точек на панели <strong>Georeferencing</strong>, укажите по крайней мере 3 контрольные точки в разных частях города:</p>
<figure>
<img src="../images/Ex06/image8.png" />
</figure>
<p>Щелкайте сначала на растре, затем на векторном слое. В качестве точек используйте перекрестки дорог, которые вы можете найти как на растре, так и на картографической основе. Например, и на растре и на основе хорошо распознается перекресток на западной окраине <em>Хемпстеда</em>:</p>
<figure>
<img src="../images/Ex06/image9.png" />
</figure>
<p>Желательно, чтобы точки были равномерно распределены по полю карты (по краям и в центре) и не располагались на одной линии — это обеспечит хорошие коэффициенты трансформации.</p></li>
<li><p>Ознакомьтесь с доступными методами трансформирования по контрольным точкам. Для этого в меню на панели <strong>Georeferencing</strong> выберите команду <strong>Transformation</strong>. По умолчанию выбрано аффинное преобразование. При пяти контрольных точках будет доступно также проективное преобразование. Оставьте выбранным аффинное преобразование:</p>
<figure>
<img src="../images/Ex06/image10.png" />
</figure></li>
<li><p>Осуществите трансформирование растра. Для этого на панели инструментов <strong>Georeferencing</strong> выберите команду меню <strong>Georeferencing &gt; Update Georeferencing</strong>. После выполнения трансформирования контрольные точки удалятся.</p>
<p>Картографическое изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex06/image11.png" />
</figure>
<p><kbd><strong>Снимок экрана №2</strong> Привязанный растровый слой</kbd></p></li>
<li><p>Сохраните документ карты в папке отчета.</p></li>
</ol>
<h2 id="создание-слоя-городских-районов">Создание слоя городских районов</h2>
<p><a href="#создание-тематической-базы-геоданных-административного-деления-города">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Отключите слой дорог и слой гидрографии, оставив видимой только подложку.</p></li>
<li><p>Добавьте на карту класс пространственных объектов <em>Districts</em>. Он содержит районы северного берега Темзы. Вам необходимо его дополнить, оцифровав районы южного берега реки:</p>
<figure>
<img src="../images/Ex06/image12.png" />
</figure></li>
<li><p>Прочтите раздел <strong><em>Редактирование</em></strong> в файле <strong><em>Описание функций</em></strong>, особенно уделив внимание разделам <strong><em>Создание объектов</em></strong> и <strong><em>Цифрование в режиме автозавершения (auto-complete)</em></strong>.</p></li>
<li><p>Включите режим редактирования слоя <em>Districts</em>. Для этого в его контекстном меню выберите команду <strong>Edit Features &gt; Start Editing</strong>.</p></li>
<li><p>Откройте список шаблонов слоя, нажав кнопку <em>Create Features</em> на панели <em>Editor</em> и посмотрите доступные опции.</p></li>
<li><p>Оцифруйте недостающие городские районы. Выполняйте работу в следующей последовательности:</p>
<ul>
<li><p>Сначала оцифруйте район <em>Wandsworth</em> с помощью обычного инструмента <strong>Polygon</strong>.</p></li>
<li><p>Далее последовательно пристыкуйте к нему оставшиеся районы южного берега с помощью инструмента <strong>Auto-Complete Polygon</strong>.</p></li>
<li><p>Участки, примыкающих к реке, аккуратно проведите по береговой линии аналогично районам северного берега.</p></li>
</ul></li>
<li><p>После того как редактирование районов завершено, сохраните изменения, выбрав команду <strong>Editor &gt; Save Edits</strong>.</p></li>
<li><p>Откройте таблицу атрибутов слоя районов (<kbd>Ctrl</kbd> + двойной щелчок мышью по названии слоя). Поочередно выделяя каждый из новых районов, введите в поле <em>Name</em> его название, ориентируясь по карте.</p></li>
<li><p>После ввода названий снова сохраните изменения.</p></li>
<li><p>Завершите редактирование, выбрав команду <strong>Editor &gt; Stop Editing</strong>.</p></li>
<li><p>Измените оформление слоя следующим образом: сделайте пустую заливку, а обводку сделайте оранжевого цвета толщиной 1,5 пункта.</p></li>
<li><p>Включите подписи районов по полю <em>Name</em>.</p></li>
<li><p>Отключите слой растровой карты.</p></li>
<li><p>Включите слой дорог и установите ему прозрачность, равную <em>60%</em>.</p>
<p>Картографическое изображение примет следующий вид:</p>
<figure>
<img src="/../images/Ex06/image13.png" />
</figure>
<p><kbd><strong>Снимок экрана №3</strong>. Оцифрованные городские районы с подписями</kbd></p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="расчет-статистики-по-районам">Расчет статистики по районам</h2>
<p><a href="#создание-тематической-базы-геоданных-административного-деления-города">К содержанию ⇡</a></p>
<p>В данной части работы предлагается определить количество отелей, которые попадают в пределы каждого района, затем построить картодиаграммы по полученным значениям. Для этого будет использован следующий алгоритм:</p>
<ul>
<li><p>Выбрать текущий район.</p></li>
<li><p>Выбрать здания, попадающие в его пределы (<em>пространственный запрос</em>).</p></li>
<li><p>Из полученной выборки оставить только здания, являющиеся отелями (<em>атрибутивный запрос</em>).</p></li>
<li><p>Записать число отобранных зданий в атрибут <em>Hotels</em> текущего района.</p></li>
</ul>
<p>Эти операции необходимо повторить для каждого района.</p>
<p>Перед выполнением анализа следует создать атрибутивное поле, в котором будет храниться число отелей. Для этого:</p>
<ol type="1">
<li><p>Остановите сеанс редактирования, если это не было сделано ранее (<strong>Editor &gt; Stop Editing</strong>).</p></li>
<li><p>Откройте таблицу атрибутов слоя.</p></li>
<li><p>Выберите команду меню <strong>Add Field…</strong> (если она не активна, это значит, что вы не остановили сеанс редактирования на панели <strong>Editor</strong>).</p>
<figure>
<img src="../images/Ex06/image14.png" />
</figure></li>
<li><p>Введите название поля <em>Hotels</em> и тип поля <strong>Short Integer</strong>. Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex06/image15.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. Поле будет добавлено в слой.</p></li>
<li><p>Добавьте на карту класс <em>building_points</em> из базы геоданных <em>London.gdb</em>. Разместите его под слоем <em>districts</em>. В данном слое каждая точка соответствует зданию.</p>
<p>Для удобства работы организуйте пространство следующим образом:</p></li>
<li><p>Откройте атрибутивные таблицы слоев <em>districts</em> и <em>buildings</em> и расположите их друг над другом в левой части окна:</p>
<figure>
<img src="../images/Ex06/image16.png" />
</figure></li>
<li><p>Включите редактирование слоя <em>districts</em> и выберите в его таблице первую строчку (нужно щелкнуть на заголовке слева от строки).</p></li>
<li><p>Откройте диалог пространственной выборки (<strong>Selection &gt; Select by Location</strong>) и диалог атрибутивной выборки (<strong>Selection &gt; Select by &gt; Attributes</strong>). Расположите их рядом.</p></li>
<li><p>Выберите в диалоге пространственной выборки слой <em>building_points</em> в качестве выбираемого (<strong>target</strong>) и слой <em>districts</em> в качестве выбирающего (<strong>source</strong>). Отметьте галочкой пункт <strong>Use Selected Features</strong> --- это позволит выбирать с использованием уже выбранного района. Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex06/image17.png" />
</figure></li>
<li><p>Нажмите кнопку <strong>Apply</strong> --- на карте должны выбраться здания, попавшие в пределы выбранного района. Не закрывайте диалог.</p></li>
<li><p>Перейдите в диалог атрибутивной выборки. В качестве выбираемого слоя укажите <em>building_points</em> и смените режим выборки на <strong>Select from current selection</strong>. В этом режиме будет осуществляться подвыборка среди уже выбранных объектов.</p></li>
<li><p>Введите следующий атрибутивный запрос, чтобы отобрать отели:</p>
<pre><code>&quot;type&quot; = &#39;hotel&#39;</code></pre>
<p>Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex06/image18.png" />
</figure></li>
<li><p>Нажмите <strong>Apply</strong>. <em>Не закрывайте диалог атрибутивной выборки</em>. На карте останутся выбранными только те здания текущего района, которые являются отелями. Чтобы ознакомиться с их списком, перейдите в атрибутивную таблицу слоя <em>building_points</em> и включите режим показа только выбранных объектов (<strong>Show selected records</strong>):</p>
<figure>
<img src="../images/Ex06/image19.png" />
</figure>
<p>Внизу таблицы вы можете увидеть число выбранных объектов (на рисунке их 8, у вас может получиться другое число, если выделен другой район).</p></li>
<li><p>Внесите указанное число в атрибутивную таблицу слоя <em>districts</em> для текущего выбранного района:</p>
<figure>
<img src="../images/Ex06/image20.png" />
</figure></li>
<li><p>Выберите следующий район в таблице слоя <em>districts</em> (на рисунке выше это будет район <em>Islington</em>).</p></li>
<li><p>Повторите шаги 5--10 для всех оставшихся районов. На всем протяжении выполнения этих операций у вас должны быть открыты таблицы обоих слоев, а также диалоговые окна атрибутивной и пространственной выборки.</p></li>
<li><p>Сохраните документ карты</p></li>
</ol>
<p>Законченная таблица должна содержать в поле <em>Hotels</em> число отелей для каждого района:</p>
<figure>
<img src="../images/Ex06/image21.png" />
</figure>
<p><kbd><strong>Снимок экрана №4</strong>. Атрибутивная таблица с числом отелей по каждому району</kbd></p>
<h2 id="построение-картодиаграмм">Построение картодиаграмм</h2>
<p><a href="#создание-тематической-базы-геоданных-административного-деления-города">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Отключите слой <em>building_points</em>.</p></li>
<li><p>Создайте точки для размещения картодиаграмм числа отелей. Для этого</p>
<ul>
<li><p>Щелкните правой кнопкой мыши по базе данных <em>London.gdb</em> и выберите пункт <strong>Make Default Geodatabase</strong>, чтобы результаты обработки складывались в эту базу.</p></li>
<li><p>Откройте <strong>ArcToolbox</strong> и запустите инструмент геообработки <strong>Data Management Tools &gt; Features &gt; Feature to Point</strong>.</p></li>
<li><p>Укажите в качестве <strong>Input Features</strong> слой <em>Districts</em>. Исправьте название выходного класса на <em>Hotels</em>. Диалог примет следующий вид:</p></li>
</ul>
<figure>
<img src="../images/Ex06/image22.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. Созданный слой точек будет добавлен на карту.</p></li>
<li><p>Создайте картодиаграммы на основе полученных точек. Для этого:</p>
<ul>
<li><p>Включите режим <strong>Graduated Symbols</strong> на вкладке <strong>Symbology</strong>.</p></li>
<li><p>Выберите поле <em>Hotels</em> в качестве поля по которому будет производиться классификация.</p></li>
<li><p>Аналогично первому упражнению, отредактируйте границы классов. Предлагается выделить следующие классы: менее <em>5, 5-9, 10-19, 20-29, 30</em> и более. Для этого необходимо нажать кнопку <strong>Classify</strong> и заменить границы первых четырех классов на <em>4, 9, 19, 29</em>. Максимальное значение не трогайте. Нажмите <strong>ОК</strong>.</p></li>
<li><p>Измените шаблон картодиаграммы на значок отеля. Для этого сначала прочтите разделы Подключение библиотек символов и поиск символов по названию в файле <strong><em>Описание функций</em></strong>. Нажмите кнопку <strong>Template</strong> на вкладке <strong>Symbology</strong>. Далее подключите библиотеку <em>Civic</em> и найдите в ней символ <em>Hotel Information 1.</em> Выберите его и нажмите <strong>ОК</strong>.</p></li>
<li><p>Отредактируйте подписи классов, изменив первый на «<em>less than 5</em>», а последний — на «<em>30 and more</em>».</p></li>
<li><p>Измените максимальный и минимальный размер значка на <em>48</em> и <em>16</em> соответственно. Диалог настройки символов примет следующий вид:</p></li>
</ul>
<figure>
<img src="../images/Ex06/image23.png" />
</figure></li>
<li><p>Нажмите ОК.</p></li>
<li><p>Сохраните документ карты</p></li>
</ol>
<h2 id="настройка-оформления-других-слоев">Настройка оформления других слоев</h2>
<p><a href="#создание-тематической-базы-геоданных-административного-деления-города">К содержанию ⇡</a></p>
<p>Требуется отредактировать оформление слоев, чтобы получить картографическое изображение хорошего стиля и качества.</p>
<ol type="1">
<li><p>Расположите слои в следующем порядке сверху вниз: <em>Hotels — Roads — Water — Districts — InnerLondon</em>.</p></li>
<li><p>В настройках слоя <em>Districts</em>:</p>
<ul>
<li><p>Измените цвет заливки на серый <em>10%</em>.</p></li>
<li><p>Измените символ обводки на <em>Boundary, County</em>. Увеличьте его толщину до <em>6</em> пунктов, а цвет установите серый <em>20%</em>.</p></li>
<li><p>Замените стандартный шрифт подписей на более современный <em>Euphemia</em>, установите размер <em>8</em> и <strong>жирное</strong> начертание. Включите гало подписей, чтобы они хорошо читались на фоне.</p></li>
</ul></li>
<li><p>Для слоя <em>Water</em> отключите обводку, оставив только голубую заливку.</p></li>
<li><p>Необходимо запретить подписям районов перекрывать значки картодиаграмм. Для этого откройте панель <strong>Labeling</strong>, откройте на ней меню <strong>Labeling</strong> и убедитесь, что включен механизм размещения подписей <strong>Maplex</strong>. Далее нажмите кнопку <strong>Label Weight Ranking</strong>:</p>
<figure>
<img src="../images/Ex06/image24.png" />
</figure>
<p>В открывшемся диалоге исправьте значение <strong>Feature Weight</strong> для слоя <em>Hotels</em> на <em>1000</em>.</p>
<figure>
<img src="../images/Ex06/image25.png" />
</figure>
<blockquote>
<p>Любому слою может быть присвоен вес от <em>0</em> до <em>1000</em>. Чем выше вес, тем меньше вероятность, что слой будет перекрываться подписями.</p>
</blockquote>
<p>Нажмите <strong>ОК</strong>. Картографическое изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex06/image26.png" />
</figure>
<p><kbd><strong>Снимок экрана №5.</strong> Картодиаграммы числа отелей по городским районам</kbd></p></li>
<li><p>Сохраните документ карты</p></li>
</ol>
<h2 id="компоновка">Компоновка</h2>
<p><a href="#создание-тематической-базы-геоданных-административного-деления-города">К содержанию ⇡</a></p>
<p>Оформите компоновку карты с легендой в соответствии со следующим образцом.</p>
<figure>
<img src="../images/Ex06/image27.png" />
</figure>
<p>Для этого:</p>
<ol type="1">
<li><p>Установите масшта равным <em>1:100 000</em>.</p></li>
<li><p>Для заголовка карты используйте также шрифт <em>Euphemia</em> синего цвета.</p></li>
<li><p>Под заголовок подложите прямоугольник серого цвета <em>30%</em>.</p></li>
<li><p>Добавьте масштабную линейку в милях синего цвета.</p></li>
<li><p>Добавьте легенду к слою <em>Hotels</em>, отключите в ней названия самого слоя и единиц измерения, чтобы остались только плашки и их подписи.</p></li>
<li><p>Добавьте к фрейму данных рамку серого цвета <em>30%</em>. Для этого в свойствах фрейма данных на вкладке <em>Frame</em> выберите границу <em>Border</em> и измените ее параметры. Выровняйте прямоугольник названия по верхнему правому углу карты.</p></li>
</ol>
<p>По завершению оформления <strong>Экспортируйте карту</strong> в файл формата <code>PNG</code> в вашей директории <em>Ex2</em> с разрешением <em>150</em> точек на дюйм, чтобы вставить ее в отчет.</p>
<h2 id="ответы-на-вопросы-2">Ответы на вопросы</h2>
<p><a href="#создание-тематической-базы-геоданных-административного-деления-города">К содержанию ⇡</a></p>
<p>Заполните отчетный файл и положите его в сетевую папку для проверки преподавателем.</p>
<h1 id="привязка-и-цифрование-туристской-карты">Привязка и цифрование туристской карты</h1>
<h2 id="введение-6">Введение</h2>
<p><strong>Цель задания</strong> --- знакомство с привязкой, трансформированием и цифрованием геоизображений.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td><kbd>Общий</kbd></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Системы координат и проекции на картах, привязка геоизображений, трансформирование геоизображений, цифрование геоизображений. Методы трансформации: аффинное, проективное, полиномиальное, метод резинового листа (сплайны).</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Работа с базой геоданных. Настройка символики и подписей объектов.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>Растровые карты для привязки, база пространственных данных на территорию Швейцарии.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>База данных со следующими слоями: границы природных зон; линии туристического маршрута; остановки вдоль маршрута; проект карты карта с компоновкой</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Системы координат, проекции, трансформирование координат, пространственная привязка, цифрование, классы пространственных объектов, база пространственных данных,</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-5">Контрольный лист</h3>
<ul>
<li>[x] Привязать растровые карты к опорным данным</li>
<li>[x] Создать базу геоданных и классы пространственных объектов</li>
<li>[x] Наполнить классы пространственных объектов путем цифрования привязанных карт</li>
<li>[x] Наполнить атрибуты объектов значениями</li>
<li>[x] Разработать символику и подписи для слоев карты</li>
<li>[x] Подготовить компоновку карты</li>
<li>[x] Экспортировать карту в графический файл</li>
</ul>
<h3 id="аннотация-5">Аннотация</h3>
<p>Задание посвящено знакомству с привязкой растровых карт, созданием и наполнением баз пространственных данных путем цифрования, оформлением карт на их основе.</p>
<p>В задании предлагается привязать в координатную систему карту природных зон и карту туристического маршрута по территории Швейцарии. По результатам цифрования этих карт вы составите туристскую карту, показывающую прохождение маршрута по разным природным зонам.</p>
<h2 id="привязка-карт">Привязка карт</h2>
<p><a href="#привязка-и-цифрование-туристской-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Добавьте на карту слой <em>Countries</em> из базы данных упражнения 3.</p></li>
<li><p>Добавьте на карту растр <em>SwissRegions.gif</em>. Появится диалог, предупреждающий вас, что добавляемый файл не имеет пространственной привязки. Нажмите <strong>ОК</strong>:</p>
<figure>
<img src="../images/Ex07/image8.png" />
</figure></li>
<li><p>Убедитесь, что контур страны отображается примерно посередине экрана.</p></li>
<li><p>Откройте панель инструментов <strong>Georeferencing</strong>. Выберите в меню команду <strong>Fit to Display</strong>, чтобы переместить непривязанный растр на середину области отображения:</p>
<figure>
<img src="../images/Ex07/image9.png" />
</figure></li>
<li><p>Сделайте растровый слой прозрачным на <em>50%</em>.</p></li>
<li><p>Используя <strong>инструмент расстановки контрольных точек</strong>, укажите <em>3-6</em> соответствующих точек по границе страны на характерных выступах контура:</p>
<figure>
<img src="../images/Ex07/image10.png" />
</figure></li>
<li><p>Выберите команду меню <strong>Georeferencing &gt; Update Georeferencing</strong>, чтобы завершить привязку растра. При этом по умолчанию будет примененоаффинное преобразование с минимизацией среднеквадратической ошибки отклонения исходных и целевых координат:</p>
<figure>
<img src="../images/Ex07/image11.png" />
</figure></li>
<li><p>Добавьте на карту слой <em>WineSafariRoute.jpg</em>.</p></li>
<li><p>Выберите его в списке на панели <strong>Georeferencing</strong>:</p>
<figure>
<img src="../images/Ex07/image12.png" />
</figure></li>
<li><p>Отключите слой <em>SwissRegions.gif</em> в таблице содержания.</p></li>
<li><p>Привяжите растр <em>WineSafariRoute</em> аналогично предыдущему растру, используя контрольные точки:</p>
<figure>
<img src="../images/Ex07/image13.png" />
</figure></li>
</ol>
<p>1.Выберите команду <strong>Georeferencing &gt; Update georeferencing</strong>, чтобы завершить привязку второго растра.</p>
<h2 id="создание-базы-данных-и-классов-пространственных-объектов">Создание базы данных и классов пространственных объектов</h2>
<p><a href="#привязка-и-цифрование-туристской-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Создайте в папке <em>Ex5</em> базу геоданных под названием <em>RouteMap.gdb</em>.</p></li>
<li><p>Создайте в базе данных <em>классы пространственных объектов</em> со следующими параметрами:</p></li>
</ol>
<table>
<thead>
<tr class="header">
<th>Название</th>
<th style="text-align: left;">Модель пространственных объектов</th>
<th>Атрибутивные поля</th>
<th>Проекция</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Regions</em></td>
<td style="text-align: left;">Полигональная (polygon features)</td>
<td>NAME (text)</td>
<td><code>WGS_1984_UTM_Zone_32N</code> (импортируйте у слоя карты)</td>
</tr>
<tr class="even">
<td><em>Routes</em></td>
<td style="text-align: left;">Линейная (line features)</td>
<td>-</td>
<td><code>WGS_1984_UTM_Zone_32N</code> (импортируйте у слоя карты)</td>
</tr>
<tr class="odd">
<td><em>Places</em></td>
<td style="text-align: left;">Точечная (point features)</td>
<td>NAME (text)</td>
<td><code>WGS_1984_UTM_Zone_32N</code> (импортируйте у слоя карты)</td>
</tr>
</tbody>
</table>
<p>По завершению создания слоев они автоматически будут добавлены на карту:</p>
<figure>
<img src="../images/Ex07/image14.png" />
</figure>
<h2 id="цифрование-регионов">Цифрование регионов</h2>
<p><a href="#привязка-и-цифрование-туристской-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Оставьте включенными только слои <em>Regions</em>, <em>SwissRegions</em> и <em>Countries</em>.</p></li>
<li><p>Уберите <em>прозрачность</em> у слоя <em>SwissRegions</em>.</p></li>
<li><p>Откройте сеанс редактирования для слоя <em>Regions</em>. Появится панель редактирования <strong>Editor</strong>, а также окно шаблонов объектов <strong>Create Features</strong>:</p>
<figure>
<img src="../images/Ex07/image15.png" />
</figure></li>
<li><p>Щелкните на шаблоне объекта <em>Regions</em> в окне <strong>Create Features</strong> и выберите режим цифрования <strong>Polygon</strong>:</p>
<figure>
<img src="../images/Ex07/image16.png" />
</figure></li>
<li><p>Оцифруйте регион <em>Prealpine Zones</em> в центре карты. По завершению дважды щелкните мышкой:</p>
<figure>
<img src="../images/Ex07/image17.png" />
</figure></li>
<li><p>Чтобы появилась возможность пристыковать остальные регионы к границам стран, <strong>выделите</strong> в слое <em>Countries</em> все страны, кроме Швейцарии, <strong>скопируйте</strong> их в буфер обмена и <strong>вставьте</strong> в слой <em>Regions</em>:</p>
<figure>
<img src="../images/Ex07/image18.png" />
</figure></li>
<li><p>Выделите опять шаблон <em>Regions</em> в окне <strong>Create Features</strong>.</p></li>
<li><p>Используя режим <strong>Auto-Complete Polygon</strong>, оцифруйте границы оставшихся регионов в следующем порядке:</p>
<ul>
<li><p>Сначала небольшие регионы, примыкающие к границам:</p>
<figure>
<img src="../images/Ex07/image19.png" />
</figure></li>
<li><p>Затем область второго порядка (горы <em>Юра</em>):</p>
<figure>
<img src="../images/Ex07/image20.png" />
</figure></li>
<li><p>Наконец, границу между центральными регионами:</p>
<figure>
<img src="../images/Ex07/image21.png" />
</figure></li>
</ul></li>
<li><p>Выделите в слое <em>Regions</em> границы стран и удалите их.</p></li>
<li><p>Выберите команду <strong>Editor &gt; Save Edits</strong>, чтобы сохранить результаты редактирования.</p></li>
</ol>
<p><em>Результат</em>: <img src="../images/Ex07/image22.png" /></p>
<h2 id="атрибутирование-регионов">Атрибутирование регионов</h2>
<p><a href="#привязка-и-цифрование-туристской-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Уберите заливку регионов, линии сделайте толщиной 1.5-2 пиксела:</p>
<figure>
<img src="../images/Ex07/image23.png" />
</figure></li>
<li><p>Откройте атрибутивную таблицу слоя <em>Regions</em>.</p></li>
<li><p>Поочередно выделяя каждый объект в таблице или на карте, заполните его атрибуты в соответствии с легендой:</p>
<figure>
<img src="../images/Ex07/image24.png" />
</figure></li>
<li><p>Сохраните изменения и завершите сеанс редактирования.</p></li>
</ol>
<h2 id="цифрование-маршрутов-и-точек-интереса">Цифрование маршрутов и точек интереса</h2>
<p><a href="#привязка-и-цифрование-туристской-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Выключите слои <em>Regions</em> и <em>SwissRegions.gif</em>.</p></li>
<li><p>Включите слои <em>WinSafariRoute</em>, <em>Routes</em> и <em>Places</em>.</p></li>
<li><p>Оцифруйте объекты слоев <em>Places</em> и <em>Routes</em>, используя инструменты панели <strong>Сreate Features</strong>:</p>
<ul>
<li><p>Начните с расстановки точек:</p>
<figure>
<img src="../images/Ex07/image25.png" />
</figure></li>
<li><p>Увеличьте масштаб, чтобы были хорошо видны изгибы линий:</p>
<figure>
<img src="../images/Ex07/image26.png" />
</figure></li>
<li><p>Проведите линии через получившиеся точки, повторяя контур исходной линии на растровой подложке. Каждую линию начинайте в точке и завершайте двойным щелчком в перекрестке:</p>
<figure>
<img src="../images/Ex07/image27.png" />
</figure></li>
</ul>
<p><em>Результат</em>: <img src="../images/Ex07/image28.png" /></p></li>
<li><p>Заполните названия городов в слое <em>Places</em>.</p>
<figure>
<img src="../images/Ex07/image29.png" />
</figure></li>
<li><p>Сохраните изменения и завершите сеанс редактирования.</p></li>
</ol>
<h2 id="оформление-карты-1">Оформление карты</h2>
<p><a href="#привязка-и-цифрование-туристской-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Оставьте включенными слои <em>Regions</em>, <em>Routes</em>, <em>Places</em> и <em>Countries</em>. Остальные слои выключите.</p></li>
<li><p>Уберите заливку у слоя <em>Countries</em>.</p></li>
<li><p>Оформите слой <em>Regions</em> методом категорий по полю <em>NAME</em>:</p>
<figure>
<img src="../images/Ex07/image30.png" />
</figure></li>
<li><p>Оформите слои <em>Routes</em> и <em>Places</em> по аналогии с нижеприведенным фрагментом:</p>
<figure>
<img src="../images/Ex07/image31.png" />
</figure></li>
<li><p>Откройте панель <strong>Labeling</strong> и включите <strong>Maplex</strong> для размещения подписей.</p></li>
<li><p>Включите подписи для слоя <em>Places</em> со следующими настройками:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поле для подписей</em></td>
<td style="text-align: left;">NAME</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Шрифт</em></td>
<td style="text-align: left;">Tahoma</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Кегль (размер)</em></td>
<td style="text-align: left;">12</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Цвет</em></td>
<td style="text-align: left;">Черный</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Начертание</em></td>
<td style="text-align: left;">Обычное</td>
</tr>
</tbody>
</table>
<p><em>Результат</em>: <img src="../images/Ex07/image32.png" /></p></li>
</ol>
<p>Некоторые подписи могут быть размещены не очень удачно. Чтобы они не перекрывали линии маршрута и значки выполните следующие действия:</p>
<ol type="1">
<li><p>Откройте <em>настройки весов подписей</em> <strong>Label Weight Ranking</strong> на панели <strong>Labeling</strong></p></li>
<li><p>Установите вес равным <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?1000" alt="1000" title="1000" /> слоям <em>Places</em> и <em>Routes:</em></p>
<figure>
<img src="../images/Ex07/image33.png" />
</figure>
<p><em>Результат</em>: <img src="../images/Ex07/image34.png" /></p></li>
<li><p>Добавьте на карту слой <em>Hillshade</em> из базы данных упражнения 3, разместите его над слоем Regions и установите прозрачность <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?80%25" alt="80%" title="80%" />.</p>
<p><em>Результат</em>: <img src="../images/Ex07/image35.png" /></p></li>
<li><p>Добавьте на карту слой <em>Lakes</em> и присвойте ему символ полигона с голубой заливкой без обводки.</p>
<p><em>Результат</em>: <img src="../images/Ex07/image36.png" /></p></li>
</ol>
<h2 id="компоновка-карты-1">Компоновка карты</h2>
<p><a href="#привязка-и-цифрование-туристской-карты">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Переключитесь в <strong>режим компоновки</strong>.</p></li>
<li><p>Установите альбомную ориентировку листа.</p></li>
<li><p>Оформите компоновку в соответствии с нижеприведенным образцом:</p>
<figure>
<img src="../images/Ex07/image37.png" />
</figure></li>
<li><p>Экспортируйте карту в формат <kbd>PNG</kbd> с разрешением <img style="vertical-align:middle" src="https://latex.codecogs.com/png.latex?300~dpi" alt="300~dpi" title="300~dpi" />.</p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="контрольные-вопросы-3">Контрольные вопросы</h2>
<p><a href="#привязка-и-цифрование-туристской-карты">К содержанию ⇡</a></p>
<h1 id="картографирование-по-статистическим-данным">Картографирование по статистическим данным</h1>
<h2 id="введение-7">Введение</h2>
<p><strong>Цель задания</strong> --- научиться использовать статистические данные для построения социально-экономических карт методом картограмм и картодиаграмм.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td><kbd>Экономический</kbd></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Соединение таблиц в реляционных базах данных, внешний и внутренний ключ соединения, картограммы, картодиаграммы</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Работы с базой пространственных данных. Настройка символики и подписей объектов.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>Слои статистических единиц Евросоюза NUTS и таблицы показателей с портала NUTS</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>Карта количества транспортных средств в Швейцарии по единицам 3-го уровня, карта плотности и структуры населения Швейцарии по единицам 3-го уровня</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Статистические данные, картограммы, картодиаграммы, соединение таблиц, визуализация статистических данных.</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-6">Контрольный лист</h3>
<ul>
<li>[x] Скачать слои административно-территориального деления с сайта NUTS.</li>
<li>[x] Скачать статистические таблицы NUTS на уровень 3.</li>
<li>[x] Присоединить таблицы статистики к слою административных единиц.</li>
<li>[x] Создать карту количества автомобилей способом картодиаграмм.</li>
<li>[x] Создать карту населения способом картограмм и секторных картодиаграмм.</li>
</ul>
<h3 id="аннотация-6">Аннотация</h3>
<p>В основе многих социально-экономических карт лежат статистические данные, которые обычно предоставляются в табличном виде. Задание посвящено знакомству с созданием карт в среде ГИС на основе табличных данных. В качестве примера используется официальная статистика Евросоюза, размещенная на сайте NUTS. Попутно при выполнении задании вы познакомитесь с операцией соединения таблиц.</p>
<h2 id="скачивание-географических-данных-с-сайта-nuts">Скачивание географических данных с сайта NUTS</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Перейдите на <a href="http://epp.eurostat.ec.europa.eu/portal/page/portal/nuts_nomenclature/introduction">главную страницу <strong>NUTS</strong></a> и прочитайте краткую информацию на ней.</p></li>
<li><p>Выберите в правой части окна пункт меню <strong>NUTS Geodatafiles at GISCO</strong>.</p></li>
<li><p>Скачайте файлы <em>NUTS 2010</em> для масштаба <em>1:3 Million</em> в формате <em>Personal GDB</em> и сохраните их себе в каталог <em>Ex08</em>.</p></li>
</ol>
<figure>
<img src="../images/Ex08/image6.png" />
</figure>
<h2 id="скачивание-таблиц-с-сайта-nuts">Скачивание таблиц с сайта NUTS</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<ol type="1">
<li><p>На главной странице <strong>NUTS</strong> выберите в правой части окна пункт меню <strong>Statistics on regions and cities</strong>.</p></li>
<li><p>На сайте статистики <strong>NUTS</strong> выберите пункт <strong>Database</strong>, чтобы перейти к просмотру таблиц базы данных:</p>
<figure>
<img src="../images/Ex08/image7.png" />
</figure></li>
<li><p>Найдите таблицу плотности населения по регионам <em>Population density - NUTS 3 regions (demo_r_d3dens)</em> и нажмите иконку слева от нее:</p>
<figure>
<img src="../images/Ex08/image8.png" />
</figure></li>
<li><p>Нажмите <strong>Table Customization &gt; Show</strong>, чтобы настроить содержание таблицы:</p>
<figure>
<img src="../images/Ex08/image9.png" />
</figure></li>
<li><p>Установите режим <strong>Codes</strong>, чтобы в первом столбце отображались уникальные идентификаторы вместо названий единиц.</p></li>
<li><p>Нажмите кнопку <strong>Download</strong>, чтобы скачать таблицу:</p>
<figure>
<img src="../images/Ex08/image10.png" />
</figure></li>
<li><p>В появившемся окне нажмите кнопку <strong>Download in Excel format</strong>, не меняя никаких настроек.</p></li>
</ol>
<p>Скачайте аналогичным образом таблицу <em>Stock of vehicles by category and NUTS 2 regions (tran_r_vehst),</em> содержащую статистику по количеству зарегистрированных транспортных средств в регионах.</p>
<h2 id="скачивание-структурных-таблиц-с-сайта-nuts">Скачивание структурных таблиц с сайта NUTS</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Найдите таблицу <em>Population on 1 January by broad age groups and sex - NUTS 3 regions</em> и откройте ее.</p></li>
<li><p>Нажмите кнопку <strong>Select Data</strong> в заголовке сайта:</p>
<figure>
<img src="../images/Ex08/image11.png" />
</figure></li>
<li><p>В левой части окна выберите вкладку <em>AGE</em>, отметьте галочками все пункты и нажмите <em>UPDATE</em>, чтобы обновить таблицу:</p>
<figure>
<img src="../images/Ex08/image12.png" />
</figure></li>
<li><p>Нажмите вкладку <strong>VIEW Table</strong> в верхней части окна, чтобы перейти к просмотру таблицы.</p></li>
<li><p>Схватите мышкой показатель <em>Age</em> и переместите его в таблицу на место показателя <em>TIME</em>:</p>
<figure>
<img src="../images/Ex08/image13.png" />
</figure>
<p>В результате таблица должна приобрести искомую структуру, в которой показана структура населения по 3 категориям: до 15 лет (дети), 15-64 года (трудоспособные) и старше 64 лет (пенсионеры). Помимо этого есть поле Unknown для населения неустановленной возрастной категории:</p>
<figure>
<img src="../images/Ex08/image14.png" />
</figure></li>
<li><p>Включите режим показа кодов вместо названий единиц.</p></li>
<li><p>Скачайте таблицу в формате <em>Microsoft Excel</em>.</p></li>
</ol>
<h2 id="форматирование-таблиц-для-загрузки-в-гис">Форматирование таблиц для загрузки в ГИС</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<p>Чтобы скачанные таблицы можно было использовать в ГИС, их нужно отформатировать следующим образом:</p>
<ol type="1">
<li><p>Удалите все строки выше заголовка.</p></li>
<li><p>Переименуйте поле <em>GEO/TIME</em> в <em>GEO</em>.</p></li>
<li><p>Переименуйте поля таким образом, чтобы:</p>
<ul>
<li>Они не содержали пробелов, символов “ / “, “ - ” и тому подобных. Символ подчеркивания “_” допускается.</li>
<li>Название поля начиналось с буквы.</li>
</ul></li>
<li><p>Установите столбцам показателей числовой формат с необходимым числом десятичных знаков.</p></li>
<li><p>Сохраните таблицы под названиями:</p>
<ul>
<li><em>Density.xls</em> (плотность населения),</li>
<li><em>Population.xls</em> (структура населения),</li>
<li><em>Vehicles.xls</em> (число зарегистрированных транспортных средств).</li>
</ul></li>
</ol>
<p>Пример преобразования таблиц представлен на рисунках ниже.</p>
<p><em>Было</em>:</p>
<figure>
<img src="../images/Ex08/image15.png" />
</figure>
<p><em>Стало</em>:</p>
<figure>
<img src="../images/Ex08/image16.png" />
</figure>
<h2 id="подготовка-проекта">Подготовка проекта</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Откройте <strong>ArcMap</strong> и создайте новый документ карты в каталоге <em>Ex08</em>.</p></li>
<li><p>Добавьте на карту слой <em>Countries</em> из базы данных предудыщего упражнения.</p></li>
<li><p>Добавьте на карту слой <em>NUTS_RG_03M_2010</em> из базы данных, которую вы скачали с сайта. Она находится в каталоге PGDB/data:</p>
<figure>
<img src="../images/Ex08/image17.png" />
</figure></li>
<li><p>Присвойте добавленному слою символ полигона без заливки с обводкой красного цвета и переименуйте его в <em>NUTS</em>.</p></li>
<li><p><em>Выделите в таблице</em> слоя <em>NUTS</em> строку, в которой <code>NUTS\_ID = “CH”</code>, которая соответствует региону Швейцарии. Обратите внимание на то, что таблица может быть отсортирована не по алфавиту, а по статусу единицы:</p>
<figure>
<img src="../images/Ex08/image18.png" />
</figure></li>
<li><p>Выделите все регионы, находящиеся внутри выделенной единицы, используя <em>пространственный запрос</em> со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Слой искомых объектов</em></td>
<td style="text-align: left;">NUTS</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Слой-источник</em></td>
<td style="text-align: left;">NUTS</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Пространственный запрос</em></td>
<td style="text-align: left;">Are within the layer feature</td>
</tr>
</tbody>
</table>
<p><em>Результат</em>: <img src="../images/Ex08/image19.png" /></p></li>
<li><p><strong>Создайте новый слой на основе выбранных объектов</strong> он получит название «<em>NUTS selection</em>».</p></li>
<li><p><strong>Отключите</strong> исходный слой <em>NUTS</em>.</p></li>
</ol>
<h2 id="отображение-картодиаграмм-по-единицам-2-го-уровня">Отображение картодиаграмм по единицам 2-го уровня</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<ol type="1">
<li><p><strong>Скопируйте</strong> слой <em>NUTS selection</em>, <strong>вставьте</strong> и назовите его <em>Транспортные средства (NUTS 2)</em>.</p></li>
<li><p>С помощью <strong>определяющего запроса</strong> в окне конструктора запроса включите единицы 2-го уровня, введя строку:</p>
<p><code>\[STAT\_LEVL\_CODE\] = 2</code></p>
<p>При вводе строки используйте двойной щелчок на названии вместо ввода текста вручную.</p>
<p><em>Результат</em>: <img src="../images/Ex08/image20.png" /></p></li>
<li><p>Добавьте на карту лист <em>Data</em> таблицы <em>Vehicles</em> и переименуйте его в <em>Vehicles</em>:</p>
<figure>
<img src="../images/Ex08/image21.png" />
</figure></li>
<li><p><strong>Раскройте таблицу</strong> слоя <em>Транспортные средства</em>, чтобы просмотреть состав атрибутивных полей. Таблица содержит поле <em>NUTS_ID</em>, содержащее уникальные идентификаторы единиц NUTS.</p>
<figure>
<img src="../images/Ex08/image22.png" />
</figure></li>
<li><p><strong>Присоедините таблицу</strong> <em>VEHICLES</em> к слою <em>Транспортные средства</em>, используя следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Ключевое поле слоя</em></td>
<td style="text-align: left;">NUTS_ID</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Присоединяемая таблица</em></td>
<td style="text-align: left;">VEHICLES</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Ключевое поле таблицы</em></td>
<td style="text-align: left;">GEO</td>
</tr>
</tbody>
</table>
<p>Раскройте таблицу слоя <em>Транспортные средства (NUTS 2)</em>, чтобы убедиться в результате: <img src="../images/Ex08/image23.png" /></p></li>
<li><p>Включите для слоя <strong>способ градуированных символов</strong> (картодиаграммы), используя следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поле показателя</em></td>
<td style="text-align: left;">2011 год</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер значка</em></td>
<td style="text-align: left;">От 15 до 60</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Метод классификации</em></td>
<td style="text-align: left;">Равноинтервальный с шагом 200 (Defined Interval)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Фоновый символ</em></td>
<td style="text-align: left;">Без заливки</td>
</tr>
</tbody>
</table>
<p>Цвет диаграммы выберите по своему вкусу. Диалог примет следующий вид: <img src="../images/Ex08/image24.png" /></p></li>
<li><p>Переименуйте <strong>название показателя в таблице слоев</strong> в «тысяч штук».</p>
<p><em>Результат</em>: <img src="../images/Ex08/image25.png" /></p></li>
</ol>
<h2 id="отображение-картограмм-по-единицам-3-го-уровня">Отображение картограмм по единицам 3-го уровня</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Скопируйте слой <em>NUTS selection</em> и назовите его «<em>Плотность населения (NUTS 3)</em>».</p></li>
<li><p>Включите единицы 3-го уровня, по аналогии с единицами 2-го уровня.</p></li>
<li><p>Добавьте на карту лист <em>Data</em> таблицы <em>Density</em> и переименуйте его в <em>DENSITY</em>.</p></li>
<li><p>Присоедините таблицу <em>DENSITY</em> к слою <em>Плотность населения,</em> используя те же поля, что и в случае слоя транспорта.</p></li>
<li><p>Включите для слоя метод отображения <strong>Graduated Colors (картограммы)</strong>, используя следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поле статистики</em></td>
<td style="text-align: left;">2011 год</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Цветовая шкала</em></td>
<td style="text-align: left;">От желтого к коричневому (по умолчанию)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Метод классификации</em></td>
<td style="text-align: left;">Дженкса (естественных интервалов)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Количество интервалов</em></td>
<td style="text-align: left;">5</td>
</tr>
</tbody>
</table>
<p>Диалог свойств слоя примет следующий вид: <img src="../images/Ex08/image26.png" /></p></li>
<li><p>Переименуйте название показателя в таблице содержания в «чел/кв. км.».</p></li>
<li><p>Перенесите слой со статистикой транспорта так, чтобы он располагался поверх слоя плотности населения и увеличьте толщину обводки полигонов до 1.5 пиксела.</p></li>
</ol>
<p>Результат позволяет одновременно показывать статистику по двум уровням иерархии: <img src="../images/Ex08/image27.png" /></p>
<h2 id="отображение-структурных-картодиаграмм-по-единицам-3-го-уровня">Отображение структурных картодиаграмм по единицам 3-го уровня</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Скопируйте слой <em>NUTS selection</em> и назовите его «<em>Структура населения (NUTS 3)</em>».</p></li>
<li><p>Включите единицы 3-го уровня.</p></li>
<li><p>Добавьте на карту лист <em>Data</em> таблицы <em>Population</em> и переименуйте его в <em>POPULATION</em>.</p></li>
<li><p>Присоедините таблицу <em>POPULATION</em> к слою <em>Структура населения</em>.</p></li>
<li><p>Определите русскоязычные <strong>псевдонимы</strong> полям на вкладке <strong>Fields</strong>:</p>
<ul>
<li>Y_LT15 — моложе 15 лет,</li>
<li>Y_15_64 — от 15 до 64 лет,</li>
<li>Y_GE65 — старше 64 лет,</li>
<li>TOTAL — человек.</li>
</ul>
<p><em>Результат</em>:</p>
<figure>
<img src="../images/Ex08/image28.png" />
</figure></li>
<li><p>Включите для слоя метод отображения <strong>Pie Charts (секторные диаграммы)</strong>, используя следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поля статистики</em></td>
<td style="text-align: left;">моложе 15 лет, от 15 до 64 лет, старше 64 лет</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Цвета</em></td>
<td style="text-align: left;">Выберите на свой вкус</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Минимальный размер</em></td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Размер</em></td>
<td style="text-align: left;">По полю “Человек” (TOTAL)</td>
</tr>
</tbody>
</table>
<p>Диалог примет следующий вид: <img src="../images/Ex08/image29.png" /></p>
<p><em>Результат</em>: <img src="../images/Ex08/image30.png" /></p></li>
</ol>
<p>Структура населения в целом очень похожа по регионам, при этом незначительно варьируется численность населения пенсионного и нетрудоспособного населения.</p>
<h2 id="оформление-итоговых-карт">Оформление итоговых карт</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Добавьте на карту слой городов из базы данных задания 3.</p></li>
<li><p>С помощью <strong>определяющего запроса</strong> оставьте только те города, у которых значение поля <code>Pop\_Rank &lt;= 6</code>. Это города с населением 50 000 человек и более:</p>
<figure>
<img src="../images/Ex08/image31.png" />
</figure></li>
<li><p>Оформите слой городов аналогично заданию 3, разделив их на классы.</p></li>
<li><p>Включите <strong>подписи</strong> стран.</p></li>
<li><p>Перекрасьте страны в нейтрально-серый цвет.</p></li>
<li><p>Установите масштаб карты равным 1:2 000 000.</p></li>
<li><p>Переключитесь в режим компоновки и установите альбомную ориентировку.</p></li>
<li><p>Подгоните размер фрейма таким образом, чтобы он охватывал страну с небольшим запасом.</p>
<p><em>Результат</em>: <img src="../images/Ex08/image32.png" /></p>
<p>Пока что не обращайте внимания на то, что слои перекрывают друг друга. При экспорте вы будете оставлять включенным только один из них.</p></li>
<li><p>Добавьте на карту легенду, включив в нее слои <em>Транспортные средства</em>, <em>Структура населения</em> и <em>Плотность населения</em>.</p></li>
<li><p>Переведите элементы легенды на русский язык и сотрите заголовок легенды.</p></li>
<li><p>Вставьте заголовок карты «ШВЕЙЦАРИЯ» и масштабную линейку.</p></li>
</ol>
<h2 id="экспорт-карты-числа-транспортных-средств">Экспорт карты числа транспортных средств</h2>
<ol type="1">
<li><p>Отключите слои плотности населения и структуры населения. В легенде останется только слой с картодиаграммами.</p></li>
<li><p>Отредактируйте подписи классов таким образом, чтобы убрать у них незначащие нули.</p>
<p><em>Результат</em>: <img src="../images/Ex08/image33.png" /></p></li>
<li><p>Экспортируйте карту в графический файл формата <kbd>PNG</kbd> c разрешением 300 dpi.</p></li>
</ol>
<h2 id="экспорт-карты-населения">Экспорт карты населения</h2>
<p><a href="#картографирование-по-статистическим-данным">К содержанию ⇡</a></p>
<ol type="1">
<li><p><strong>Включите слои</strong> плотности населения и структуры населения. Отключите слой транспортных средств.</p></li>
<li><p>Включите отображение названия слоя в легенде для слоя <strong>Структура населения</strong>.</p></li>
<li><p>Уберите <strong>незначащие нули в подписях классов</strong> слоя плотности населения, оставив один знак после запятой.</p>
<p><em>Результат</em>: <img src="../images/Ex08/image34.png" /></p></li>
<li><p>Экспортируйте карту в графический файл формата <kbd>PNG</kbd> c разрешением 300 dpi.</p></li>
</ol>
<h1 id="анализ-распределения-типов-подстилающей-поверхности">Анализ распределения типов подстилающей поверхности</h1>
<h2 id="введение-8">Введение</h2>
<p><strong>Цель задания</strong> --- научиться определять соотношение типов подстилающей поверхности по регулярной сетке для метеорологических моделей и моделей формирования поверхностного стока средствами ГИС-технологий.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td><kbd>Гидрометпоток</kbd></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Оверлей пространственных объектов, соединение таблиц в реляционных базах данных, внешний и внутренний ключ соединения.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Работы с базой пространственных данных. Настройка символики и подписей объектов. Владение базовыми ГИС-технологиями: пространственные и атрибутивные запросы, оверлей.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>Cлои картографической основы OpenStreetMap</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>Слой регулярной сетки, для каждой ячейки которого определено соотношение типов подстилающей поверхности. Картодиаграммы типов подстилающей поверхности. Проект карты с компоновкой.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Регулярная сетка, оверлей, соединение таблиц, картодиаграммы</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-7">Контрольный лист</h3>
<ul>
<li>[x] Построить регулярную сетку с заданными параметрами.</li>
<li>[x] Определить долю каждого типа подстилающей поверхности в площади ячеек.</li>
<li>[x] Присоединить получившиеся столбцы к слою регулярной сетки.</li>
<li>[x] Экспортировать результаты в текстовый файл.</li>
<li>[x] Визуализировать результат способом картодиаграмм.</li>
<li>[x] Оформить карту в режиме компоновки.</li>
</ul>
<h3 id="аннотация-7">Аннотация</h3>
<p>В задачах климатического и метеорологического моделирования, а также моделирования поверхностного стока важную роль играет характер подстилающей поверхности, а именно соотношение водопроницаемых и водоупорных поверхностей, соотношение леса, воды, открытых грунтов, городских территорий и т.д. Подготовка этих данных осуществляетсясредствами ГИС на основе картографических данных и данных дистанционного зондирования.</p>
<p>В задании вам предлагается сформировать регулярную сетку и с помощью оверлея определить соотношение типов поверхностей по каждой ячейке. Результаты далее экспортируются в текстовый файл для дальнейшего использования при моделировании, а на основе полученных данных оформляется карта соотношения типов поверхностей методом картодиаграмм.</p>
<h2 id="оформление-базовых-слоев-1">Оформление базовых слоев</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Скопируйте каталог <em>Ex09</em> в свою папку.</p></li>
<li><p>Подключитесь в окне каталога к вашей папке <em>Ex09</em>. Убедитесь, что в ней находится база геоданных <em>LandCover.gdb</em>:</p></li>
<li><p>Добавьте на карту следующие слои и раскрасьте их в соответствии с цветами:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Слой</th>
<th style="text-align: left;">Цвет</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Hydro</em></td>
<td style="text-align: left;">Голубой</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Green</em></td>
<td style="text-align: left;">Зеленый</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Industrial</em></td>
<td style="text-align: left;">Оранжевый</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Buildings</em></td>
<td style="text-align: left;">Темно-серый</td>
</tr>
</tbody>
</table></li>
<li><p>Сохраните документ карты в свою папку под названием <em>LandCover.mxd</em>.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №1.</strong> Типы подстилающей поверхности</kbd></p>
<h2 id="построение-регулярной-сетки">Построение регулярной сетки</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Создайте новую базу геоданных. Для этого в окне каталога щелкните правой кнопкой мыши по вашей папке &lt;Фамилия&gt;\Ex09 и выберите <strong>New &gt; File Geodatabase</strong>.</p></li>
<li><p>Назовите базу геоданных <em>Ex09</em>.</p></li>
<li><p>Щелкните по <em>Ex09.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong>. Эта команда указывает системе, что все результаты автоматической обработки данных следует помещать в выбранную базу геоданных.</p></li>
<li><p>Откройте <strong>ArcToolbox</strong> с помощью иконки <img src="../images/Ex09/image7.png" /> на панели инструментов.</p></li>
<li><p>Запустите инструмент геообработки <strong>Data Management Tools &gt; Feature Class &gt; Create Fishnet</strong> и заполните его параметры следующим образом.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Output Feature Class</em></td>
<td style="text-align: left;"><Ваша папка>/Ex09/Ex09.gdb/fishnet_1000</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Template Extent</em></td>
<td style="text-align: left;">Same as Layer Buildings</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Cell Size Width</em></td>
<td style="text-align: left;">1000</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Cell Size Height</em></td>
<td style="text-align: left;">1000</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Number of Rows</em></td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Number of Columns</em></td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Create Label Points</em></td>
<td style="text-align: left;">Нет</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Geometry Type</em></td>
<td style="text-align: left;">POLYGON</td>
</tr>
</tbody>
</table>
<p>Остальные параметры оставьте по умолчанию. <em>Диалог инструмента примет следующий вид:</em></p>
<figure>
<img src="../images/Ex09/image8.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. После выполнения расчетная сетка будет добавлена на экран.</p></li>
<li><p>Разместите слой <em>Fishnet</em> поверх других слоев и смените его символ на черную линию толщиной 1 пункт.</p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="подсчет-доли-водных-объектов-в-площади-ячеек">Подсчет доли водных объектов в площади ячеек</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Запустите инструмент <strong>Analysis Tools &gt; Statistics &gt; Tabulate Intersection</strong>.</p></li>
<li><p>Заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Input Zone Features</em></td>
<td style="text-align: left;">fishnet_1000</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Zone Fields</em></td>
<td style="text-align: left;">OID</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Input Class</em></td>
<td style="text-align: left;">Features Hydro</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Output Table</em></td>
<td style="text-align: left;">&lt;Ваша папка&gt;/Ex09/Ex09.gdb/fishnet_1000_Hydro</td>
</tr>
</tbody>
</table>
<p>Остальные параметры оставьте по умолчанию. <em>Диалог примет следующий вид:</em></p>
<figure>
<img src="../images/Ex09/image9.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, после выполнения таблица результатов будет добавлена в таблицу содержания.</p></li>
<li><p>Откройте таблицу и посмотрите значения в поле <em>PERCENTAGE</em> — они отражают долю объекта в площади ячейки.</p></li>
</ol>
<h2 id="подсчет-доли-прочих-типов-поверхности-в-площади-ячеек">Подсчет доли прочих типов поверхности в площади ячеек</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<p>Повторите операцию подсчета доли площади для оставшихся трех слоев, используя следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Входной слой</th>
<th style="text-align: left;">Выходной слой</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Green</em></td>
<td style="text-align: left;">Fishnet_1000_Green</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Industrial</em></td>
<td style="text-align: left;">Fishnet_1000_Industrial</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Buildings</em></td>
<td style="text-align: left;">Fishnet_1000_Buildings</td>
</tr>
</tbody>
</table>
<h2 id="добавление-и-инициализация-атрибутивных-полей">Добавление и инициализация атрибутивных полей</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Откройте таблицу атрибутов слоя <em>Fishnet</em>.</p></li>
<li><p>Добавьте в нее поле, которое будет хранить значение доли водных объектов. Для этого выберите в главном меню таблицы команду <em>Add Field…</em> и заполните параметры появившегося диалога следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Name</em></td>
<td>Hydro</td>
</tr>
<tr class="even">
<td><em>Type</em></td>
<td>Float</td>
</tr>
</tbody>
</table>
<p>Остальные параметры оставьте по умолчанию.</p></li>
<li><p>Добавьте аналогичным образом поля <em>Green</em>, <em>Industrial</em>, <em>Building</em>, а также <em>Other</em>, которое будет использоваться для хранения доли прочих поверхностей.</p></li>
<li><p>Используя калькулятор поля, заполните каждое поле значением <em>0</em>.</p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="присоединение-таблицы-с-долей-водных-объектов">Присоединение таблицы с долей водных объектов</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<blockquote>
<p><strong>Соединение таблиц</strong> (join) — операция, в результате которой к одной таблице добавляются столбцы из другой таблицы. При этом требуется, чтобы строки добавленных столбцов присоединились к нужным строкам основной таблицы. Порядок строк и их число в обеих таблицах, как правило, не одинаковы. Чтобы установить соответствие между строками исходной и присоединяемой таблицы, необходимо иметь в каждой таблице поле с общими для них значениями. Это поле именуется ключевым.</p>
</blockquote>
<ol type="1">
<li><p>Откройте слой <em>Fishnet</em> на редактирование.</p></li>
<li><p>Присоедините таблицу <em>Fishnet_1000_Hydro</em> к слою Fishnet. Для этого откройте свойства слоя Fishnet, перейдите на вкладку <em>Joins &amp; Relates</em> и нажмите Add в группе Joins.</p></li>
<li><p>Укажите его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th style="text-align: left;">Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>OID</em></td>
<td style="text-align: left;">Поле, содержащее уникальный идентификатор каждой записи</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Fishnet_1000_Hydro</em></td>
<td style="text-align: left;">Присоединяемая таблица</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>OID</em></td>
<td style="text-align: left;">Поле в присоединяемой таблице, которое соответствует полю 1 в исходной</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Keep Only Matching Records</em></td>
<td style="text-align: left;">Будут сохранены только те записи, для которых найдены совпадения поля <em>OID</em></td>
</tr>
</tbody>
</table>
<p>При указании свойств соединения отметьте флажком опцию <strong>Keep Only Matching records</strong>. Диалог соединения таблиц примет следующий вид:</p>
<figure>
<img src="../images/Ex09/image10.png" />
</figure></li>
<li><p>Используя калькулятор поля, перенесите значения из присоединенного столбца <em>PERCENTAGE</em> в столбец <em>Hydro</em> слоя <em>Fishnet</em>. Для этого щелкните правой кнопкой мыши по заголовку столбца <em>Hydro</em> и выберите в контекстном меню команду <strong>Field Calculator</strong>. В появившемся диалоге введите следующий текст команды (см рисунок ниже):</p>
<p><code>[fishnet_1000_Hydro.PERCENTAGE]</code></p>
<p>Для подстановки названия поля в строку просто дважды щелкните на нем в списке. Обратите внимание на точечную нотацию. Текст до точки — это название таблицы. Текст после точки — название поля.</p>
<p><em>Диалог примет следующий вид</em>:</p>
<figure>
<img src="../images/Ex09/image11.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. Значения будут скопированы их одного столбца в другой.</p></li>
<li><p>Удалите соединение таблиц.</p></li>
</ol>
<h2 id="присоединение-таблиц-прочих-типов-поверхностей">Присоединение таблиц прочих типов поверхностей</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<p>Повторите операцию соединения для таблиц <em>Fishnet_1000_Green, Fishnet_1000_Industrial и Fishnet_1000_Buildings</em>. После присоединения вычислите на их основе соответствующие поля в таблице <em>Fishnet</em>. Не забудьте перед каждым новым соединением <em>удалять</em> предыдущее.</p>
<h2 id="вычисление-доли-прочих-поверхностей">Вычисление доли прочих поверхностей</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<p>С помощью калькулятора поля вычислите долю прочих поверхностей в поле <em>Other</em>, используя следующее выражение:</p>
<p><code>100 - [Hydro] - [Green] - [Industrial] - [Buildings]</code></p>
<p>После вычисления завершите сеанс редактирования слоя.</p>
<h2 id="вычисление-координат-центров-ячеек">Вычисление координат центров ячеек</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<p>Для использования данных при моделировании важно знать координаты центров ячеек.</p>
<ol type="1">
<li><p>Добавьте столбцы <em>X</em> и <em>Y</em> типа <em>Long Integer</em> в таблицу слоя <em>Fishnet</em>.</p></li>
<li><p>Вычислите их с помощью калькулятора геометрии. Для этого щелкните на столбце <em>X</em> правой кнопкой мыши и в контекстном меню выберите команду <strong>Calculate Geometry</strong>.</p></li>
<li><p>В появившемся диалоге выберите режим <strong>X Coordinate of Centroid</strong> и нажмите <strong>ОК</strong>:</p>
<figure>
<img src="../images/Ex09/image12.png" />
</figure></li>
<li><p>Повторите операцию для столбца <em>Y</em>.</p></li>
<li><p>Сохраните документ карты.</p>
<p>После выполнения всех операций атрибутивная таблица слоя <em>Fishnet</em> должна принять приблизительно следующий вид:</p>
<figure>
<img src="../images/Ex09/image13.png" />
</figure></li>
</ol>
<p><kbd><strong>Снимок экрана №2.</strong> Атрибутивная таблица слоя расчетной сетки</kbd></p>
<h2 id="экспорт-таблицы-в-файл">Экспорт таблицы в файл</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<p>Экспортируйте результирующую таблицу в текстовый файл для ее дальнейшего использования. Для этого:</p>
<ol type="1">
<li><p>В главном меню таблицы выберите команду <strong>Export…</strong>.</p></li>
<li><p>В поле <strong>Output Table</strong> нажмите кнопку указания места сохранения файла и перейдите в ваш каталог <em>Ex09</em>.</p></li>
<li><p>Смените тип файла на текстовый и назовите его <em>Results.txt</em>:</p>
<figure>
<img src="../images/Ex09/image14.png" />
</figure></li>
<li><p>Откройте получившийся файл через <strong>Проводник</strong>, чтобы просмотреть его содержимое.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №3.</strong> Файл данных расчетной сетки</kbd></p>
<h2 id="построение-картодиаграмм-1">Построение картодиаграмм</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<p>Для визуализации соотношения типов поверхностей по ячейкам удобно использовать картодиаграммы.</p>
<ol type="1">
<li><p>Установите масштаб изображения <em>1:100 000</em>.</p></li>
<li><p>Измените способ изображения слоя <em>Fishnet</em> на <strong>Pie Charts</strong> (картодиаграммы).</p></li>
<li><p>Добавьте столбцы <em>Hydro, Green, Industrial, Buildings и Other</em> в поля картодиаграммы и раскрасьте их в соответствии с рисунком:</p>
<figure>
<img src="../images/Ex09/image15.png" />
</figure></li>
<li><p>Нажмите кнопку <strong>Size</strong> и установите диаметр кружка равным 18 пунктам.</p></li>
<li><p>Символ <strong>Background</strong> сделайте без заливки и с черной обводкой. Нажмите <strong>ОК</strong>.</p></li>
<li><p>Установите прозрачность для всех слоев 70%, чтобы подложка не мешала восприятию картодиаграмм. Документ карты примет следующий вид:</p></li>
</ol>
<figure>
<img src="../images/Ex09/image16.png" />
</figure>
<p><kbd><strong>Снимок экрана №4.</strong> Картодиаграммы</kbd></p>
<h2 id="оформление-компоновки-карты">Оформление компоновки карты</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<p>Оформите карту на один из фрагментов территории, на котором встречаются ячейки с разным типом поверхности. Для этого:</p>
<ol type="1">
<li><p>Переключитесь в режим компоновки.</p></li>
<li><p>Переименуйте слой <em>Fishnet_1000</em> в <em>Типы подстилающей поверхности</em>.</p></li>
<li><p>Установите масштаб карты равным <em>1:100 000</em> и переместите изображение на выбранный вами участок территории.</p></li>
<li><p>Добавьте легенду для слоя <em>Типы подстилающей поверхности</em></p></li>
<li><p>Добавьте заголовок карты.</p></li>
<li><p>Добавьте масштаб.</p></li>
<li><p>Экспортируйте карту в файл <em>LandCover.png</em> в свою директорию <em>Ex09</em>.</p></li>
<li><p>Вставьте карту в отчетный файл.</p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="контрольные-вопросы-4">Контрольные вопросы</h2>
<p><a href="#анализ-распределения-типов-подстилающей-поверхности">К содержанию ⇡</a></p>
<p>Ответьте на вопросы в отчетном файле. После окончания положите ваш отчет в сетевую папку для проверки вашим преподавателем.</p>
<h1 id="анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">Анализ пространственных взаимосвязей методом оверлея на основе векторных данных</h1>
<h2 id="введение-9">Введение</h2>
<p><strong>Цель</strong> --- научиться определять пространственную приуроченность двух явлений на основе процента взаимного покрытия их площадей (методом оверлея).</p>
<table style="width:11%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Поток</strong></td>
<td>==Физпоток==</td>
</tr>
<tr class="even">
<td><strong>Теоретическая подготовка</strong></td>
<td>Оверлей пространственных объектов, геометрическое определение вероятности как отношения мер (площадей), соединение таблиц в реляционных базах данных, внешний и внутренний ключ соединения.</td>
</tr>
<tr class="odd">
<td><strong>Практическая подготовка</strong></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Работы с базой пространственных данных. Настройка символики и подписей объектов. Владение базовыми ГИС-технологиями: пространственные и атрибутивные запросы, оверлей.</td>
</tr>
<tr class="even">
<td><strong>Исходные данные</strong></td>
<td>База данных ГИС «Сатино».</td>
</tr>
<tr class="odd">
<td><strong>Результат</strong></td>
<td>Таблица взаимного покрытия площадей типов рельефа и подтипов почв.</td>
</tr>
<tr class="even">
<td><strong>Ключевые слова</strong></td>
<td>Базовые технологии ГИС, оверлей, геометрическая вероятность.</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-8">Контрольный лист:</h3>
<ul>
<li>[x] Добавить на карту слои типов почв и рельефа, оформить их</li>
<li>[x] Произвести оверлей слоев</li>
<li>[x] Произвести слияние данных и соединение таблиц</li>
<li>[x] Подсчитать процент покрытия площадей</li>
</ul>
<h3 id="аннотация-8">Аннотация</h3>
<p>Задание посвящено знакомству с пространственным анализом на основе векторных данных. Векторная модель представляет объекты в виде отдельных геометрических фигур с набором атрибутов. Она является объектно-ориентированной и удобна для анализа формы, размеров объектов, их взаимной конфигурации в пространстве. Одним из широко используемых методов анализа на основе векторных данных является оверлей.</p>
<blockquote>
<p>При <em>оверлее</em> происходит наложение двух или более слоев, в результате чего образуется их графическая композиция. Полученные участки наследуют атрибуты от каждого слоя. Эта операция базируется на стандартных отношениях множеств, таких как пересечение, объединение и симметрическая разность.</p>
</blockquote>
<p>С помощью оверлея можно, например, установить, к каким генетическим типам рельефа приурочены различные типы и подтипы почв. В общем случае оверлей позволяет установить, какие комбинации объектов встречаются в пространстве. В задании предлагается исследовать методом оверлея взаимосвязь типов рельефа и типов и подтипов почв.</p>
<h2 id="визуальный-анализ-векторных-слоев">Визуальный анализ векторных слоев</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<p>В первую очередь при анализе данных следует провести их визуальную оценку, которая может натолкнуть на отыскание закономерностей во взаимном расположении объектов.</p>
<ol type="1">
<li><p>Скопируйте папку <em>Ex04</em> из серверной директории в свой рабочий каталог с помощью Проводника.</p></li>
<li><p>Откройте <strong>ArcMap</strong> и в нем — окно <strong>Catalog</strong>.</p></li>
<li><p>Найдите базу геоданных <img src="../images/Ex10/image2.png" /> <em>Satino.gdb</em> в своем каталоге <em>Ex04</em> и перенесите на карту два тематических слоя: <img src="../images/Ex10/image3.png" /> <em>SoilTypes</em> (Типы почв) и <img src="../images/Ex10/image3.png" /> <em>RelTypes</em> (Типы рельефа) из группы <em>Thematic</em>.</p></li>
<li><p>Поместите слой <em>Типы рельефа</em> вниз таблицы содержания, откройте его свойства (двойным щелчком на названии) и перейдите на вкладку <strong>Symbology</strong>.</p></li>
<li><p>Выберите тип отображения <strong>Categories</strong> и в нем — режим <strong>Match to Symbols In a Style</strong>, который позволяет настроить символы в соответствии с заранее определенным стилем.</p></li>
<li><p>В качестве определяющего поля <strong>Value field</strong> выберите <em>Тип рельефа</em>. Далее нажмите кнопку Browse и выберите стиль <em>Satino.style</em>, лежащий в вашем каталоге <em>Ex04</em>. Нажмите кнопку <strong>Match symbols</strong>. Снимите флажок со строчки <strong>All other values</strong>. Окно свойств слоя должно принять вид, аналогичный представленному на рисунке. Нажмите <strong>ОК</strong>.</p>
<figure>
<img src="../images/Ex10/image4.png" alt="Рис. 2. Настройка способа изображения в соответствии с предопределенным стилем" /><figcaption>Рис. 2. Настройка способа изображения в соответствии с предопределенным стилем</figcaption>
</figure></li>
<li><p>Настройте отображение слоя <em>Типы почв</em> в виде полигонов без заливки с ярко красной обводкой толщиной <em>1.5</em> пиксела. Чтобы сделать полигон без заливки, необходимо выбрать в меню <strong>Fill Color</strong> режим <strong>No Color</strong>. Нажмите <strong>ОК</strong>:</p>
<figure>
<img src="../images/Ex10/image6.png" alt="Рис. 3. Выбор режима отображения полигонов без заливки" /><figcaption>Рис. 3. Выбор режима отображения полигонов без заливки</figcaption>
</figure></li>
<li><p>Выберите инструмент идентификации <img src="../images/Ex10/image5.png" /> и щелкните в пределах карты на любом полигоне.</p></li>
<li><p>Переведите инструмент идентификации в многослойный режим. Для этого в окне <strong>Identify</strong> раскройте верхний список <strong>Identify From</strong> и выберите пункт <strong>All layers</strong>. Попробуйте идентифицировать полигоны в разных участках карты, обращая внимания на информацию, которая отображается в окне идентификации.</p>
<figure>
<img src="../images/Ex10/image7.png" alt="Рис. 4. Переключение инструмента идентификации в многослойный режим" /><figcaption>Рис. 4. Переключение инструмента идентификации в многослойный режим</figcaption>
</figure></li>
</ol>
<p>==✔︎ <em>Проанализируйте совмещенное изображение границ типов почв и рельефа. Есть ли какие-то совпадения или подобия их рисунков в пределах речных долин, междуречий, малых эрозионных форм?</em>==</p>
<p>Теперь, когда данные исследованы визуально и путем идентификации, можно перейти к их анализу с помощью оверлея. Предварительно следует организовать рабочее пространство, чтобы результаты анализа хранились в структурированном виде и не смешивались с базовыми слоями.</p>
<h2 id="организация-рабочего-пространства">Организация рабочего пространства</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<p>Поскольку в процессе оверлея будет создан новый слой (а затем еще и другие), возникает задача хранения вновь создаваемых данных. База геоданных <em>Satino</em> содержит базовые слои, и производные результаты лучше помещать в другое хранилище.</p>
<ol type="1">
<li><p>Сохраните документ карты в свой каталог <em>Ex04</em> под именем <em>Ex04_Оверлей.mxd</em></p></li>
<li><p>Откройте окно <strong>Catalog</strong> и обратите внимание на то, в нем наверху появился домашний каталог под именем <em>Home - Фамилия/Ex04.</em>. Раскройте его.</p>
<blockquote>
<p><em>Домашний каталог</em> --- директория файловой системы, в которой хранится документ карты, с которым вы работаете в данный момент. Обычно в том же каталоге стараются хранить и сами данные (если они не берутся из внешней СУБД), чтобы избежать путаницы.</p>
</blockquote></li>
<li><p>Щелкните правой кнопкой мыши по домашнему каталогу и выберите <strong>New &gt; File Geodatabase</strong> для того, чтобы создать новую базу геоданных.</p></li>
<li><p>Назовите ее <em>Ex04.gdb</em></p></li>
<li><p>Щелкните по <em>Ex04.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong>. Эта команда указывает программе, что все результаты обработки данных следует помещать в выбранную базу геоданных.</p></li>
</ol>
<h2 id="оверлей-слоев-методом-пересечения">Оверлей слоев методом пересечения</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<p>Оверлей осуществляется в ArcGIS с помощью инструментов геообработки.</p>
<blockquote>
<p><em>Геообработка</em> (geoprocessing) в терминологии ArcGIS — это анализ и преобразование пространственных данных. Доступ к инструментам геообработки осуществляется через окно <em>ArcToolbox</em>, где они сгруппированы по назначению. Некоторые наборы инструментов, такие как <em>Spatial Analyst</em> и <em>3D Analyst</em>, являются дополнительными модулями ArcGIS, предназначенными для решения специализированного круга задач: растровый анализ, трехмерный анализ, сетевой анализ и т.д.</p>
</blockquote>
<ol type="1">
<li><p>Откройте <strong>ArcToolbox</strong> с помощью красной кнопки <img src="../images/Ex10/image8.png" /> на панели инструментов.</p></li>
<li><p>Раскройте группу инструментов <strong>Analysis Tools &gt; Overlay</strong>. Здесь можно найти различные режимы оверлея.</p>
<p>==✔︎ <em>Обсудите с преподавателем режимы оверлея Intersect, Symmetrical Difference и Union. Чем они отличаются друг от друга?</em>==</p></li>
<li><p>Запустите инструмент <strong>Intersect</strong>, который ищет геометрическое пересечение нескольких слоев. Изучите пояснительную иллюстрацию в правой части окна.</p></li>
<li><p>Перенесите из таблицы содержания в список <strong>Input features</strong> слой <em>Типы почв</em>, затем слой <em>Типы рельефа</em></p>
<p>Обратите внимание на то, что система автоматически определила адрес и название выходного класса объектов в следующем виде:</p>
<pre><code>D:/GIS/207/CAR/Петров/Ex04/Ex04.gdb/SoilTypes/Intersect</code></pre></li>
<li><p>Замените <em>SoilTypes_Intersect</em> на <em>SoilsRelief_Intersect</em>, чтобы из названия было ясно, что с чем пересекается.</p></li>
<li><p>Параметр <strong>Join Attributes</strong> оставьте <em>ALL</em>. В этом режиме результат оверлея унаследует все поля из обоих слоев.</p></li>
<li><p>Диалог инструмента <strong>Intersect</strong> примет вид, аналогичный представленному на рисунке. Запустите вычисления, нажав кнопку <strong>ОК</strong>.</p>
<figure>
<img src="../images/Ex10/image9.png" alt="Рис. 5. Диалог инструмента Intersect" /><figcaption>Рис. 5. Диалог инструмента Intersect</figcaption>
</figure></li>
<li><p>Дождитесь, пока в таблицу содержания добавится слой <em>SoilsRelief_Intersect</em> и переименуйте его в <em>Комбинации почвы-рельеф</em>. Для этого выделите слой в таблице содержания и нажмите <kbd>F2</kbd> на клавиатуре, либо найдите пункт <strong>Rename</strong> в контекстном меню.</p></li>
<li><p>Поместите полученный оверлеем слой между слоями типов почв и рельефа, и настройте его отображение в виде полигона без заливки с черной обводкой толщиной 4 пиксела. Там, где границы совпадают с контурами типов рельефа, они будут черного цвета, а там где они совпадают с контурами типов почв, будет красная линия с черной обводкой.</p></li>
<li><p>Раскройте атрибутивную таблицу слоя <em>Комбинации почвы-рельеф</em>.</p></li>
</ol>
<p>==✔︎ <em>Какие поля содержатся в атрибутивной таблице полученного слоя? Сравните его границы с границами двух исходных слоев. Обсудите результат с преподавателем</em>==</p>
<h2 id="слияние-результатов-пересечения-с-целью-получения-показателя-пространственной-связи">Слияние результатов пересечения с целью получения показателя пространственной связи</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<p>Поскольку каждый полигон в оверлейном слое содержит значение типа/подтипа почвы и типа рельефа, появляется возможность установить приуроченность типов и подтипов почв к определенным типам рельефа.</p>
<p>Чтобы подсчитать долю каждого типа рельефа в площади каждого подтипа почв, необходимо просуммировать площади каждой их уникальной комбинации. Например, дерново-карбонатные выщелоченные почвы (<em>Д-в-к</em>) на крутых эрозионных склонах встречаются в пределах Сатинского полигона в виде 6 разрозненных участков, имеющих некоторую суммарную площадь. Эта площадь, деленная на суммарную площадь почв подтипа <em>Д-в-к</em> даст вероятностный критерий приуроченности почв <em>Д-в-к</em> к крутым эрозионным склонам. То же самое касается остальных комбинаций подтипов почв и типов рельефа.</p>
<p>С точки зрения рабочих процессов ГИС, операцию следует разбить на 5 шагов:</p>
<ul>
<li><p>подсчет суммарной площади каждой комбинации подтипа почв и типа рельефа;</p></li>
<li><p>подсчет суммарной площади каждого подтипа почв;</p></li>
<li><p>добавление поля, в которое будет записана процентная доля;</p></li>
<li><p>соединение таблиц комбинаций и подтипов почв по названию подтипа почв;</p></li>
<li><p>деление площади комбинации на площадь подтипа почв и запись результата в соответствующее поле.</p></li>
</ul>
<blockquote>
<p>Объединение разрозненных объектов, обладающих одинаковым набором атрибутов, осуществляется с помощью <em>операции слияния</em> (Dissolve). Причем, если объекты примыкают друг к другу, граница между ними будет стерта, а если объекты разнесены в пространстве, на выходе получится сложный составной объект (Multipart feature), состоящий из нескольких полигонов. Слияние — это один из методов генерализации.</p>
</blockquote>
<h2 id="подсчет-суммарной-площади-каждой-комбинации-подтипа-почв-и-типа-рельефа">Подсчет суммарной площади каждой комбинации подтипа почв и типа рельефа</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Откройте в ArcToolbox инструмент геообработки <strong>Data Management Tools &gt; Generalization &gt; Dissolve</strong>. Изучите пояснительный рисунок в правой части окна интерфейса.</p></li>
<li><p>Выберите в качестве значения параметра <strong>Input Features</strong> слой <em>Комбинации почвы-рельеф</em></p></li>
<li><p>В списке <strong>Dissolve Fields</strong> следует отметить поля <em>SoilType</em>, <em>SoilSubtype</em> и <em>RelType</em>, тем самым можно будет найти все уникальные комбинации подтипов почв и типов рельефа.</p></li>
</ol>
<blockquote>
<p>Поле <em>SoilType</em> необходимо отметить для того, чтобы в таблице результирующего слоя сохранилась информация о типах почв. Это не повлияет на сам результат, поскольку количество комбинаций типа и подтипа почв равно количеству самих подтипов.</p>
</blockquote>
<ol start="4" type="1">
<li><p>Введите название выходного класса <em>SoilsRelief_Intersect_Dissolve</em>. Диалог инструмента <strong>Dissolve</strong> примет вид, аналогичный представленному на рисунке ниже.</p>
<figure>
<img src="../images/Ex10/image10.png" alt="Рис. 6. Инструмент Dissolve, выполняющий слияние объектов по набору атрибутов" /><figcaption>Рис. 6. Инструмент Dissolve, выполняющий слияние объектов по набору атрибутов</figcaption>
</figure></li>
<li><p>Остальные параметры оставьте по умолчанию и нажмите <strong>ОК</strong>.</p></li>
<li><p>После того как результат появится в таблице содержания, назовите полученный слой <em>Слияние комбинаций почвы-рельеф</em>.</p></li>
<li><p>Отключите этот слой в таблице содержания.</p></li>
</ol>
<h2 id="подсчет-суммарной-площади-каждого-подтипа-почв">Подсчет суммарной площади каждого подтипа почв</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Запустите инструмент <strong>Dissolve</strong> еще раз.</p></li>
<li><p>Выберите в качестве <strong>Input Features</strong> слой <em>Типы почв</em>.</p></li>
<li><p>В списке <strong>Dissolve fields</strong> выберите поля <em>SoilType</em> и <em>SoilSubtype</em>.</p></li>
<li><p>Введите название выходного класса <em>SoilTypes_Dissolve</em>.</p></li>
<li><p>Остальные параметры оставьте по умолчанию и нажмите <strong>ОК</strong>.</p></li>
<li><p>Назовите полученный слой <em>Слияние подтипов почв</em>. В данном слое в результате операции слияния каждый подтип почв будет представлен единственным объектом, а в его поле <em>Shape_Area</em> будет записана суммарная площадь данного подтипа</p></li>
<li><p>Отключите этот слой в таблице содержания.</p></li>
</ol>
<h2 id="добавление-нового-поля-для-результирующих-значений">Добавление нового поля для результирующих значений</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Откройте таблицу слоя <em>Слияние комбинаций почвы-рельеф</em>.</p></li>
<li><p>Выберите в окне таблицы пункт меню <img src="../images/Ex10/image11.png" /> <strong>Table Options &gt; Add Field…</strong></p></li>
<li><p>В диалоге введите название поля <em>Percent</em>.</p></li>
<li><p>Выберите тип поля <strong>Float</strong> (с плавающей точкой). Оставьте остальные параметры по умолчанию и нажмите <strong>ОК</strong>.</p></li>
</ol>
<h2 id="соединение-таблиц-по-названию-подтипа-почв">Соединение таблиц по названию подтипа почв</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<p>Для расчета пространственной взаимосвязи необходимо поделить площадь каждой комбинации на площадь соответствующего подтипа почв. Эти площади находятся сейчас в разных таблицах — <em>Слияние подтипов почв</em> и <em>Слияние комбинаций почвы-рельеф</em>. Их можно соединить по полю <em>Подтип</em>.</p>
<blockquote>
<p><em>Соединение таблиц</em> (table join) — операция, в результате которой к одной таблице временно добавляются столбцы из другой таблицы. Чтобы установить соответствие между строками исходной и присоединяемой таблицы, необходимо иметь в каждой таблице поле с общими для них значениями. Например, это может быть числовой код объекта или, как в нашем случае, подтип почв.</p>
</blockquote>
<ol type="1">
<li><p>Перейдите в контекстное меню слоя <em>Слияние комбинаций почвы-рельеф</em> и выполните команду <strong>Joins and Relates &gt; Join</strong>. Внимательно изучите содержимое появившегося диалога.</p></li>
<li><p>Выберите <em>Подтип</em> в качестве поля <strong>1</strong>, по которому будет делаться соединение:</p>
<figure>
<img src="../images/Ex10/image12.png" alt="Рис. 7. Диалог настройки соединения таблиц" /><figcaption>Рис. 7. Диалог настройки соединения таблиц</figcaption>
</figure></li>
<li><p>Выберите <em>Слияние подтипов почв</em> в качестве присоединяемой таблицы <strong>2</strong>.</p></li>
<li><p>Выберите <em>Подтип</em> в качестве поля, по которому будет присоединяться таблица <em>Слияние подтипов почв</em>.</p></li>
<li><p>Нажмите <strong>OK</strong>.</p></li>
</ol>
<p>==✔︎ <em>Что изменилось в атрибутивной таблице слоя <strong>Слияние комбинаций почвы-рельеф?</strong></em>==</p>
<h2 id="вычисление-результирующих-значений">Вычисление результирующих значений</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Откройте таблицу слоя <em>Слияние комбинаций почвы-рельеф</em>.</p></li>
<li><p>Щелкните правой кнопкой мыши на заголовке поля <em>Percent</em>, вызовите <strong>Field Calculator</strong> и введите туда указанное ниже выражение для подсчета процента площади. Вы можете просто набрать <code>100 *</code>, а затем дважды щелкнуть по названию каждого поля в списке, чтобы не вписывать их вручную:</p>
<pre><code>100 * [SoilsRelief_Intersect_Dissolve.SHAPE_Area] /
[SoilTypes_Dissolve.SHAPE_Area]</code></pre>
<blockquote>
<p><em>Калькулятор поля</em> (field calculator) используется для вычисления значений атрибутов. Вы можете, например, умножить значение одного поля на 100 и записать в другое, соединить несколько текстовых полей в одно предложение или просто скопировать значение одного поля в другое.</p>
</blockquote></li>
<li><p>Нажмите <strong>ОК</strong>. Посмотрите получившиеся значения в поле <em>Percent</em>.</p></li>
<li><p>Удалите соединение таблиц через контекстное меню слоя <em>Слияние комбинаций почвы-рельеф</em> командой <strong>Joins and Relates &gt; Remove Joins &gt; Remove All joins</strong>.</p></li>
<li><p>В атрибутивной таблице слоя <em>Слияние комбинаций почвы-рельеф</em> щелкните на любом поле правой кнопкой мыши и выберите команду <strong>Advanced Sorting</strong>.</p></li>
<li><p>Выберите в качестве первого поля <em>Подтип</em> и установите порядок сортировки <strong>Ascending</strong> (в сторону увеличения).</p></li>
<li><p>Выберите в качестве второго поля <em>Percent</em> и порядок сортировки <strong>Descending</strong> (в сторону уменьшения).</p></li>
<li><p>Растяните таблицу таким образом, чтобы хорошо было видно поле типа почв, поле подтипа почв, поле типа рельефа и поле <em>Percent.</em></p></li>
<li><p>Нажмите <strong>ОК</strong>.</p></li>
<li><p>Отключите оба слоя слияния в таблице содержания.</p></li>
<li><p>Сохраните документ карты.</p>
<p>Получившаяся таблица отображает для каждого подтипа почвы типы рельефа в порядке уменьшения их доли в площади. Первая строка для каждого подтипа почвы устанавливает наиболее вероятный тип рельефа.</p>
<p>==✔︎ <em>Обсудите с преподавателем результаты анализа. Какие почвы показывают наибольшую связь с определенным типом рельефа?</em>==</p></li>
<li><p>Отсортируйте таблицу только по убыванию значений в поле <em>Percent</em> (нажав дважды и еще раз дважды на нем) и выделите строки, в которых значение процента в поле <em>Percent</em> более <em>75</em>.</p></li>
<li><p>Скомпонуйте окно приложения так, чтобы было видно целиком карту, а также выделенные в таблице строки, а также столбцы <em>Тип</em>, <em>Подтип</em>, <em>Тип рельефа</em> и поле <em>Percent</em>. Окно примет вид, аналогичный представленному на рисунке:</p>
<figure>
<img src="../images/Ex10/image13.png" alt="Рис. 8. Результаты оверлейного анализа" /><figcaption>Рис. 8. Результаты оверлейного анализа</figcaption>
</figure>
<p><kbd><strong>Снимок экрана №1</strong> --- Окно карты и результирующая таблица</kbd></p></li>
<li><p>Сохраните документ карты</p></li>
</ol>
<h2 id="ответы-на-вопросы-3">Ответы на вопросы</h2>
<p><a href="#анализ-пространственных-взаимосвязей-методом-оверлея-на-основе-векторных-данных">К содержанию ⇡</a></p>
<p>Заполните отчетный файл и положите его в сетевую папку для проверки преподавателем.</p>
<h1 id="выбор-оптимального-местоположения-средствами-растрового-анализа">Выбор оптимального местоположения средствами растрового анализа</h1>
<h2 id="введение-10">Введение</h2>
<p><strong>Цель</strong> — овладеть основами растрового анализа в ГИС на примере решения задачи поиска оптимального местоположения для размещения объектов.</p>
<table style="width:11%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Поток</strong></td>
<td>Физический, Экономический</td>
</tr>
<tr class="even">
<td><strong>Теоретическая подготовка</strong></td>
<td>Растровая модель пространственных данных, вычисление евклидова расстояния на плоскости, методы классификации числовых рядов, оверлей с весовыми коэффициентами (взвешенный оверлей).</td>
</tr>
<tr class="odd">
<td><strong>Практическая подготовка</strong></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Инструменты геообработки. Работы с базой пространственных данных. Настройка символики и подписей объектов. Базовые технологии ГИС (пространственные и атрибутивные запросы, оверлей).</td>
</tr>
<tr class="even">
<td><strong>Исходные данные</strong></td>
<td>База данных ГИС «Сатино».</td>
</tr>
<tr class="odd">
<td><strong>Результат</strong></td>
<td>Слой базы пространственных данных, содержащий участок с наиболее оптимальной суммой критериев</td>
</tr>
<tr class="even">
<td><strong>Ключевые слова</strong></td>
<td>Классификация числовых рядов, растровая модель данных, взвешенный оверлей, евклидово расстояние.</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-9">Контрольный лист:</h3>
<ul>
<li>[x] Конвертировать слой землепользования в растровое представление</li>
<li>[x] Построить и классифицировать растр углов наклона рельефа</li>
<li>[x] Построить и классифицировать растры расстояний до водотоков и домов</li>
<li>[x] Осуществить взвешенный оверлей полученных растров</li>
<li>[x] Конвертировать класс с максимальной суммой баллов в векторное представление и выбрать участок, удовлетворяющий критерию минимальной площади.</li>
</ul>
<h3 id="аннотация-9">Аннотация</h3>
<p>В первых заданиях вы познакомились с редактированием векторных данных. Для ряда практических задач более удобным оказывается растровое представление. Оно хорошо подходит для анализа географического пространства, которое обладает постоянно меняющимися характеристиками среды. Растровая модель топологически неразрывна, что позволяет моделировать различные поля и перенос вещества в пространстве из одной ячейки в другую. В силу своей регулярности растровая модель проста в обработке, поскольку все операции можно унифицировать, ориентируясь на матрицу ячеек. В частности, к растровым слоям удобно применять операции алгебры карт, такие как сложение, вычитание, суммирование --- что и используется данном задании.</p>
<p>Вам предстоит решить задачу выбора оптимального местоположения участка для строительства производственного объекта. Критерии выбора следующие:</p>
<ul>
<li><p>оптимальные зоны для размещения — открытые пространства, такие как выгоны, пустыри, луга, вырубки и т.д;</p></li>
<li><p>предельный угол наклона рельефа — <em>12,5°</em>;</p></li>
<li><p>участок должен располагаться в непосредственной близости от автомобильных дорог;</p></li>
<li><p>участок должен располагаться в непосредственной близости от крупных водотоков, поскольку требуется водоснабжение;</p></li>
<li><p>необходимая площадь участка — не менее <em>30 000 м<sup>2</sup></em>.</p></li>
</ul>
<p>Таким образом, в анализе участвует 5 факторов: тип землепользования, углы наклона рельефа, расстояние до автодорог, расстояние до водотоков, площадь участка. Поскольку расстояния и углы наклона меняются в пространстве непрерывно, для их анализа удобно использовать растровое представление. К нему же необходимо привести типы землепользования, применив векторно-растровое преобразование. Каждый из полученных слоев далее следует классифицировать по балльной шкале от <em>1</em> до <em>10</em> и затем получить взвешенную сумму баллов по всей территории. Оптимальное местоположение будет соответствовать участкам с максимальной суммой баллов. Среди них необходимо удовлетворяющие критерию минимальной площади.</p>
<p>Для выполнения анализа и преобразований данных вы будете использовать инструменты <em>геообработки</em>.</p>
<blockquote>
<p><strong>Геообработка (geoprocessing)</strong> в терминологии ArcGIS — это анализ и преобразование пространственных данных. Инструменты геообработки находятся в ArcToolbox, где они сгруппированы по функциональному назначению.</p>
</blockquote>
<h2 id="подготовка-рабочего-пространства">Подготовка рабочего пространства</h2>
<p><a href="#выбор-оптимального-местоположения-средствами-растрового-анализа">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Скопируйте папку <code>Ex3</code> из каталога упражнений на сервере в свой локальный рабочий каталог на диске <code>D</code> с помощью <strong>Проводника</strong>. Раскройте ее после копирования на своем компьютере.</p></li>
<li><p>Откройте документ под названием <em>Ex3_Selection.mxd</em>.</p></li>
<li><p>Создайте новую базу геоданных. Для этого откройте окно <strong>ArcCatalog</strong>, правой кнопкой мыши щелкните вверху по вашей папке <em>Ex3</em> и выберите <strong>New &gt; File Geodatabase</strong>.</p></li>
<li><p>Назовите ее <em>Ex3.gdb</em>.</p></li>
<li><p>Щелкните по <em>Ex3.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong>. Эта команда указывает приложению, что все результаты автоматической обработки данных следует помещать в выбранную базу геоданных.</p></li>
</ol>
<h2 id="преобразование-слоя-типов-землепользования-в-растровое-представление">Преобразование слоя типов землепользования в растровое представление</h2>
<p><a href="#выбор-оптимального-местоположения">К содержанию ⇡</a></p>
<p>Поскольку в анализе будут участвовать растровые слои с различными расстояниями и углами наклонов, необходимо и данные по землепользованию привести к растровому виду.</p>
<ol type="1">
<li><p>Найдите в базе геоданных <em>Satino.gdb</em> слой <em>LandUse</em> в группе <em>Thematic</em> и перенесите его в таблицу содержания карты.</p></li>
<li><p>Визуализируйте слой <em>Землепользование</em> способом категорий, используя поле <em>Тип участка (Land_Type)</em>. Выбирать цвета не требуется, т.к. далее вы будете использовать растровый слой.</p></li>
<li><p>Диалоговое окно примет вид, аналогичный представленному на рисунке.</p>
<figure>
<img src="../images/Ex11/image2.png" alt="Рис. 1. Настройка способа изображения для типов землепользования" /><figcaption>Рис. 1. Настройка способа изображения для типов землепользования</figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы завершить настройку способа изображения.</p></li>
<li><p>Откройте <strong>ArcToolbox</strong> с помощью кнопки <img src="../images/Ex11/image3.png" /> на панели инструментов.</p></li>
<li><p>Запустите инструмент <strong>Conversion Tools &gt; To Raster &gt; Polygon to Raster</strong>.</p></li>
<li><p>Заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Features</td>
<td><code>Землепользование</code></td>
</tr>
<tr class="even">
<td>Value Field</td>
<td><code>Land_Type</code></td>
</tr>
<tr class="odd">
<td>Output Raster Dataset</td>
<td><code>&lt;Фамилия&gt;\Ex3\Ex3.gdb\LandUse_R</code></td>
</tr>
<tr class="even">
<td>Cellsize</td>
<td><code>2,5</code></td>
</tr>
</tbody>
</table>
<p>В поле <strong>Output point features</strong> вам потребуется заменить только название класса объектов (<em>LandUse_R</em>).</p>
<p>Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex11/image4.png" />
</figure>
<p>После завершения работы инструмента конвертации в таблицу содержания добавится новый слой.</p></li>
<li><p>Выделите его, нажмите <kbd>F2</kbd> и переименуйте в <em>Землепользование (растр)</em>.</p></li>
<li><p>Дважды щелкните по созданному слою и перейдите на вкладку <strong>Symbology</strong>.</p></li>
<li><p>Смените поле отображения <strong>Value field</strong> на <em>Land_type</em>. В легенду автоматически подставятся все найденные значения. Присвойте классам подходящие цвета в соответствии с их типом.</p></li>
<li><p>Удалите векторный слой <em>Землепользование</em> из таблицы содержания. Далее в этом упражнении он не понадобится.</p></li>
<li><p>Нажмите <strong>ОК</strong>. Переместите растровый слой наверх и нажмите кнопку <img src="../images/Ex11/image5.png" />. Окно карты примет вид, аналогичный представленному на рисунке:</p></li>
</ol>
<figure>
<img src="../images/Ex11/image6.png" alt="Рис. 3. Визуализация типов землепользования в растровом виде" /><figcaption>Рис. 3. Визуализация типов землепользования в растровом виде</figcaption>
</figure>
<p><kbd><strong>Снимок экрана №1.</strong> Растровый слой типов землепользования</kbd></p>
<blockquote>
<p>Увеличьте масштаб до величины порядка 1:2 000. Изучите отличия векторного и растрового слоя, поочередно отключая и включая векторный слой. Чем они отличаются?</p>
</blockquote>
<h2 id="расчет-углов-наклона">Расчет углов наклона</h2>
<p><a href="#выбор-оптимального-местоположения-средствами-растрового-анализа">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Найдите слой <em>DEM</em> в базе геоданных <em>Satino.gdb</em> и перенесите его в таблицу содержания карты. Поместите его вниз таблицы содержания под слой <em>Землепользование (растр)</em>.</p></li>
<li><p>Запустите инструмент вычисления углов наклона <strong>Spatial Analyst Tools &gt; Surface &gt; Slope</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Raster</td>
<td><code>DEM</code></td>
</tr>
<tr class="even">
<td>Output Raster</td>
<td><code>&lt;Фамилия&gt;\Ex3\Ex3.gdb\Slope</code></td>
</tr>
</tbody>
</table>
<p>Остальные параметры в диалоге оставьте по умолчанию. Его окно примет вид, аналогичный представленному на рисунке:</p>
<figure>
<img src="../images/Ex11/image7.png" alt="Рис. 6. Инструмент Slope для вычисления углов наклона" /><figcaption>Рис. 6. Инструмент Slope для вычисления углов наклона</figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить расчеты.</p></li>
<li><p>После того как слой углов наклона <em>Slope</em> добавится в таблицу содержания, переименуйте его в <em>Углы наклона</em>.</p></li>
</ol>
<p>Обратите внимание на то, что значения углов были классифицированы на несколько интервалов, которым был присвоен цвет:</p>
<figure>
<img src="../images/Ex11/image8.png" />
</figure>
<p>Эта классификация является динамической (то есть, применяется при визуализации слоя и никак не отражается на его хранении) и при желании ее можно поменять ее на вкладке <strong>Symbology</strong> в свойствах слоя.</p>
<h2 id="расчет-расстояний">Расчет расстояний</h2>
<p><a href="#выбор-оптимального-местоположения-средствами-растрового-анализа">К содержанию ⇡</a></p>
<h3 id="дороги">Дороги</h3>
<p>Чтобы определить участки, наиболее подходящие с точки зрения транспортной доступности, можно построить растр, в каждой ячейке которого будет содержится расстояние (евклидово) до ближайшей дороги.</p>
<ol type="1">
<li><p>Добавьте на карту слой дорог <em>General/Roads</em> из базы геоданных <em>Satino</em>.</p></li>
<li><p>Откройте пункт меню <strong>Selection &gt; Select by attributes</strong>, выберите для выборки слой <em>Дороги и тропы</em> и в конструктор запроса введите следующее выражение:</p>
<pre><code>&quot;Description&quot; = &#39;Асфальтированные&#39; OR &quot;Description&quot; = &#39;Проселочные&#39;</code></pre>
<p>Выборка позволит учитывать для при анализе только дороги (в слое также содержатся тропы). Окно запроса примет вид, аналогичный представленному на рисунке. Нажмите <strong>ОК</strong>:</p>
<figure>
<img src="../images/Ex11/image9.png" alt="Рис. 4. Выборка автомобильных дорог в диалоге атрибутивного запроса" /><figcaption>Рис. 4. Выборка автомобильных дорог в диалоге атрибутивного запроса</figcaption>
</figure></li>
<li><p>Постройте растр расстояний для выбранных дорог. Для этого запустите инструмент <strong>Spatial Analyst Tools &gt; Distance &gt; Euclidian Distance</strong>.</p></li>
<li><p>Выберите в качестве параметра <strong>Input Raster or Feature</strong> слой <em>Roads</em>. Остальные параметры оставьте по умолчанию. Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex11/image10.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. Получившийся растр будет добавлен на карту. Переименуйте его в <em>Расстояния до дорог</em>.</p></li>
<li><p>Очистите выборку в слое дорог, нажав кнопку <img src="../images/Ex11/image11.png" /> <strong>Clear Selected Features</strong> на панели инструментов <strong>Tools</strong>. Окно приложения примет следующий вид (обратите внимание на то, что расстояния были вычислены не для всех дорог, а только для выбранных):</p>
<figure>
<img src="../images/Ex11/image12.png" />
</figure></li>
</ol>
<h3 id="водотоки">Водотоки</h3>
<p>Выполните расчет расстояний до водотоков самостоятельно, руководствуясь краткой схемой:</p>
<ol type="1">
<li><p>Добавить на карту слой G<em>eneral/WaterPolygon</em> (Гидрография (Полигоны))</p></li>
<li><p>Выбрать вручную крупные реки (Протва, Исьма) с помощью инструмента <img src="../images/Ex11/image13.png" /> <strong>Select Features By Rectangle</strong> на панели инструментов <strong>Tools</strong>. Чтобы выбрать последовательно несколько объектов, вы можете зажать клавишу <kbd>Shift</kbd>:</p>
<figure>
<img src="../images/Ex11/image14.png" />
</figure></li>
<li><p>Запустить инструмент <strong>Euclidian Distance</strong> для слоя <em>Гидрография (полигоны)</em>. Все параметры оставить по умолчанию.</p></li>
<li><p>Получившийся после расчетов слой переименовать в <em>Расстояния до водотоков</em>. Если все выполнено правильно, то результат должен быть примерно следующим:</p>
<figure>
<img src="../images/Ex11/image15.png" />
</figure></li>
</ol>
<h2 id="классификация-углов-наклона">Классификация углов наклона</h2>
<p><a href="#выбор-оптимального-местоположения-средствами-растрового-анализа">К содержанию ⇡</a></p>
<p>Поскольку в анализе будет участвовать несколько факторов, необходимо привести их значения к общей балльной шкале от <em>1</em> до <em>10</em>. Для этого используется классификация растра.</p>
<ol type="1">
<li><p>Запустите инструмент классификации <strong>Spatial Analyst Tools &gt; Reclass &gt; Reclassify</strong>.</p></li>
<li><p>Выберите в качестве <strong>Input raster</strong> слой <em>Углы наклона</em>.</p></li>
<li><p>Нажмите кнопку <strong>Classify...</strong>, чтобы настроить классы.</p></li>
<li><p>Раскройте список методов классификации вверху диалогового окна.</p>
<blockquote>
<p>Какие методы классификации доступны в инструменте Reclass? Какие принципы в них заложены? Попробуйте выбрать разные методы классификации и посмотрите, как меняются границы классов.</p>
</blockquote></li>
<li><p>Выберите режим естественных интервалов <em>Natural Breaks (Jenks)</em> и установите количество интервалов равным <em>10</em>. Окно диалога примет вид, аналогичный представленному на рисунке.</p>
<figure>
<img src="../images/Ex11/image16.png" alt="Рис. 5. Классификация значений углов наклона методом естественных интервалов" /><figcaption>Рис. 5. Классификация значений углов наклона методом естественных интервалов</figcaption>
</figure>
<blockquote>
<p>Метод естественных интервалов минимизирует дисперсию внутри каждого класса и максимизирует отличия между классами</p>
</blockquote></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы завершить настройку метода классификации.</p></li>
<li><p>Нажмите кнопку <strong>Reverse new values</strong>, чтобы инвертировать значения классов (меньшие углы наклона должны иметь больший вес).</p></li>
<li><p>Остальные параметры оставьте по умолчанию. Окно диалога примет вид, аналогичный представленному на рисунке:</p>
<figure>
<img src="../images/Ex11/image17.png" alt="Рис. 6. Инструмент Reclassify" /><figcaption>Рис. 6. Инструмент Reclassify</figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить выполнение инструмента.</p></li>
<li><p>После того как в таблицу содержания будет добавлен слой классифицированных углов наклона, переименуйте его в <em>Углы наклона (классы).</em></p></li>
<li><p>Через свойства слоя на вкладке <strong>Symbology</strong> присвойте классам шкалу от зеленого к красному, так чтобы класс 1 был красным, а класс 10 был зеленым. Если у вас получилось наоборот, нажмите мышкой на заголовке столбца <strong>Symbol</strong> и выберите в меню <strong>Flip Colors</strong> (сменить порядок цветов на противоположный):</p>
<figure>
<img src="../images/Ex11/image18.png" alt="Рис. 9. Функция Flip Colors" /><figcaption>Рис. 9. Функция Flip Colors</figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong> в диалоге свойств слоя, чтобы закрыть его. Изображение должно принять следующий вид:</p>
<figure>
<img src="../images/Ex11/image19.png" />
</figure>
<p><kbd><strong>Снимок экрана №2.</strong> Классифицированные углы наклона</kbd></p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="классификация-расстояний">Классификация расстояний</h2>
<p><a href="#выбор-оптимального-местоположения-средствами-растрового-анализа">К содержанию ⇡</a></p>
<h3 id="дороги-1">Дороги</h3>
<ol type="1">
<li><p>Запустите инструмент <strong>Reclassify</strong>. Выберите в качестве <strong>Input raster</strong> слой <em>Расстояния до дорог</em>.</p></li>
<li><p>Нажмите кнопку <strong>Classify...</strong>, чтобы настроить классы.</p></li>
<li><p>Настройте метод классификации на <em>Geometric Intervals</em>, и установите число интервалов равным <em>10</em>. Метод геометрических интервалов позволяет сконцентрировать зоны с высокими баллами на небольшом расстоянии от дорог. Диалог настройки классификации примет вид, аналогичный представленному на рисунке. Нажмите <strong>ОК</strong>:</p>
<figure>
<img src="../images/Ex11/image20.png" alt="Рис. 11. Классификация расстояний до дорог методом геометрических интервалов" /><figcaption>Рис. 11. Классификация расстояний до дорог методом геометрических интервалов</figcaption>
</figure></li>
<li><p>Нажмите кнопку <strong>Reverse New Values</strong>, чтобы инвертировать номера классов и максимальный балл получили классы с малыми расстояниями.</p></li>
<li><p>Переименуйте выходной класс в <em>Reclass_Euc_Roads</em>. Остальные параметры оставьте по умолчанию. Диалог инструмента примет вид, аналогичный представленному на рисунке:</p>
<figure>
<img src="../images/Ex11/image21.png" alt="Рис. 12. Инструмент Reclassify для классификации расстояний до дорог" /><figcaption>Рис. 12. Инструмент Reclassify для классификации расстояний до дорог</figcaption>
</figure></li>
<li><p>Запустите вычисления, нажав кнопку <strong>ОК</strong>.</p></li>
<li><p>После того, как классифицированный растр расстояний до дорог появится на карте, переименуйте его в <em>Расстояния до дорог (классы)</em>.</p></li>
<li><p>Настройте отображение нового слоя на красно-зеленую шкалу, как обычно.</p></li>
<li><p>Удалите из таблицы содержания оригинальный слой <em>Расстояния до дорог</em>.</p></li>
</ol>
<h3 id="водотоки-1">Водотоки</h3>
<p>Выполните классификацию самостоятельно в соответствии со следующим планом:</p>
<ol type="1">
<li><p>Запустить инструмент <strong>Reclassify</strong> для слоя <em>Расстояния до водотоков</em>.</p>
<ul>
<li><p>В качестве метода классификации выбрать <em>Quantile</em> (квантили), число классов — <em>10</em>. Исправьте в столбце справа последнее значение на <em>2400</em>, чтобы заведомо включить максимум.</p></li>
<li><p>Инвертировать номера классов</p></li>
<li><p>Переименовать выходной слой в <em>Reclass_Euc_Water.</em></p></li>
</ul></li>
<li><p>Получившийся слой назвать <em>Расстояния до водотоков (классы)</em> и раскрасить в стандартной зелено-красной шкале.</p></li>
<li><p>Удалить из таблицы содержания оригинальный слой <em>Расстояния до водотоков</em>.</p></li>
<li><p>Снять выборку с объектов гидрографии.</p></li>
<li><p>Сохранить карту.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №3.</strong> Классифицированный растр расстояний до водотоков</kbd></p>
<h2 id="нахождение-мест-с-наилучшей-комбинацией-факторов-с-помощью-взвешенного-оверлея">Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</h2>
<p><a href="#выбор-оптимального-местоположения-средствами-растрового-анализа">К содержанию ⇡</a></p>
<p>Наилучшие участки соответствуют территориям, где сумма баллов по всем факторам максимальна. Соединение значений (в том числе и сложение) по нескольким слоям, располагающимся друг над другом, осуществляется с помощью растрового оверлея.</p>
<ol type="1">
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Overlay &gt; Weighted Overlay</strong>.</p></li>
<li><p>Исправьте значения полей <strong>From</strong>, <strong>To</strong> и <strong>By</strong> на <em>1</em>, <em>10</em> и <em>1</em>, соответственно. Тем самым вы укажете, что необходимо полученные суммы ранжировать по баллам с <em>1</em> до <em>10</em> с шагом в <em>1</em> балл.</p></li>
<li><p>Щелкните на кнопке <img src="../images/Ex11/image22.png" /> добавления слоя вверху диалога.</p></li>
<li><p>В появившемся диалоге выберите <em>Углы наклона (классы)</em> в списке <strong>Input Raster</strong>. Поле <strong>Input field</strong> поставьте по умолчанию. Нажмите <strong>ОК</strong>:</p>
<figure>
<img src="../images/Ex11/image23.png" alt="Рис. 13. Диалог выбора слоя для взвешенного оверлея" /><figcaption>Рис. 13. Диалог выбора слоя для взвешенного оверлея</figcaption>
</figure>
<p>Обратите внимание на появившуюся таблицу: она выводит значения классов, взятые из слоя (столбец <em>Field</em>), и позволяет сменить их (столбец <em>Scale Value</em>) при выполнении оверлея.</p>
<p>Необходимо запретить строительство на участках с углами наклона более <em>12,5</em> градусов. Такие углы наклона возможны в классах <em>1-5</em> (в соответствии с проведенной классификацией).</p></li>
<li><p>Щелкните на ячейке поля <em>Scale Value</em> напротив <em>1</em> класса и выберите из списка значение <em>Restricted</em> (запрещен).</p></li>
<li><p>Повторите эту операцию для <em>2</em>, <em>3</em>, <em>4</em> и <em>5</em> класса. Диалог инструмента примет вид, аналогичный представленному на рисунке:</p>
<figure>
<img src="../images/Ex11/image24.png" alt="Рис. 14. Настройка параметров классов для слоя углов наклона рельефа" /><figcaption>Рис. 14. Настройка параметров классов для слоя углов наклона рельефа</figcaption>
</figure></li>
<li><p>Добавьте в таблицу оверлея слои <em>Расстояния до дорог (классы)</em> и <em>Расстояния до водоемов (классы)</em> с помощью кнопки <img src="../images/Ex11/image22.png" />. Не меняйте значения классов в таблице.</p></li>
<li><p>Сверните таблицы классов, нажав кнопку <img src="../images/Ex11/image25.png" /> в начале каждой строки. Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex11/image26.png" alt="Рис. 15. Диалог взвешенного оверлея после добавления первых трех слоев." /><figcaption>Рис. 15. Диалог взвешенного оверлея после добавления первых трех слоев.</figcaption>
</figure></li>
<li><p>Добавьте в таблицу оверлея слой <em>Землепользование (растр)</em>. Однако на этот раз выберите для него в качестве поля со значениями классов <em>Land_Type</em>:</p>
<figure>
<img src="../images/Ex11/image27.png" alt="Рис. 16. Добавление в таблицу оверлея слоя Землепользование (растр)." /><figcaption>Рис. 16. Добавление в таблицу оверлея слоя Землепользование (растр).</figcaption>
</figure></li>
<li><p>Присвойте различным классам земель веса соответственно <strong>Рис. 17</strong>. Обратите внимание на то, что больший вес имеют территории, более доступные для размещения площадки. Заболоченные земли и объекты гидрографии необходимо запретить для выбора, указав им класс <em>Restricted</em>. В эту же категорию попадают участки, где нет данных.</p>
<figure>
<img src="../images/Ex11/image28.png" alt="Рис. 17. Настройка значений класса пригодности для слоя Землепользование (растр)" /><figcaption>Рис. 17. Настройка значений класса пригодности для слоя Землепользование (растр)</figcaption>
</figure>
<p>Осталось определиться с тем, какие факторы будут иметь максимальный вес. Заказчик решил, что приоритет в наборе факторов следует отдать близости к автодорогам. Среди остальных факторов меньше внимания можно уделить углам наклона рельефа, поскольку они уже были ограничены параметром <em>Restricted</em>.</p></li>
<li><p>Заполните веса в колонке <em>%Influence</em> следующим образом:</p>
<ul>
<li><p>Углы наклона — <em>15</em></p></li>
<li><p>Расстояния до дорог — <em>35</em></p></li>
<li><p>Расстояния до водоемов — <em>20</em></p></li>
<li><p>Землепользование — <em>30</em>.</p></li>
</ul>
<p>После заполнения весов диалог примет вид, аналогичный представленному на рисунке:</p>
<figure>
<img src="../images/Ex11/image29.png" alt="Рис. 18. Диалог инструмента Weighted Overlay после окончательной настройки параметров" /><figcaption>Рис. 18. Диалог инструмента Weighted Overlay после окончательной настройки параметров</figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить вычисления.</p></li>
<li><p>После того, как результат оверлея будет добавлен в таблицу содержания, переименуйте слой в <em>Комбинация факторов</em>.</p></li>
<li><p>Примените к полученному слою стандартную красно-зеленую шкалу.</p></li>
</ol>
<blockquote>
<p>Изучите получившееся изображение. Насколько оно отвечает тем требованиям, которые выдвигались при анализе факторов? Отмечается ли близость темно-зеленых участков в дорогам, водоемам? Каким цветом закрашены участки с крутыми склонами?</p>
</blockquote>
<h2 id="конвертация-результирующих-зон-в-векторный-формат">Конвертация результирующих зон в векторный формат</h2>
<p><a href="#выбор-оптимального-местоположения-средствами-растрового-анализа">К содержанию ⇡</a></p>
<p>В качестве потенциальных мест на размещение площадки следует выбрать 10-балльные участки. Затем можно конвертировать эти участки в векторный формат, чтобы получить границы.</p>
<ol type="1">
<li><p>Откройте атрибутивную таблицу слоя комбинаций и выделите строку со значением <em>10</em>. Пикселы этого классы подсветятся на карте.</p></li>
<li><p>Запустите инструмент <strong>Conversion Tools &gt; From Raster &gt; Raster to Polygon</strong>.</p></li>
<li><p>Выберите в качестве входного слой <em>Комбинация факторов</em> и нажмите <strong>ОК</strong>.</p></li>
<li><p>Переименуйте получившийся слой в <em>Потенциальные участки</em>. Обратите внимание, что полигональные объекты были построены только для тех пикселов, которые вы выделили на экране.</p></li>
<li><p>Смените цвет выделенных полигонов на ярко-желтый и нажмите кнопку <img src="../images/Ex11/image5.png" /> <strong>Full extent</strong>, чтобы вся карта поместилась на экран.</p></li>
</ol>
<h3 id="выбор-участков-имеющих-необходимую-площадь">Выбор участков, имеющих необходимую площадь</h3>
<p>Для выбора участков по площади следует использовать атрибутивный запрос</p>
<ol type="1">
<li><p>Откройте пункт меню <strong>Selection &gt; Select by attributes</strong>, выберите для выборки слой <em>Потенциальные участки.</em></p></li>
<li><p>В конструктор запроса введите следующее выражение:</p>
<pre><code>&quot;Shape_Area&quot; &gt; 30000</code></pre>
<p>Нажмите <strong>ОК</strong>. Результат вашей работы должен быть похож на рисунок ниже:</p>
<figure>
<img src="../images/Ex11/image30.png" alt="Рис. 19. Результат анализа: ярко-желтые полигоны участков, оптимальные для строительства. Выделен полигон, имеющий необходимую площадь более 30 000 м2" /><figcaption>Рис. 19. Результат анализа: ярко-желтые полигоны участков, оптимальные для строительства. Выделен полигон, имеющий необходимую площадь более 30 000 м<sup>2</sup></figcaption>
</figure>
<p><kbd><strong>Снимок экрана №4.</strong> Результат анализа: выбранный участок</kbd></p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="ответы-на-вопросы-4">Ответы на вопросы</h2>
<p><a href="#выбор-оптимального-местоположения-средствами-растрового-анализа">К содержанию ⇡</a></p>
<p>Заполните отчетный файл и положите его в сетевую папку для проверки преподавателем.</p>
<h1 id="сетевой-анализ">Сетевой анализ</h1>
<h2 id="введение-11">Введение</h2>
<p><strong>Цель</strong> --- научиться решать различные задачи логистики и оптимизации размещения с помощью сетевого анализа.</p>
<table style="width:11%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Поток</strong></td>
<td>==Экономико-географический==</td>
</tr>
<tr class="even">
<td><strong>Теоретическая подготовка</strong></td>
<td>Понятие о сетевой модели данных, граф дорожной сети, сетевой анализ и его основные задачи: кратчайший маршрут, зона обслуживания, ближайший пункт обслуживания, размещение-распределение, управление парком транспортных средств.</td>
</tr>
<tr class="odd">
<td><strong>Практическая подготовка</strong></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Инструмент геообработки. Настройка символики и подписей объектов. Выделение объектов на карте. Пространственные и атрибутивные запросы. Оверлей. Инструменты ArcToolbox.</td>
</tr>
<tr class="even">
<td><strong>Исходные данные</strong></td>
<td>Cлои картографической основы OpenStreetMap, граф дорожной сети на основе данных OpenStreetMap на территорию Москвы.</td>
</tr>
<tr class="odd">
<td><strong>Результат</strong></td>
<td>Маршрут до магазина. Зоны обслуживания магазина от 1 до 5 минут. Маршруты до ближайших магазинов. Результат размещения магазинов. Зонирование территории по принадлежности к магазинам. Проект карты зонирования с компоновкой</td>
</tr>
<tr class="even">
<td><strong>Ключевые слова</strong></td>
<td>Сетевой анализ, граф дорожной сети, оптимизация размещения, логистика.</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-10">Контрольный лист</h3>
<ul>
<li>[x] Добавить на карту, слой улиц и слой зданий, граф дорожной сети</li>
<li>[x] Поставить точку магазина и точку потребителя, построить маршрут</li>
<li>[x] Поставить барьер на маршруте и перестроить маршрут с учетом барьера</li>
<li>[x] Рассчитать зоны обслуживания магазина от 1 до 5 минут движения на автомобиле</li>
<li>[x] Поставить еще одну точку магазина и 5 точек потребителя, рассчитать маршруты до ближайшего магазина</li>
<li>[x] Добавить на карту точки потребителей, расставить 7 точек потенциальных магазинов, выполнить анализ с выбором 4 мест из потенциальных</li>
<li>[x] Выполнить районирование территории по зонам обслуживания магазинов.</li>
<li>[x] Оформить карту с основными элементами компоновки (легенда, масштаб и т.д.)</li>
</ul>
<h3 id="аннотация-10">Аннотация</h3>
<p>Задание посвящено знакомству с сетевым анализом. Задачи, предлагаемые в задании, связаны с определением оптимальных маршрутов, построением зон обслуживания, определением ближайших сервисных точек, размещением сервисных точек. Данные задачи активно используются в логистике — оптимизации перевозок, а также в геомаркетинге и оптимизации местоположения пунктов обслуживания (магазинов, складов, пожарных депо и т.д.). В основе решения этих задач лежит сетевая модель данных, являющаяся частным случаем векторной модели. В сетевой модели дорожная сеть представляется в виде графа.</p>
<h2 id="оформление-базовых-слоев-2">Оформление базовых слоев</h2>
<p><a href="#сетевой-анализ">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Подключитесь к базе геоданных <em>Ex4.gdb</em> в вашей папке <em>Ex4</em>.</p></li>
<li><p>Добавьте на карту слои <em>Buildings</em> (здания) и <em>Streets</em> (улицы).</p></li>
<li><p>Присвойте зданиям цвет серый (20%), уберите обводку (<strong>Outline Color — No Color</strong>).</p></li>
<li><p>Установите масштаб равным 1:10 000 для удобной работы с картой.</p></li>
<li><p>Включите подписи зданий со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Поле подписи</td>
<td>A_HSNMBR</td>
</tr>
<tr class="even">
<td>Цвет подписи</td>
<td>Серый 80%</td>
</tr>
<tr class="odd">
<td>Размер подписи</td>
<td>6 пунктов</td>
</tr>
</tbody>
</table></li>
<li><p>Присвойте дорогам серый цвет (60%) и включите их подписи со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Поле подписи</td>
<td>Name (tag value)</td>
</tr>
<tr class="even">
<td>Цвет подписи</td>
<td>Черный</td>
</tr>
<tr class="odd">
<td>Размер подписи</td>
<td>8 пунктов</td>
</tr>
<tr class="even">
<td>Начертание</td>
<td>Жирное</td>
</tr>
</tbody>
</table></li>
<li><p>Добавьте на карту граф дорожной сети <em>OSM</em>, который находится в наборе данных <em>OSM_nd</em> базы геоданных <em>Ex4</em>. В появившемся диалоге скажите <em>No</em> (Нет), чтобы не добавлять на карту поворотные точки и прочие вспомогательные элементы графа.</p></li>
<li><p>Задайте линиям графа такой же символ как и дорогам.</p></li>
<li><p>Сохраните документ карты в свою директорию <em>Ex4</em> под названием <em>Ex4_Network.mxd</em>.</p></li>
</ol>
<p>Примерный результат должен выглядеть так:</p>
<figure>
<img src="../images/Ex12/image6.png" />
</figure>
<p><kbd><strong>Снимок экрана №1</strong> Базовые слои: улицы, здания, граф дорожной сети</kbd></p>
<h2 id="построение-маршрута">Построение маршрута</h2>
<p><a href="#сетевой-анализ">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Включите модуль <strong>Network Analyst</strong> с помощью команды главного меню <strong>Customize—Extensions</strong></p></li>
<li><p>Включите панель инструментов <strong>Network Analyst</strong>:</p>
<figure>
<img src="../images/Ex12/image7.png" />
</figure>
<p>Если все правильно, в ниспадающем списке панели будет отображаться граф дорожной сети <em>OSM_nd</em></p></li>
<li><p>Создайте слой вычисления маршрутов с помощью команды <strong>Network Analyst &gt; New Route</strong>:</p>
<figure>
<img src="../images/Ex12/image8.png" />
</figure></li>
<li><p>Откройте окно <em>Network Analyst Window</em>:</p>
<figure>
<img src="../images/Ex12/image9.png" />
</figure></li>
</ol>
<p>Предположим, что по адресу ул. Профсоюзная, д.9 находится магазин. Вы проживаете по адресу ул. Шверника, д. 19. Необходимо построить прямой и обратный автомобильный маршрут.</p>
<ol type="1">
<li><p>Выделите в списке набор <em>Stops</em>, и, используя инструмент <em>Create Network Location</em>, поставьте на графе дорожной сети 2 точки:</p>
<ul>
<li>Рядом со зданием ул. Профсоюзная, д. 9</li>
<li>Рядом со зданием ул. Шверника, д. 19</li>
</ul>
<figure>
<img src="../images/Ex12/image10.png" />
</figure></li>
<li><p>Нажмите <em>Solve</em>, чтобы построить прямой маршрут:</p>
<figure>
<img src="../images/Ex12/image11.png" />
</figure>
<p><kbd><strong>Снимок экрана №2</strong>. Прямой маршрут</kbd></p></li>
<li><p>Поменяйте точки местами в окне <strong>Network Analyst</strong> чтобы построить обратный маршрут. Для этого перетащите нижнюю точку вверх списка. Запустите еще раз <strong>Solve</strong>:</p>
<figure>
<img src="../images/Ex12/image12.png" />
</figure>
<p><kbd> <strong>Снимок экрана №3</strong> . Обратный маршрут</kbd></p></li>
</ol>
<p>Допустим, по адресу проспект 60-летия Октября, д.29к1 ведутся ремонтные работы и движение перекрыто. Поставьте в этом месте барьер и перестройте маршрут. Для этого:</p>
<ol type="1">
<li><p>Выделите в окне <strong>Network Analyst</strong> пункт <strong>Point Barriers &gt; Restriction</strong> и поставьте точку на граф рядом со зданием проспект 60-летия Октября, д.29к1.</p></li>
<li><p>Перестройте маршрут:</p>
<figure>
<img src="../images/Ex12/image13.png" />
</figure>
<p><kbd><strong>Снимок экрана №4</strong> Обратный маршрут с барьером</kbd></p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="определение-зоны-обслуживания">Определение зоны обслуживания</h2>
<p><a href="#сетевой-анализ">К содержанию ⇡</a></p>
<p>Необходимо определить, какие здания попадают в зону доступности магазина в пределах 1-5 минут движения на автомобиле.</p>
<ol type="1">
<li><p>Отключите в таблице содержания слой <strong>Route</strong> (снимите галочку).</p></li>
<li><p>Создайте слой вычисления зон обслуживания с помощью команды <strong>Network Analyst &gt; New Service Area</strong>.</p></li>
<li><p>Выделите в окне <strong>Network Analyst</strong> слой <em>Facilities</em> (пункты обслуживания) и используя тот же инструмент <strong>Create Network Location</strong>, поставьте точку по адресу ул. Профсоюзная, д. 2/22 (пересечение с ул. Дмитрия Ульянова).</p>
<figure>
<img src="../images/Ex12/image14.png" />
</figure></li>
<li><p>Установите время езды до магазина равным 2 минуты. Для этого дважды щелкните на слое <em>Service Area</em> в таблице содержания, перейдите на вкладку <strong>Analysis Settings</strong> и поменяйте следующие настройки:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Default Breaks</td>
<td>2</td>
</tr>
<tr class="even">
<td>Direction</td>
<td>Towards Facility</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Режим <em>Towards Facility</em> означает, что движение будет моделироваться от потребителя к точке обслуживания</p>
</blockquote></li>
<li><p>Нажмите <strong>Solve</strong> на панели <strong>Network Analyst</strong>, чтобы построить зону обслуживания:</p>
<figure>
<img src="../images/Ex12/image15.png" />
</figure>
<p><kbd><strong>Снимок экрана №5</strong>. Зона обслуживания 2 мин</kbd></p></li>
<li><p>Постройте иерархию зон обслуживания от 1 до 5 минут. Для этого поменяйте значение параметра <strong>Breaks</strong> в настройках слоя <em>Service Area</em> на 1 2 3 4 5 (через пробелы):</p>
<figure>
<img src="../images/Ex12/image16.png" />
</figure></li>
<li><p>Перезапустите расчет зон обслуживания.</p>
<p>Примерный результат должен выглядеть следующим образом:</p>
<figure>
<img src="../images/Ex12/image17.png" />
</figure>
<p><kbd><strong>Снимок экрана №6</strong> Иерархия зон обслуживания от 1 до 5 мин</kbd></p></li>
</ol>
<p>Получив зоны обслуживания, вы можете выделить с их помощью здания и провести экономико-географический анализ. Для этого можно воспользоваться пространственной выборкой.</p>
<ol type="1">
<li><p>Раскройте список <strong>Polygons</strong> в окне <strong>Network Analyst</strong>, чтобы увидеть легенду слоя. Выберите зону <em>Graphic Pick 1: 1 – 2</em>, она соответствует интервалу движения от 1 до 2 минут до магазина. Соответствующий полигон подсветится на карте.</p></li>
<li><p>Откройте диалог пространственной выборки (<strong>Selection — Select By Location</strong>). Задайте в качестве целевого слоя <em>(Target) Buildings</em>, а в качестве слоя-источника (<strong>Source</strong>) — <em>Polygons</em> из группы <em>Service Area</em>. Отметьте галочкой <strong>Use selected features</strong>, чтобы пространственный запрос осуществлялся выбранной зоной. Диалог пространственной выборки примет следующий вид:</p>
<figure>
<img src="../images/Ex12/image18.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. На карте будут отобраны здания, попадающие в заданный интервал транспортной доступности:</p>
<figure>
<img src="../images/Ex12/image19.png" />
</figure>
<p><kbd><strong>Снимок экрана №7</strong> Выборка зданий</kbd></p>
<p>Полученную выборку зданий вы можете далее использовать для проведения статистического и географического анализа.</p></li>
<li><p>Сохраните документ карты</p></li>
</ol>
<h2 id="определение-ближайшего-пункта-обслуживания">Определение ближайшего пункта обслуживания</h2>
<p><a href="#сетевой-анализ">К содержанию ⇡</a></p>
<p>Предположим, что есть 2 магазина и 5 семей, которые живут в разных районах. Необходимо определить, какой магазин является ближайшим для каждой семьи и построить маршрут.</p>
<ol type="1">
<li><p>Отключите слой <em>Service Area</em> в таблице содержания и снимите выборку со всех объектов.</p></li>
<li><p>Создайте слой определения ближайшего пункта обслуживания с помощью команды <strong>Network Analyst — New Closest Facility</strong>.</p></li>
<li><p>Используя навыки предыдущего анализа, поставьте два пункта обслуживания (<em>Facilities</em>) по адресам:</p>
<ul>
<li>Ул. Вавилова д. 48</li>
<li>Ул. Новочеремушкинская, д. 23</li>
</ul></li>
<li><p>Поставьте 5 пунктов потребления (<em>Incidents</em>) по адресам:</p>
<ul>
<li><p>Ул Шверника, д. 19</p></li>
<li><p>Ленинский проспект, д. 44</p></li>
<li><p>Нахимовский проспект, д. 67</p></li>
<li><p>Проспект 60-летия Октября, д. 19</p></li>
<li><p>Ул. Кржижановского, д. 16к1</p></li>
</ul></li>
<li><p>Нажмите <strong>Solve</strong>, чтобы запустить расчет маршрутов.</p></li>
</ol>
<p>Инструмент выберет ближайшие пункты обслуживания (магазины) для каждого потребителя и построит маршруты:</p>
<figure>
<img src="../images/Ex12/image20.png" />
</figure>
<p><kbd> <strong>Снимок экрана №8</strong>. Ближайшие пункты обслуживания</kbd></p>
<h2 id="размещениераспределение">Размещение—распределение</h2>
<p><a href="#сетевой-анализ">К содержанию ⇡</a></p>
<p>Задача размещения—распределения (location-allocation) звучит следующим образом: есть <em>N</em> потенциальных точек для размещения пунктов обслуживания (магазины, кафе, пожарные станции, транспортные узлы, сервисные центры и т.д.), а также <em>K</em> точек потребления (обычно это здания, из которых выезжают люди за услугами, или к которым эти услуги поставляются). Необходимо из <em>N</em> точек обслуживания выбрать <em>n</em> ≤ <em>N</em> точек таким образом, чтобы минимизировать некую стоимостную функцию (например, суммарное время движения от каждого пункта потребления до ближайшего пункта обслуживания). После чего распределить точки по ближайшим пунктам обслуживания. Данный тип анализа позволяет также моделировать противостояние конкурирующих сетей обслуживания и подбирать оптимальные места размещения пунктов для максимального охвата рынка.</p>
<ol type="1">
<li><p>Отключите слой Closest Facility в таблице содержания</p></li>
<li><p>Создайте слой размещения—распределения с помощью команды <strong>Network Analyst &gt; New Location-Allocation</strong>.</p></li>
<li><p>Расставьте потенциальные пункты обслуживания (<em>Facilities</em>) по следующим адресам:</p>
<ul>
<li><p>Ул. Большая Черемушкинская, д.11к3</p></li>
<li><p>Ул. Дмитрия Ульянова, д. 42</p></li>
<li><p>Ул. Профсоюзная, д. 19</p></li>
<li><p>Ленинский проспект, д. 67</p></li>
<li><p>Ленинский проспект, д. 44</p></li>
<li><p>Проспект 60-летия Октября, д. 19к1</p></li>
<li><p>Ул. Дмитрия Ульянова, 26к1</p></li>
</ul></li>
<li><p>Добавьте на карту слой <em>Points</em> из базы геоданных <em>Ex4</em>. Это слой центроидов зданий, необходимый для загрузки точек потребления.</p></li>
<li><p>Сделайте точки черного цвета диаметром 3 пункта</p>
<p>Изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex12/image21.png" />
</figure></li>
<li><p>Загрузите точки в пункты потребления. Для этого щелкните правой кнопкой мыши на строке <em>Demand Points</em> окна <strong>Network Analyst</strong> и выберите команду <strong>Load Locations</strong>:</p>
<figure>
<img src="../images/Ex12/image22.png" />
</figure></li>
<li><p>В появившемся диалоге выберите в списке <strong>Load From</strong> слой <em>Points</em> и нажмите <em>ОК</em>. Потребуется некоторое время, чтобы точки привязались к графу дорожной сети. За процессом вы можете следить в строке состояния приложения (внизу).</p>
<figure>
<img src="../images/Ex12/image23.png" />
</figure></li>
<li><p>Дважды щелкните на слое <em>Location-Allocation</em> в таблице содержания, чтобы изменить настройки анализа. Перейдите на вкладку <em>Advanced Settings</em>:</p>
<figure>
<img src="../images/Ex12/image24.png" />
</figure></li>
<li><p>Попробуйте выбрать различные варианты решения задачи в списке <strong>Problem Type</strong> и прочитайте их описание. Подумайте, где можно применить такой анализ.</p></li>
<li><p>Выберите режим <em>Minimize Impedance</em> (минимизировать суммарное время движения от потребителей к ближайшим пунктам обслуживания).</p></li>
<li><p>Установите количество отбираемых кандидатов (<em>Facilities to Choose</em>) равное <em>4</em>.</p>
<figure>
<img src="../images/Ex12/image25.png" />
</figure></li>
<li><p>Установите направление движения <em>Demand to Facility</em> (потребитель к услугам) на вкладке <em>Analysis Settings</em>:</p>
<figure>
<img src="../images/Ex12/image26.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong> и запустите решение задачи на панели <strong>Network Analyst</strong>. Будут выбраны 4 наиболее оптимальных пункта обслуживания, а здания будут распределены между ними в виде веерной диаграммы. Программа выдаст предупреждение, что некоторые точки оказались непривязанными — проигнорируйте его. Это связано с тем, что некоторые здания по краям области транспортно недоступны, поскольку к ним требуется подъезд извне изучаемого района. Вы можете их видеть по отсутствию исходящих линий.</p>
<figure>
<img src="../images/Ex12/image27.png" />
</figure>
<p><kbd><strong>Снимок экрана №9</strong> Результат размещения — распределения</kbd></p></li>
<li><p>Сохраните документ карты</p></li>
</ol>
<h2 id="районирование-города-по-зонам-обслуживания">Районирование города по зонам обслуживания</h2>
<p><a href="#сетевой-анализ">К содержанию ⇡</a></p>
<p>На основе полученного распределения можно произвести районирования территории. Для этого вы построите диаграмму Вороного точек потребления и объедините полигоны, отнесенные к одному пункту обслуживания.</p>
<ol type="1">
<li><p>Исключите нераспределенные точки. Для этого дважды щелкните на слое <em>Demand Points</em> в таблице содержания, перейдите на вкладку <strong>Definition Query</strong>, нажмите <strong>Query Builder</strong> и введите следующий запрос:</p>
<pre><code>&quot;FacilityID&quot; IS NOT NULL</code></pre>
<figure>
<img src="../images/Ex12/image28.png" />
</figure></li>
<li><p>Создайте в вашем каталоге <em>Ex4</em> базу геоданных <em>Regions.gdb</em> и назначьте ее базой данных по умолчанию:</p>
<figure>
<img src="../images/Ex12/image29.png" />
</figure></li>
<li><p>Откройте <strong>ArcToolbox</strong>.</p></li>
<li><p>Запустите инструмент геообработки <strong>Analysis Tools &gt; Proximity &gt; Create Thiessen Polygons</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Features</td>
<td>Location-Allocation\Demand Points</td>
</tr>
<tr class="even">
<td>Output Features</td>
<td>…\Ex4\Regions.gdb\DemandPoints_Voronoy</td>
</tr>
<tr class="odd">
<td>Output Fields</td>
<td>ALL</td>
</tr>
</tbody>
</table>
<p>Запустите инструмент. Полученный слой будет добавлен на карту и будет иметь следующую структуру:</p>
<figure>
<img src="../images/Ex12/image30.png" />
</figure></li>
</ol>
<blockquote>
<p><em>Диаграмма Вороного</em> обладает следующим свойством: какую бы точку мы не взяли внутри каждого полигона, она будет ближе к центроиду этого полигона, чем к любому другому центроиду.</p>
</blockquote>
<p>Объединив полигоны Вороного, точки которых отнесены к одному и тому же пункту обслуживания, вы получите районирование территории по зонам обслуживания. Для этого:</p>
<ol type="1">
<li><p>Запустите инструмент <strong>Data Management Tools &gt; Generalization &gt; Dissolve</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Features</td>
<td>DemandPoints_Voronoy</td>
</tr>
<tr class="even">
<td>Output Feature Class</td>
<td>…\Ex4\Regions.gdb\Regions</td>
</tr>
<tr class="odd">
<td>Dissolve Field (s)</td>
<td>FacilityID</td>
</tr>
</tbody>
</table>
<p>Остальные параметры оставьте по умолчанию. Диалог инструмента примет следующий вид:</p>
<figure>
<img src="../images/Ex12/image31.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. После обработки слой районирования будет добавлен на карту.</p></li>
<li><p>Отключите слои диаграммы Вороного, а также точек зданий.</p></li>
<li><p>Переместите слой Regions под слои зданий и дорог.</p></li>
<li><p>Измените оформление слоя Regions следующим образом:</p>
<ul>
<li><p>Способ изображения <strong>Categories — Unique Values</strong></p></li>
<li><p>Поле отображения <em>Facility ID</em></p></li>
<li><p>Цвета отображения спокойные, пастельные, одинаковые по насыщенности.</p></li>
<li><p>Обводка полигонов отсутствует. Чтобы убрать обводку сразу у всех плашек, щелкните на заголовке столбца <strong>Symbol</strong>, выберите пункт <strong>Properties for All Symbols</strong> и установите параметр <strong>Outline Color</strong> в положение <strong>No Color</strong>.</p></li>
</ul>
<p>Примерный вид диалога свойств слоя <em>Regions</em> выглядит следующим образом:</p>
<figure>
<img src="../images/Ex12/image32.png" />
</figure></li>
<li><p>Нажмите <em>ОК</em>, чтобы завершить оформление</p></li>
<li><p>В слое <em>Location-Allocation</em> оставьте включенным только слой <em>Facilities</em>.</p></li>
<li><p>Выгрузите отобранные пункты в отдельный слой. Для этого в окне <strong>Network Analyst</strong> выделите в списке <em>Facilities</em> пункты, помеченные звездочками (зажав клавишу <kbd>Ctrl</kbd>). Далее в контекстном меню слоя <em>Facilities</em> выберите команду <strong>Export Data</strong>.</p>
<figure>
<img src="../images/Ex12/image33.png" />
</figure></li>
<li><p>Сохраните выборку в базу геоданных <em>Regions.gdb</em> под названием <em>Selected</em>:</p>
<figure>
<img src="../images/Ex12/image34.png" />
</figure></li>
<li><p>На вопрос добавить ли созданный слой на карту, ответьте утвердительно. Переименуйте слой в «<em>Пункты обслуживания</em>». Визуализируйте слой методом категорий (<strong>Categories — Unique Values</strong>) по полю <em>Name</em>. В качестве символа используйте кружки диаметром 16 пунктов. Цвет кружков приведите в соответствии с цветом зоны, но сделайте его более ярким и насыщенным.</p></li>
<li><p>Проделайте аналогичную операцию для не выбранных пунктов обслуживания, выделив их в списке. Сохраните их в базу геоданных под названием Rejected. Полученный слой на карте назовите «<em>Не выбранные пункты обслуживания</em>» Присвойте полученному слою единый символ в виде темно-серого кружка диаметром 12 пунктов.</p></li>
<li><p>Включите подписи номеров районов по полю <em>FacilityID</em> (размер шрифта 18)</p></li>
<li><p>Отключите слой <em>Location-Allocation</em> целиком.</p></li>
</ol>
<p>Ваш проект примет следующий вид:</p>
<figure>
<img src="../images/Ex12/image35.png" />
</figure>
<p><kbd><strong>Снимок экрана №10</strong> Районирование территории</kbd></p>
<h2 id="компоновка-карты-2">Компоновка карты</h2>
<p><a href="#сетевой-анализ">К содержанию ⇡</a></p>
<p>Оформите карту в режиме компоновки в соответствии с нижеприведенным образцом. Экспортируйте результат в графический файл и вставьте его в отчет.</p>
<figure>
<img src="../images/Ex12/image36.png" />
</figure>
<h2 id="ответы-на-вопросы-5">Ответы на вопросы</h2>
<p><a href="#сетевой-анализ">К содержанию ⇡</a></p>
<p>Заполните отчетный файл и положите его в сетевую папку для проверки преподавателем.</p>
<h1 id="геометрическое-моделирование-речной-сети">Геометрическое моделирование речной сети</h1>
<h2 id="введение-12">Введение</h2>
<p><strong>Цель задания</strong> --- научиться моделировать речную сеть с помощью геометрических методов.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td><kbd>Гидрометпоток</kbd></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Сетевая модель данных, сетевой анализ, определение кратчайшего маршрута.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Работы с базой пространственных данных. Настройка символики и подписей объектов.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>База данных ГИС “Сатино”.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>Набор данных геометрической сети в базе пространственных данных. Результаты сетевого анализа</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Геометрические сети, сетевой анализ</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-11">Контрольный лист</h3>
<ul>
<li>[x] Добавить на карту слои линейной и площадной гидрографии</li>
<li>[x] Оцифровать недостающие сегменты линейного слоя гидрографии</li>
<li>[x] Разрезать линейный слой гидрографии в узлах сочленения водотоков</li>
<li>[x] Построить геометрическую сеть на основе полученного линейного слоя</li>
<li>[x] Выполнить упражнения по анализу построенной геометрической сети</li>
</ul>
<h3 id="аннотация-11">Аннотация</h3>
<p>Речные системы, транспортные и инженерные коммуникации — это примеры пространственных сетей. Сети играют огромную роль в географическом пространстве, их можно найти практически на любой карте, они учитываются в виде факторов во многих географических задачах. Основная функция сетей — перенос вещества и данных. Отличительной особенностью сетей является направленность линейных отрезков и их топологическая связность в местах сочленения, таких как слияния рек, перекрестки дорог, разветвления трубопроводов.</p>
<p>В этом задании вы приобретете навыки по созданию и редактированию линейных и точечных объектов, построите геометрическую сеть речной системы на их основе и научитесь делать простой сетевой анализ — построение маршрутов, трассировка водотоков вверх по течению. Полученные навыки пригодятся при изучении сетей других типов: инженерных и транспортных.</p>
<h2 id="создание-набора-данных-речной-сети">Создание набора данных речной сети</h2>
<p><a href="#геометрическое-моделирование-речной-сети">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Откройте <strong>ArcMap</strong>.</p></li>
<li><p>Сохраните карту через команду меню <strong>File &gt; Save</strong> в вашей директории <em>Ex13</em> под именем <em>Ex13_Реки.mxd</em>. Это необходимо для того, чтобы у вас появилась домашняя директория в окне каталога.</p></li>
<li><p>Откройте окно <img src="../images/Ex13/image2.png" /> <strong>Каталога</strong>. Найдите вверху домашнюю директорию <em>Home</em> — это каталог <em>Ex13</em>, куда вы сохранили документ карты.</p></li>
<li><p>Добавьте на карту слои <img src="../images/Ex13/image3.png" /> <em>WaterPolygon</em> и <img src="../images/Ex13/image4.png" /> <em>WaterLine</em> из базы <img src="../images/Ex13/image5.png" /> <em>Satino.gdb</em>.</p></li>
</ol>
<blockquote>
<p>Перед вами два представления речной сети: линейное и площадное. Подумайте, в каких задачах необходимо одно представление, а в каких — другое?</p>
</blockquote>
<p>Чтобы обеспечить связность гидрографической сети, следует преобразовать площадное представление крупных водотоков в линейное. Для этого необходимо вручную оцифровать осевую линию реки, притянуть устья притоков к этой осевой линии, а затем разрезать осевую линию в узлах пересечения (в дальнейшем это позволит при трассировке «сворачивать» с одного водотока на другой).</p>
<ol type="1">
<li><p>Щелкните правой кнопкой мыши по домашнему каталогу (Home) и выберите <strong>New &gt; File Geodatabase</strong> для того, чтобы создать новую базу геоданных.</p></li>
<li><p>Назовите ее <em>Ex13.</em></p></li>
<li><p>Щелкните по <em>Ex13.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong>. Эта команда указывает системе, что все результаты обработки данных следует помещать в выбранную базу геоданных.</p></li>
<li><p>Добавьте в базу геоданных <em>Ex13.gdb</em> новый набор данных <em>Hydro</em>. Для этого щелкните правой кнопкой мыши на названии базы геоданных и в контекстном меню выберите <strong>New &gt; Feature Dataset</strong> (<strong>Рис. 1</strong>).</p>
<figure>
<img src="../images/Ex13/image6.png" alt="Рис. 1. Создание нового набора данных (Feature Dataset)" /><figcaption><em>Рис. 1. Создание нового набора данных (Feature Dataset)</em></figcaption>
</figure></li>
<li><p>В появившемся окне введите название набора данных <em>Hydro</em>.</p></li>
<li><p>В следующем окне вам просят задать проекцию. Щелкните на кнопке <img src="../images/Ex13/image7.png" /> <strong>Add Coordinate System</strong> и в ниспадающем меню выберите команду Import. Найдите слой Border базе геоданных Satino.gdb и дважды кликните на нем. Параметры проекции автоматически подставятся из созданного ранее слоя. Убедитесь, что проекция называется <em>WGS_1984_UTM_Zone_37N</em>.</p></li>
<li><p>Нажмите Далее и во всех оставшихся диалогах оставьте параметры по умолчанию.</p></li>
<li><p>Создайте новый класс пространственных объектов <em>Streams</em> внутри набора данных <em>Hydro</em>. Для этого щелкните правой кнопкой мыши по набору данных Hydro и в контекстном меню выберите пункт <strong>New—Feature Class</strong>.</p></li>
<li><p>В первом диалоге введите название класса <em>Streams</em>, его псевдоним (alias) <em>Водотоки</em> и из ниспадающего списка выберите тип класса <em>Line Features</em> (<strong>Рис. 2</strong>). Нажмите Далее два раза, чтобы пропустить второй диалог.</p>
<figure>
<img src="../images/Ex13/image8.png" alt="Рис. 2. Диалог создания линейного класса пространственных объектов" /><figcaption><em>Рис. 2. Диалог создания линейного класса пространственных объектов</em></figcaption>
</figure>
<p>В появившемся (третьем) диалоге (<strong>Рис. 3</strong>) вас просят определить состав атрибутивных полей для слоя. Здесь можно сделать это вручную, однако мы воспользуемся импортом.</p>
<figure>
<img src="../images/Ex13/image9.png" alt="Рис. 3. Определение атрибутивных полей для класса Streams" /><figcaption><em>Рис. 3. Определение атрибутивных полей для класса Streams</em></figcaption>
</figure></li>
<li><p>Нажмите кнопку <strong>Import</strong> и найдите класс <em>WaterLine</em> в базе геоданных <img src="../images/Ex13/image5.png" /> <em>Satino.gdb</em>, дважды щелкните на нем. Названия и типы полей автоматически подставятся в список (<strong>Рис. 3</strong>).</p></li>
<li><p>Нажмите <strong>Finish</strong>. Проверьте, чтобы в вашей таблице содержания было 3 слоя: <em>Водотоки</em>, <em>Гидрография (линии)</em> и <em>Гидрография (полигоны)</em>.</p></li>
</ol>
<h2 id="копирование-и-цифрование-линий-водотоков">Копирование и цифрование линий водотоков</h2>
<p><a href="#геометрическое-моделирование-речной-сети">К содержанию ⇡</a></p>
<p>Для того чтобы собрать речную сеть, можно скопировать уже существующие линейные водотоки в созданный вами слой, а затем <em>оцифровать</em> недостающие водотоки (Протва и Исьма).</p>
<blockquote>
<p><strong>Цифрование</strong> — это процесс получения векторных объектов на основе изображения. При ручной оцифровке пользователь ГИС самостоятельно рисует линии, обводит полигоны, расставляет точки поверх растрового изображения, в котором эти объекты нарисованы. Существуют также методы цифрования, которые решают эту задачу в полуавтоматическом режиме, когда система пытается самостоятельно распознать и векторизовать объекты, а пользователь затем исправляет ошибки и недочеты в результатах цифрования. Типичный пример — перевод отсканированной бумажной топографической карты в набор векторных слоев базы пространственных данных.</p>
</blockquote>
<ol type="1">
<li><p>Щелкните правой кнопкой мыши на слое <em>Водотоки</em> и выберите пункт меню <strong>Edit Features &gt; Start Editing</strong>, чтобы начать редактирование.</p></li>
<li><p>Выделите все водотоки из слоя <em>Гидрография (линии)</em>. Для этого щелкните правой кнопкой мыши по слою <em>Гидрография (линии)</em> и в контекстном меню выберите пункт <strong>Selection &gt; Select All</strong>. Скопируйте выделенные водотоки в буфер обмена через команду главного меню <strong>Edit &gt; Copy</strong>.</p></li>
<li><p>Вставьте скопированные объекты в слой <em>Водотоки</em>. Для этого воспользуйтесь стандартной командой главного меню <strong>Edit &gt; Paste</strong> и в появившемся диалоге выберите в качестве целевого слой <em>Водотоки</em>.</p></li>
<li><p>Снимите выделение с водотоков, нажав кнопку <img src="../images/Ex13/image10.png" /> <strong>Clear Selected Features</strong> на панели инструментов <strong>Tools</strong>.</p></li>
<li><p>Удалите слой <em>Гидрография (линии)</em> из таблицы содержания. В этом задании он больше вам не понадобится.</p></li>
<li><p>Переключитесь в окно <strong>Create Features</strong> c помощью кнопки <img src="../images/Ex13/image11.png" /> на панели <strong>Tools</strong> (<strong>Рис. 4</strong>) и выберите <em>Водотоки</em> в списке цифруемых объектов:</p>
<figure>
<img src="../images/Ex13/image12.png" alt="Рис. 4. Панель Create Features" /><figcaption><em>Рис. 4. Панель Create Features</em></figcaption>
</figure></li>
<li><p>Приблизьтесь к верховьям <em>Протвы</em> в западной части карты. Для навигации используйте колесико мыши (масштабирование) и кнопку <kbd>C</kbd> на клавиатуре (перемещение). Рекомендуемый диапазон масштабов для цифрования — <em>1:1 500–1:2000</em>. Вы можете его отслеживать вверху окна.</p></li>
<li><p>Щелкните посередине полигона в месте начала реки и начните цифровать линию примерно по осевой линии полигона с определенным интервалом. Щелкните мышью в месте, где вы хотите поставить точку, затем переместите курсор к месту следующей точки, щелкните еще раз, и так далее. Не увлекайтесь и не расставляйте точки слишком часто. Оцифруйте осевую линию Протвы целиком с запада на восток — это займет у вас некоторое время.</p></li>
<li><p>Когда линия будет полностью оцифрована, щелкните дважды мышью в последней точке, или нажмите <kbd>F2</kbd>.</p>
<figure>
<img src="../images/Ex13/image13.png" alt="Рис. 5. Оцифровка осевой линии реки и окно Create Features" /><figcaption><em>Рис. 5. Оцифровка осевой линии реки и окно Create Features</em></figcaption>
</figure>
<p>Советы по цифрованию:</p>
<blockquote>
<p>Если вам <strong>мешает плавающее окно дополнительных функций</strong>, нажмите клавишу TAB.<br />
Если ваш <strong>курсор подошел к границе окна</strong>, зажмите клавишу <kbd>C</kbd> на клавиатуре и переместите карту. Отпустите клавишу C и продолжайте цифрование.<br />
Если вы <strong>поставили точку не в том месте</strong>, где хотели, нажмите <kbd>Ctrl</kbd> + <kbd>Z</kbd>, чтобы отменить действие.<br />
Если вы <strong>случайно завершили цифрование</strong> раньше, чем требуется, начните с последней точки. Ничего страшного, если у вас получится <em>2-3</em>, а не одна линия — их всегда можно объединить.<br />
Если вы <strong>хотите сдвинуть вершину</strong>, выберите стрелку на панели редактирования и дважды щелкните на линии — появятся вершины. После того, как сдвинете нужные точки, щелкните курсором на пустом месте карты.<br />
Если <strong>курсор в узком месте назойливо притягивается к границе реки</strong>, попробуйте увеличить масштаб изображения.</p>
</blockquote></li>
<li><p>Повторите операцию цифрования для реки <em>Исьмы</em> от ее верховья до устья. Последнюю точку поставьте на осевой линии <em>Протвы</em>.</p></li>
<li><p>Сохраните изменения, выбрав на панели <strong>Editor</strong> команду <strong>Editor &gt; Save Edits</strong>.</p></li>
<li><p>Снимите выделение с водотоков, нажав кнопку <img src="../images/Ex13/image10.png" /> <strong>Clear Selected Features</strong> на панели инструментов <strong>Tools</strong>.</p></li>
<li><p>Нажмите глобус <img src="../images/Ex13/image14.png" /> <strong>Full extent</strong>, чтобы все объекты поместились на экране.</p></li>
</ol>
<h2 id="притягивание-снэппинг-притоков-и-разрезание-осевой-линии-основных-рек">Притягивание (снэппинг) притоков и разрезание осевой линии основных рек</h2>
<p><a href="#геометрическое-моделирование-речной-сети">К содержанию ⇡</a></p>
<p>Вы помните, что ранее оцифрованные притоки <em>Протвы</em> и <em>Исьмы</em> были пристыкованы к полигональной границе реки. Возникает вопрос: сохранился ли этот характер соседства после того, как вы заменили полигональное представление рек на линейное?</p>
<ol type="1">
<li><p>Найдите устье реки <em>Межиловки</em> при впадении в <em>Протву</em> (западная часть полигона) и увеличьтесь так, чтобы было хорошо видно место впадения.</p>
<blockquote>
<p>Какая топологическая ошибка может быть замечена в месте впадения ручья в Протву?</p>
</blockquote></li>
<li><p>Возьмите стрелку <img src="../images/Ex13/image15.png" /> на панели <strong>Editor</strong> и дважды щелкните на линии ручья. Должны появиться вершины. Потяните за последнюю вершину и пристыкуйте ее к линии реки (<strong>Рис. 6</strong>). Щелкните на пустом месте, чтобы завершить редактирование.</p>
<p><img src="../images/Ex13/image16.png" alt="Рис. 6. Притягивание устья притока к осевой линии реки" /> <img src="../images/Ex13/image17.png" /></p></li>
<li><p>Повторите операцию для всех остальных ручьев. Перемещайтесь по карте, используя клавишу <kbd>C</kbd>. Не забудьте также про <em>Исьму</em>. Сохраните изменения, выбрав команду <strong>Editor &gt; Save Edits</strong></p>
<p>Помимо сохранения связности для геометрической сети очень важно, чтобы линии были разрезаны на сегменты между пересечениями. Это необходимо для того чтобы отличать реальные узлы от перекрытий (сравните обычный перекресток и эстакаду!).</p></li>
<li><p>Выделите на карте <em>Протву</em> и приблизьтесь к месту впадения в нее реки <em>Межиловки</em>.</p></li>
<li><p>Найдите на панели <strong>Editor</strong> инструмент разрезания линии <img src="../images/Ex13/image18.png" /> и щелкните мышью в месте впадения ручья в <em>Протву</em>. Линия <em>Протвы</em> разобьется этой точкой на 2 части.</p></li>
<li><p>Повторите процедуру с выделением <em>Протвы</em> и разрезанием для всех остальных притоков.</p></li>
<li><p>Разрежьте аналогичным образом остальные водотоки.</p></li>
<li><p>Сохраните изменения, выбрав команду <strong>Editor &gt; Save Edits</strong>. Завершите редактирование, выбрав команду <strong>Editor &gt; Stop Editing</strong>.</p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="установка-точки-стока">Установка точки стока</h2>
<p><a href="#геометрическое-моделирование-речной-сети">К содержанию ⇡</a></p>
<p>Подготовленных вами данных уже достаточно для того, чтобы построить геометрическую сеть. Однако в общем случае сеть является двунаправленной (например, транспортная), а наша сеть имеет вполне определенное направление — вниз по течению. Чтобы задать это направление, необходимо создать новый точечный слой и поставить в нем одну точку, расположенную ниже всего по течению.</p>
<ol type="1">
<li><p>Перейдите в окно Каталога, щелкните правой кнопкой мыши по набору данных <em>Hydro</em> и выберите пункт <strong>New &gt; Feature Class</strong>.</p></li>
<li><p>Задайте классу имя <em>Sink</em> и точечный тип <em>Point Features</em>. Остальные параметры оставьте по умолчанию.</p></li>
<li><p>Смените символ слоя <em>Sink</em> на кружок голубого цвета диаметром <em>10</em> пикселов.</p></li>
<li><p>Включите режим редактирования с помощью команды <strong>Edit Features &gt; Start Editing</strong>, в окне <strong>Create Features</strong> выберите <em>Sink</em> и поставьте точку на восточной оконечности реки Протвы (правый край карты).</p></li>
<li><p>Сохраните изменения и завершите режим редактирования.</p></li>
<li><p>Добавьте на карту слой горизонталей <em>ContoursBasic</em> из базы данных <img src="../images/Ex13/image5.png" /> <em>Satino.gdb</em> и смените цвет линий на бледно-серый. Переместите его вниз в качестве основы.</p></li>
<li><p>Отключите слой <em>Гидрография (полигоны)</em> и нажмите кнопку <img src="../images/Ex13/image14.png" /> <strong>Full extent</strong>, чтобы вся территория полигона поместилась на экране.</p></li>
</ol>
<figure>
<img src="../images/Ex13/image19.png" alt="Рис. 7. Линейный слой водотоков, горизонтали и точка стока" /><figcaption><em>Рис. 7. Линейный слой водотоков, горизонтали и точка стока</em></figcaption>
</figure>
<p><kbd><strong>Снимок экрана №1.</strong> Линейный слой водотоков, горизонтали и точка стока</kbd></p>
<h2 id="построение-и-настройка-геометрической-сети">Построение и настройка геометрической сети</h2>
<p><a href="#геометрическое-моделирование-речной-сети">К содержанию ⇡</a></p>
<p>Ваши данные полностью готовы к тому, чтобы построить на их основе геометрическую сеть.</p>
<ol type="1">
<li><p>Перейдите в окно <strong>Каталога</strong>, щелкните правой кнопкой мыши по набору данных <em>Hydro</em> и выберите пункт <strong>New &gt; Geometric Network</strong>.</p></li>
<li><p>Оставьте <em>Hydro_Net</em> в качестве имени по умолчанию и установите расстояние принудительного снэппинга линий равным 1 м (<strong>Рис. 8</strong>). Эта опция будет полезна, если вы где-то не дотянули устье притока до реки. Оно дотянется автоматически. Нажмите <strong>Далее</strong>.</p>
<figure>
<img src="../images/Ex13/image20.png" alt="Рис. 8. Имя геометрической сети и параметры снэппинга" /><figcaption><em>Рис. 8. Имя геометрической сети и параметры снэппинга</em></figcaption>
</figure></li>
<li><p>В следующем окне нажмите <strong>Select All</strong>, чтобы выбрать слои, участвующие в построении сети (<strong>Рис. 9</strong>). Нажмите <strong>Далее</strong>.</p>
<figure>
<img src="../images/Ex13/image21.png" alt="Рис. 9. Выбор слоев, участвующих в построении сети" /><figcaption><em>Рис. 9. Выбор слоев, участвующих в построении сети</em></figcaption>
</figure></li>
<li><p>Перед вами окажется диалог настройки ролей. <em>Junction</em> — это узел, <em>Edge</em> — это ребро. Для слоя Sink установите значение параметра <strong>Sources &amp; Sinks</strong> равным <em>Yes</em>. Система будет знать, что этот слой содержит точки, являющиеся истоками либо стоками (<strong>Рис. 10</strong>). Нажмите <strong>Далее</strong>.</p>
<figure>
<img src="../images/Ex13/image22.png" alt="Рис. 10. Установка ролей слоев в геометрической сети" /><figcaption><em>Рис. 10. Установка ролей слоев в геометрической сети</em></figcaption>
</figure></li>
<li><p>Во всех остальных диалогах оставьте параметры по умолчанию. Нажмите <strong>Finish</strong> в последнем диалоге, чтобы завершить создание сети.</p></li>
<li><p>После того как будет построена геометрическая сеть, в таблицу содержания добавятся 3 новых слоя: <em>Водотоки (ребра сети)</em>, <em>Hydro_Net_Junctions</em> (сочленения в сети) и <em>Sink</em> (точка стока). Удалите новые слои <em>Водотоки</em> и <em>Sink</em>, поскольку они дублируют старые</p></li>
<li><p>Включите режим редактирования и откройте таблицу атрибутов слоя <em>Sink</em>.</p></li>
<li><p>Установите для единственной точки в этом слое поле <em>AncillaryRole</em> равным 2 (<em>Sink)</em>. Если список не отображается, просто введите в ячейку 2. Обратите внимание на то, что есть и противоположный вариант — <em>Source</em> (исток).</p>
<figure>
<img src="../images/Ex13/image23.png" alt="Рис. 11. Установка роли точки стока" /><figcaption><em>Рис. 11. Установка роли точки стока</em></figcaption>
</figure></li>
<li><p>Сохраните изменения, выбрав пункт меню <strong>Editor &gt; Save Edits</strong>.</p></li>
<li><p>Щелкните правой кнопкой мыши на пустом поле вверху окна и откройте панель инструментов <strong>Utility Network Analyst</strong>, предназначенную для работы с геометрической сетью (<strong>Рис. 12</strong>).</p>
<figure>
<img src="../images/Ex13/image24.png" alt="Рис. 12. Панель инструментов Utility Network Analyst для работы с геометрическими сетями" /><figcaption><em>Рис. 12. Панель инструментов Utility Network Analyst для работы с геометрическими сетями</em></figcaption>
</figure></li>
<li><p>Выберите в меню пункт <strong>Flow &gt; Display Arrows</strong> для того чтобы система автоматически показала направление течения. Вдоль отрезков будут показаны кружки, означающие, что направление еще не задано (<strong>Рис. 13</strong>).</p>
<figure>
<img src="../images/Ex13/image25.png" alt="Рис. 13. Неопределенное направление течения в геометрической сети" /><figcaption><em>Рис. 13. Неопределенное направление течения в геометрической сети</em></figcaption>
</figure></li>
<li><p>Нажмите кнопку <img src="../images/Ex13/image26.png" /> <strong>Set Flow Direction</strong>. Кружки должны смениться стрелочками, указывающими направление течения. Просмотрите разные части карты и убедитесь в том, что направление течения задано одинаково верно для всех водотоков (<strong>Рис. 14</strong>).</p>
<figure>
<img src="../images/Ex13/image27.png" alt="Рис. 14. Определенное направление течения в геометрической сети" /><figcaption><em>Рис. 14. Определенное направление течения в геометрической сети</em></figcaption>
</figure>
<p><kbd><strong>Снимок экрана №2.</strong> Геометрическая сеть с определенным направлением течения</kbd></p></li>
<li><p>Завершите сеанс редактирования, выбрав на панели <strong>Editor</strong> пункт меню <strong>Editing &gt; Stop Editing</strong>. В появившемся диалоге нажмите Да.</p></li>
</ol>
<p>Вы закончили подготовку и настройку геометрической сети. Теперь она доступна для анализа и редактирования.</p>
<h2 id="анализ-и-редактирование-геометрической-сети">Анализ и редактирование геометрической сети</h2>
<p><a href="#геометрическое-моделирование-речной-сети">К содержанию ⇡</a></p>
<p>Самое интересное в сетевых моделях — это возможность их анализа. Например, если зафиксирована точка прорыва на трубопроводе, можно определить все расположенные далее сегменты и ответвления сети, которые пострадают в результате аварии. Для замыкающего створа на реке можно определить все притоки, расположенные выше по течению или быстро трассировать путь воды вниз по течению вплоть до устья основной реки бассейна. При анализе транспортных сетей часто решается задача прокладки кратчайшего маршрута, расчета зон доступности и управления парком транспортных средств.</p>
<blockquote>
<p>При анализе геометрических сетей в <strong>ArcGIS</strong> используются флаги и барьеры. <strong>Флаг</strong> — это точка, относительно которой осуществляется трассировка сети. <strong>Барьер</strong> — это точка, запрещающая проход по ребру графа или его вершине.</p>
</blockquote>
<ol type="1">
<li><p>Откройте меню флагов и барьеров на панели инструментов <strong>Utility Network Analyst</strong> и выберите флаг для вершины (первая иконка на <strong>Рис. 15</strong>).</p>
<figure>
<img src="../images/Ex13/image28.png" alt="Рис. 15. Меню флагов и барьеров" /><figcaption><em>Рис. 15. Меню флагов и барьеров</em></figcaption>
</figure></li>
<li><p>Поставьте флажок в месте впадения реки <em>Межиловки</em> в <em>Протву</em>.</p></li>
<li><p>В списке <strong>Trace Task</strong> выберите задачу <strong>Trace Upstream</strong> (трассировать вверх по течению) и нажмите кнопку <img src="../images/Ex13/image29.png" /> <strong>Solve</strong>.</p>
<p>Инструмент анализа выделит водотоки, расположенные выше по течению относительно заданной точки. Весь их сток в конечном счете попадает в данную точку (<strong>Рис. 16</strong>).</p>
<figure>
<img src="../images/Ex13/image30.png" alt="Рис. 16. Трассировка водотоков, расположенных выше по течению" /><figcaption><em>Рис. 16. Трассировка водотоков, расположенных выше по течению</em></figcaption>
</figure>
<p><kbd><strong>Снимок экрана №3.</strong> Водотоки выше по течению относительно заданной точки</kbd></p></li>
<li><p>Смените задачу на <strong>Trace Downstream</strong> и опять нажмите кнопку <img src="../images/Ex13/image29.png" /> <strong>Solve</strong>.</p>
<p>Инструмент анализа построит маршрут вниз по течению</p></li>
<li><p>Поставьте еще один флажок в верховьях ручья Язвицы и запустите анализ в режиме <strong>Find Path</strong>. Будет построен маршрут между двумя точками (<strong>Рис. 17</strong>).</p>
<figure>
<img src="../images/Ex13/image31.png" alt="Рис. 17. Маршрут между двумя точками" /><figcaption><em>Рис. 17. Маршрут между двумя точками</em></figcaption>
</figure>
<p><kbd><strong>Снимок экрана №4.</strong> Маршрут между двумя точками</kbd></p></li>
<li><p>Поставьте точечный барьер (вторая справа иконка на <strong>Рис. 15</strong>) в месте впадения <em>Исьмы</em> в <em>Протву</em> и попробуйте еще раз рассчитать маршрут.</p>
<blockquote>
<p>Что произошло с расчетом маршрута после того, как вы поставили барьер?</p>
</blockquote></li>
<li><p>Очистите флаги и барьеры, выбрав <strong>Analysis &gt; Clear Flags</strong> и <strong>Analysis &gt; Clear Barriers</strong>.</p></li>
<li><p>Попробуйте поэкспериментировать с разными режимами расчетов в меню <strong>Trace Task</strong> и расстановкой флагов и барьеров.</p>
<p>Геометрическая сеть отличается также тем, что это топологический формат хранения данных — она хранит связность ребер и вершин, что бывает удобно при редактировании и совершенно необходимо при анализе.</p></li>
<li><p>Включите режим редактирования снова и приблизьтесь к месту впадения любого ручья в <em>Протву</em>.</p></li>
<li><p>Выделите узел сочленения и переместите его в сторону.</p>
<blockquote>
<p>Что происходит при перемещении узла сети? Остаются ли ребра на своих местах?**</p>
</blockquote></li>
</ol>
<p>Сохраните документ карты еще раз.</p>
<h2 id="контрольные-вопросы-5">Контрольные вопросы</h2>
<p><a href="#геометрическое-моделирование-речной-сети">К содержанию ⇡</a></p>
<p>Ответьте на вопросы в отчетном файле. После окончания положите ваш отчет в сетевую папку для проверки преподавателем.</p>
<h1 id="картографирование-на-основе-адресных-данных">Картографирование на основе адресных данных</h1>
<h2 id="введение-13">Введение</h2>
<p><strong>Цель</strong> --- научиться выполнять геокодирование по адресным данным, строить поля непрерывного распределения показателя по точкам.</p>
<table style="width:11%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Поток</strong></th>
<th>==Экономпоток==</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Теоретическая подготовка</strong></td>
<td>Геокодирование, адресные локаторы и их типы, интерполяция по данным в нерегулярно расположенных точках, методы интерполяции.</td>
</tr>
<tr class="even">
<td><strong>Практическая подготовка</strong></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Настройка символики и подписей объектов. Выделение объектов на карте. Пространственные и атрибутивные запросы. Оверлей. Инструменты геообработки.</td>
</tr>
<tr class="odd">
<td><strong>Исходные данные</strong></td>
<td>Таблица адресов ресторанов McDonald’s на территорию Манхэттена (Нью-Йорк) с данными о средней посещаемости. Картографический сервис Esri Streets. Сервис геокодирования NYSGIS.</td>
</tr>
<tr class="even">
<td><strong>Результат</strong></td>
<td>Геокодированные точки адресов. Визуализация точек значками разного диаметра в соответствии с посещаемостью. Поле посещаемости, построенное по точечным данным. Проект карты с элементами компоновки (легенда, масштаб).</td>
</tr>
<tr class="odd">
<td><strong>Ключевые слова</strong></td>
<td><em>Геокодирование, адресный локатор, интерполяция данных</em>.</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-12">Контрольный лист</h3>
<ul>
<li>[x] Подключить картографический сервис Esri Streets</li>
<li>[x] Подключить сервис геокодирования NYSGIS</li>
<li>[x] Добавить на карту таблицу с адресами и геокодировать их в автоматическом режиме</li>
<li>[x] Исправить вручную несопоставленные точки</li>
<li>[x] Визуализировать точки значками разного диаметра в соответствии с числом посетителей</li>
<li>[x] Построить по точкам поле посещаемости методом естественных соседов (Natural Neighbor).</li>
<li>[x] Оформить итоговую карту распределения</li>
</ul>
<h3 id="аннотация-12">Аннотация</h3>
<p>Задание посвящено знакомству с геокодированием и построением непрерывных полей на основе точечных данных. Геокодирование — это определение координат объектов по их географическим текстовым описаниям, которые, как правило, выражены в виде адресов и/или почтовых кодов.</p>
<p>На основе точечных данных часто восстанавливают поле распределения некоторого показателя. В случае социально-экономических показателей это такие поля являются абстрактными и показываются псевдоизолиниями. Несмотря на то, что признак может не иметь истинно непрерывного распределения (как в случае этого задания — посещаемость ресторанов), показ с помощью изолиний бывает наглядным, дает лучшее представление о дифференциации территории, чем просто значки.</p>
<p>В работе вам предлагается совместно использовать эти 2 метода.</p>
<p>==<strong>! ВНИМАНИЕ: для выполнения задания необходимо подключение к сети Интернет.</strong>==</p>
<h2 id="подключение-к-сервисам">Подключение к сервисам</h2>
<p><a href="#картографирование-на-основе-адресных-данных">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Добавьте на карту в качестве основы картографический сервис <em>Esri Streets</em>. Его можно выбрать, используя команду <strong>Add Basemap</strong> на главной панели инструментов:</p>
<figure>
<img src="../images/Ex14/image3.png" />
</figure>
<p>В появившемся диалоге выберите <em>Streets</em>:</p>
<figure>
<img src="../images/Ex14/image4.png" />
</figure>
<p>Если подключение произошло корректно, появится картографическое изображение.</p></li>
<li><p>Увеличьте масштаб карты таким образом, чтобы был хорошо виден Манхэттен:</p>
<figure>
<img src="../images/Ex14/image5.png" />
</figure></li>
<li><p>Подключитесь к ГИС-серверу официального портала штата Нью-Йорк. Для этого в окне каталога выберите команду <strong>GIS Servers &gt; Add ArcGIS Server</strong> и в появившемся диалоге выберите <strong>Use GIS Services</strong> (использовать ГИС-сервисы), нажмите Далее:</p>
<figure>
<img src="../images/Ex14/image6.png" />
</figure></li>
<li><p>В следующем диалоге в параметр <strong>Server URL</strong> скопируйте и вставьте следующий адрес и нажмите <strong>Finish</strong> (имя пользователя и пароль вводить не надо):</p>
<p><code>http://gisservices.dhses.ny.gov/arcgis/rest/services</code></p>
<p>Если соединение прошло удачно, в списке ГИС-серверов появится новое подключение к ГИС-серверу. Внутри него среди прочих сервисов должен располагаться адресный локатор <em>Street_and_Address_Composite</em>:</p>
<figure>
<img src="../images/Ex14/image7.png" />
</figure></li>
<li><p>Подключитесь в окне <strong>Каталога</strong> к вашей папке <em>Ex5</em> и создайте в ней новую базу геоданных под названием <em>Ex5</em>. Назначьте ее базой данных по умолчанию.</p></li>
</ol>
<h2 id="геокодирование-адресов">Геокодирование адресов</h2>
<p><a href="#картографирование-на-основе-адресных-данных">К содержанию ⇡</a></p>
<ol type="1">
<li><p>В окне <strong>Каталога</strong> раскройте таблицу <em>NYMcDonalds.xlx</em> и перетащите ее первый лист на карту:</p>
<figure>
<img src="../images/Ex14/image8.png" />
</figure></li>
<li><p>Откройте таблицу, чтобы просмотреть ее содержимое. В ней есть несколько полей, отвечающих за адрес, а также поле <em>Visitors</em>, хранящее информацию о среднем числе посетителей, обслуживаемых за один час:</p>
<figure>
<img src="../images/Ex14/image9.png" />
</figure></li>
<li><p>Выберите в контекстном меню таблицы опцию <strong>Geocode Addresses</strong>, чтобы приступить к геокодированию:</p>
<figure>
<img src="../images/Ex14/image10.png" />
</figure>
<p>В появившемся диалоге необходимо добавить сервис геокодирования, к которому вы осуществили подключение ранее.</p></li>
<li><p>Нажмите <strong>Add...</strong> и, используя навигацию по папкам, перейдите в каталог <strong>GIS Servers</strong> и найдите сервис геокодирования <em>Street_and_Address_Composite</em>. Выделите его и нажмите <strong>Add</strong>:</p>
<figure>
<img src="../images/Ex14/image11.png" />
</figure></li>
<li><p>Далее выделите его и нажмите ОК:</p>
<figure>
<img src="../images/Ex14/image12.png" />
</figure></li>
<li><p>В появившемся диалоге настроек геокодирования необходимо выбрать поля атрибутивной таблицы, из которых будет браться адресная информация. Заполните его следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Street or Intersection</td>
<td>Address</td>
</tr>
<tr class="even">
<td>City or Placename</td>
<td>City</td>
</tr>
<tr class="odd">
<td>State</td>
<td>State</td>
</tr>
<tr class="even">
<td>Output Shapefile or Feature Class *</td>
<td>…\Ex5\Ex5.gdb\NYMcDonalds</td>
</tr>
</tbody>
</table>
<p>* <em>Выберите в поле <strong>Save as Type</strong> фильтр «File and Personal Geodatabase Feature Class»</em></p>
<p>Остальные параметры оставьте по умолчанию и нажмите <strong>ОК</strong>. После выполнения геокодирования появится диалог, сообщающий процент удачно геокодированных адресов (<em>Matched</em>). Нажмите Rematch, чтобы приступить к исправлению ошибок: <img src="../images/Ex14/image13.png" /></p>
<p>Появится диалог сопоставления адресов, а на карту будет добавлены удачно геокодированные точки. Выберите в списке <strong>Show Results</strong> режим <strong>Unmatched Addresses</strong>. Не закрывая диалог, увеличьте изображение таким образом, чтобы точки было хорошо видно:</p>
<figure>
<img src="../images/Ex14/image14.png" />
</figure>
<p><kbd><strong>Снимок экрана №1.</strong> Автоматически геокодированные точки на карте и список негеокодированных точек</kbd></p></li>
</ol>
<p>Возникшие проблемы сопоставления адресов почти во всех случаях обусловлены тем, что для зданий на перекрестках указано сразу 2 адреса (<em>427 10TH AVE &amp; 34TH).</em> Такая форма адреса не соответствует требованиям геокодера. Исключение составляет адрес «<em>139TH &amp; ADAM CLAYTON POWELL</em>», в котором не указан номер дома ни по одной из улиц. Его вы обработаете отдельно.</p>
<ol type="1">
<li><p>Для разрешения неоднозначности выполните следующие действия:</p>
<ul>
<li><p>Выделите строку с идентификатором <em>«10»</em> в таблице. В поле <strong>Street or Intersection</strong> в нижней левой части окна сотрите знак <code>&amp;</code> и все что после него. Строка «<em>154 W 14TH ST &amp; 7TH AVE</em>» должна превратиться в строку «<em>154 W 14TH ST</em>»: | <img src="../images/Ex14/image15.png" /> | <img src="../images/Ex14/image16.png" /> | |---|---|</p></li>
<li><p>Нажмите <strong>Search</strong>. Среди полученных вариантов выберите имеющий ранг <em>Score</em> равный <em>100</em> (полное совпадение). Если таких адресов несколько, следует выбрать тот, что имеет заполненное поле <em>House</em> (дом).</p></li>
<li><p>Нажмите <strong>Match</strong>, чтобы сопоставить адрес. Результат должен выглядеть следующим образом:</p>
<figure>
<img src="../images/Ex14/image17.png" />
</figure></li>
</ul></li>
<li><p>Повторите эту последовательность действий для всех оставшихся строк.</p></li>
<li><p>Для кафе, располагающегося на перекрестке <em>139TH &amp; ADAM CLAYTON POWELL</em> вам необходимо узнать точный адрес по одной из этих улиц. Найдите этот адрес, используя поисковые возможности сети Интернет и введите его полностью (включая номер дома и полное название улицы) в поле <strong>Street or Intersection</strong>.</p>
<p>После выполнения правок все адреса должны быть сопоставлены и диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex14/image18.jpeg" />
</figure>
<p><kbd><strong>Снимок экрана №2.</strong> Результат ручного сопоставления адресов</kbd></p></li>
<li><p>Нажмите <strong>Close</strong>, чтобы завершить геокодирование.</p></li>
<li><p>Сохраните документ карты в свою папку <em>Ex5</em> под названием <em>Ex5_Geocoding.mxd</em>.</p></li>
</ol>
<h2 id="визуализация-посещаемости-в-точках">Визуализация посещаемости в точках</h2>
<p><a href="#картографирование-на-основе-адресных-данных">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Визуализируйте слой полученных точек методом значков. Выберите способ изображения <strong>Quantities — Graduated Symbols</strong> и задайте следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Поле отображения</td>
<td>Visitors</td>
</tr>
<tr class="even">
<td>Классификация</td>
<td>С равным интервалом через 100</td>
</tr>
<tr class="odd">
<td>Размеры кружков</td>
<td>От 8 до 24</td>
</tr>
<tr class="even">
<td>Цвет кружков</td>
<td>Голубой</td>
</tr>
</tbody>
</table>
<p>Диалог настройки свойств слоя примет следующий вид:</p>
<figure>
<img src="../images/Ex14/image19.png" />
</figure></li>
<li><p>Установите прозрачность значков на вкладке <em>Display</em> равной <em>50%</em>.</p></li>
<li><p>Переименуйте слой в «<em>Рестораны McDonalds</em>», а значение подписи показателя в заголовке легенды измените на «чел/час». Картографическое изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex14/image20.png" />
</figure></li>
<li><p>Откройте панель инструментов <strong>Labeling</strong> и включите механизм <em>Maplex</em>, чтобы получить доступ к расширенным настройкам подписей.</p></li>
<li><p>Включите подписи точек по полю <em>Address</em>. Установите размер шрифта равным <em>7</em>.</p>
<p>Чтобы полученные надписи не загораживали значки, необходимо установить значкам высокий вес при размещении подписей.</p></li>
<li><p>Нажмите кнопку <strong>Label Weight Ranking</strong> на панели <strong>Labeling</strong>:</p>
<figure>
<img src="../images/Ex14/image21.png" />
</figure></li>
<li><p>В открывшемся диалоге установите значение веса точек равным <em>1000</em>:</p>
<figure>
<img src="../images/Ex14/image22.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. После выполнения этих действий подписи будут размещены в стороне от значков:</p>
<figure>
<img src="../images/Ex14/image23.png" />
</figure>
<p><kbd><strong>Снимок экрана №3.</strong> Градуированные значки с подписями</kbd></p></li>
<li><p>Сохраните документ карты</p></li>
</ol>
<h2 id="построение-поля-посещаемости">Построение поля посещаемости</h2>
<p><a href="#картографирование-на-основе-адресных-данных">К содержанию ⇡</a></p>
<p>Наглядность представления пространственного распределения можно повысить, построив по точкам непрерывное поле и отобразив его методом послойной окраски. Восстановление поля по точечным данным делается с помощью интерполяции. Методы интерполяции расположены в группе инструментов <strong>Spatial Analyst Tools &gt; Interpolation</strong>.</p>
<ol type="1">
<li><p>Запустите инструмент интерполяции данных <strong>Spatial Analyst Tools &gt; Interpolation &gt; Natural Neighbor</strong> (<a href="http://desktop.arcgis.com/ru/arcmap/10.3/tools/spatial-analyst-toolbox/natural-neighbor.htm">метод естественного соседа</a>) и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Point Features</td>
<td>Рестораны McDonalds</td>
</tr>
<tr class="even">
<td>Z Value Field</td>
<td>Visitors</td>
</tr>
<tr class="odd">
<td>Output Raster</td>
<td>…\Ex5\Ex5.gdb\Visitors</td>
</tr>
<tr class="even">
<td>Output Cell Size</td>
<td>50</td>
</tr>
</tbody>
</table>
<p>Метод естественного соседа осуществляет интерполяцию на основе диаграммы Вороного точек. Полученный растр будет добавлен на экран. Переименуйте его в <em>«Посещаемость»</em>:</p>
<figure>
<img src="../images/Ex14/image24.png" />
</figure></li>
<li><p>Дважды щелкните на растре, перейдите на вкладку <strong>Symbology</strong> и измените параметры его отображения следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Способ отображения</td>
<td>Classified</td>
</tr>
<tr class="even">
<td>Классификация</td>
<td>С равным интервалом через 100</td>
</tr>
<tr class="odd">
<td>Шкала</td>
<td>От желтого к темно-красному</td>
</tr>
</tbody>
</table>
<p>Диалог настройки слоя примет следующий вид:</p>
<figure>
<img src="../images/Ex14/image25.png" />
</figure></li>
<li><p>Перейдите на вкладку <strong>Display</strong> и установите параметр прозрачности (<strong>Transparency</strong>) равным <em>20%</em>, чтобы сделать послойную окраску полупрозрачной. Нажмите <strong>ОК</strong>. Картографическое изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex14/image26.png" />
</figure>
<p><kbd><strong>Снимок экрана №4.</strong> Поле распределения посещаемости</kbd></p></li>
<li><p>Сохраните документ карты</p></li>
</ol>
<h2 id="оформление-карты-2">Оформление карты</h2>
<p><a href="#картографирование-на-основе-адресных-данных">К содержанию ⇡</a></p>
<p>Переключитесь в режим компоновки и установите масштаб карты равным <em>1:100 000</em>. Оформите карту в соответствии с нижеприведенным образцов, экспортируйте ее в графический файл и вставьте в отчет.</p>
<figure>
<img src="../images/Ex14/image27.png" />
</figure>
<h2 id="ответы-на-вопросы-6">Ответы на вопросы</h2>
<p><a href="#картографирование-на-основе-адресных-данных">К содержанию ⇡</a></p>
<p>Заполните отчетный файл и положите его в сетевую папку для проверки преподавателем.</p>
<h1 id="анализ-плотности-пространственного-распределения">Анализ плотности пространственного распределения</h1>
<h2 id="введение-14">Введение</h2>
<p><strong>Цель задания</strong> --- научиться определять плотность распределения (густоту) линейных объектов с помощью метода плавающего окна.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td><kbd>Экономический</kbd></td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Растровая модель пространственных данных, фильтрация растра, ядерное сглаживание, оценка плотности распределения.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Настройка символики и подписей объектов. Инструменты геообработки</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>База данных цифровой топографической карты 1:1 000 000 на территорию России</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>Растры густоты дорожной сети, полученные методом простого подсчета длины линий и путем ядерного сглаживания с разным радиусом влияния. Карта густоты дорожной сети с компоновкой.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Пространственный анализ, плотность распределения, фильтрация растра, ядерное сглаживание.</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-13">Контрольный лист</h3>
<ul>
<li>[x] Построить растры плотности и плотности ядер для линий</li>
<li>[x] Исследовать влияние радиуса вычислений на гладкость поверхности.</li>
<li>[x] Вырезать фрагмент результирующего растра на территорию России. Умножить значение плотности на 10, чтобы компенсировать эффект масштаба</li>
<li>[x] Подготовить проект карты густоты дорожной сети</li>
</ul>
<h3 id="аннотация-13">Аннотация</h3>
<p>Задание посвящено знакомству с анализом плотности размещения объектов на примере густоты дорожной сети. Анализ густоты является одним из фундаментальных методов исследования географических закономерностей размещения объектов, который позволяет выявить неравномерности и связать их с географическими условиями и соседством.</p>
<p>Для анализа густоты дорожной сети вами будет использована фильтрация данных. Подсчет густоты основан на принципе скользящего окна: поверх исходного слоя строится растровая поверхность и в заданном радиусе относительно каждой ячейки растра подсчитывается суммарная длина линий. При использовании ядерного сглаживания (кернфункции) полученное значение густоты сглаживается.</p>
<h2 id="оценка-плотности-дорожной-сети">Оценка плотности дорожной сети</h2>
<p><a href="#анализ-плотности-пространственного-распределения">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Создайте в директории <em>Ex15</em> новую файловую базу геоданных и назовите ее <em>Analysis</em></p></li>
<li><p>Назначьте созданную базу данных <strong>базой данных по умолчанию</strong>:</p>
<figure>
<img src="../images/Ex15/image5.png" />
</figure></li>
<li><p>Добавьте на карту слой <em>Roads</em> из базы данных <em>MapData.gdb</em> в папке <em>Ex15</em>. Это дороги на территорию <em>России</em>, оцифрованные по картам масштаба <em>1:1 000 000</em>.</p></li>
<li><p>Используя команду меню <strong>Cutomize &gt; Extensions</strong>, включите модуль <strong>Spatial Analyst</strong></p></li>
<li><p>Откройте <em>ArcToolbox</em></p></li>
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Density &gt; Line Density</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Input polyline features</em></td>
<td>Roads</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Output cell size</em></td>
<td>10000</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Output raster</em></td>
<td>&lt;путь к базе данных&gt;/line_dens_100</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Search radius</em></td>
<td>100000</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Area units</em></td>
<td>SQUARE_KILOMETERS</td>
</tr>
</tbody>
</table>
<p>Диалог примет <em>следующий вид</em>:</p>
<figure>
<img src="../images/Ex15/image6.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить инструмент. Когда вычисления закончатся, созданная поверхность будет добавлена на карту.</p></li>
<li><p>Отключите слой <em>roads</em> и установите <strong>передискретизацию</strong> слоя <em>line_dens_100</em> в режим <em>Cubic Convolution</em>.</p></li>
<li><p>Примените к растру цветовую шкалу от синего к красному.</p>
<p><em>Результат</em>: <img src="../images/Ex15/image7.png" /></p></li>
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Density &gt; Kernel Density</strong> и заполните его параметры аналогично предыдущему инструменту. Назовите выходную поверхность <em>kernel_dens_100</em>:</p>
<figure>
<img src="../images/Ex15/image8.png" />
</figure></li>
<li><p>Примените к получившемуся слою такую же цветовую шкалу, как и предыдущему</p></li>
<li><p>Установите режиме <em>передискретизации</em> результирующего слоя <strong>Cubic Convolution</strong></p></li>
<li><p>Сделайте слой дорог черного цвета и установите ему <strong>прозрачность</strong> <em>70%</em>.</p></li>
<li><p>Сравните растры, полученные методами <em>Line Density</em> (простой подсчет длины линий в пределах плавающего окна) и <em>Kernel Density</em> (подсчет с использованием кернфункции). Какой тип оператора дает более ровную поверхность?</p>
<p><img src="../images/Ex15/image9.png" /> <img src="../images/Ex15/image10.png" /></p></li>
</ol>
<h2 id="оценка-влияния-радиуса-поиска-kernel-density">Оценка влияния радиуса поиска (kernel density)</h2>
<p><a href="#анализ-плотности-пространственного-распределения">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Создайте методом <em>Kernel Density</em> еще два растра густоты дорожной сети с радиусом поиска (<em>Search radius</em>) <em>200 000</em> и <em>400 000</em> м соответственно и разрешением (<em>Output cell size</em>) равным <em>20000</em> м. Назовите их <em>kernel_dens_200 и kernel_dens_400</em> соответственно.</p></li>
<li><p>Примените к полученным растрам настройки отображения по аналогии с предыдущими результатами.</p></li>
<li><p>Оцените влияние радиуса поиска на сглаженность поверхности:</p>
<p><img src="../images/Ex15/image11.png" /> <img src="../images/Ex15/image12.png" /> <img src="../images/Ex15/image13.png" /></p></li>
<li><p>Сохраните карту в каталог <em>Ex15</em> под названием <em>Roads.mxd</em></p></li>
</ol>
<h2 id="масштабирование-значение-показателя">Масштабирование значение показателя</h2>
<p><a href="#анализ-плотности-пространственного-распределения">К содержанию ⇡</a></p>
<p>Полученные растры отражают искаженное значение плотности, поскольку исходный слой дорог содержит не все дороги. Их количество преуменьшено примерно в <em>10</em> раз (карта масштаба <em>1:1 000 000</em>. Чтобы привести значение густоты к должно величине, необходимо умножить растр на <em>10</em>.</p>
<ol type="1">
<li><p>Запустите инструмент <strong>Spatial Analyst &gt; Math &gt; Times</strong></p></li>
<li><p>Заполните его параметры в соответствии со следующим диалогом и запустите:</p>
<figure>
<img src="../images/Ex15/image14.png" />
</figure></li>
</ol>
<h2 id="оформление-слоя-густоты-дорожной-сети">Оформление слоя густоты дорожной сети</h2>
<p><a href="#анализ-плотности-пространственного-распределения">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Оставьте включенным только слой <em>kernel_dens_100_x10</em></p></li>
<li><p>Добавьте на карту слой <em>countries</em> из базы данных <em>MapData.gdb</em></p></li>
<li><p>Уберите у него заливку, а обводку установите черной, толщиной <em>1,5</em> пиксела.</p></li>
<li><p><em>Выделите</em> на карте полигон <em>России</em>.</p></li>
<li><p>Запустите инструмент <strong>Spatial Analyst &gt; Extraction &gt; Extract by Mask</strong>, чтобы обрезать растр по границе России. Заполните его параметры в соответствии со следующим диалогом:</p>
<figure>
<img src="../images/Ex15/image15.png" />
</figure></li>
<li><p>Примените к полученному растру следующие настройки отображения:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Метод отображения</em></td>
<td>Classified</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Метод классификации</em></td>
<td>Natural Breaks (Jenks)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Число классов</em></td>
<td>9</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Шкала</em></td>
<td>От синего к красному</td>
</tr>
</tbody>
</table>
<p>Округлите значения полученных границ классов в столбце <em>Label</em> до одного-двух знаков после запятой и <strong>отсортируйте</strong> классы по убыванию значений.</p>
<p><em>Результат</em>:</p>
<figure>
<img src="../images/Ex15/image16.png" />
</figure></li>
<li><p><strong>Переименуйте</strong> слой в «<em>Густота дорожной сети</em>», а заголовок показателя в «км/кв.км»</p>
<p><em>Результат</em>: <img src="../images/Ex15/image17.png" /></p></li>
</ol>
<h2 id="оформление-итоговой-карты">Оформление итоговой карты</h2>
<p><a href="#анализ-плотности-пространственного-распределения">К содержанию ⇡</a></p>
<ol type="1">
<li><p><strong>Выделите</strong> полигоны России, Аральского и Каспийского морей в слое Countries</p></li>
<li><p><strong>Инвертируйте</strong> выборку.</p></li>
<li><p><strong>Создайте новый слой на основе выборки</strong> и назовите его <em>«Страны»</em>. Присвойте ему символ с белой заливкой и черной обводкой толщиной 1,5 пункта.</p></li>
<li><p><strong>Переименуйте</strong> исходный слой <em>Countries</em> в <em>“Границы”</em></p></li>
<li><p>Установите <strong>заливку фрейма данных</strong> голубого цвета</p>
<p><em>Результат</em>: <img src="../images/Ex15/image18.png" /></p></li>
<li><p>Добавьте на карту слой <em>Cities</em>, примените к нему символ черного кружка диаметром 3 пункта и <strong>включите подписи</strong> по полю <em>Name_normal</em> шрифтом <em>Tahoma</em> 8 кегля.</p></li>
<li><p>Оформите компоновку карты в соответствии со следующим образцом:</p>
<figure>
<img src="../images/Ex15/image19.png" />
</figure></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="контрольные-вопросы-6">Контрольные вопросы</h2>
<p><a href="#анализ-плотности-пространственного-распределения">К содержанию ⇡</a></p>
<p>Ответьте на вопросы в отчетном файле. После окончания положите ваш отчет в сетевую папку для проверки преподавателем.</p>
<h1 id="интерполяция-и-картографирование-гидрометеорологических-полей">Интерполяция и картографирование гидрометеорологических полей</h1>
<h2 id="введение-15">Введение</h2>
<p><strong>Цель</strong> --- научиться на основе точечных данных восстанавливать поля распределения непрерывных показателей различными способами. Осуществлять визуализацию методом изолиний с послойной окраской, строить профили по полученным поверхностям.</p>
<table style="width:11%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Поток</strong></th>
<th>==Гидрометпоток==</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Теоретическая подготовка</strong></td>
<td>Построение растровых поверхностей. Интерполяция по данным в нерегулярно расположенных точках. Методы интерполяции: обратно взвешенных расстояний, естественного соседа, тренда, сплайнов, кригинга.</td>
</tr>
<tr class="even">
<td><strong>Практическая подготовка</strong></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Настройка символики и подписей объектов. Пространственные и атрибутивные запросы, оверлей. Создание базы геоданных и классов пространственных объектов. Редактирование классов пространственных объектов. Инструменты геообработки ArcToolbox. Создание компоновки карты: название легенда, масштаб, градусная сетка.</td>
</tr>
<tr class="odd">
<td><strong>Исходные данные</strong></td>
<td>Данные <a href="http://www.argo.ucsd.edu">дрейфующих буев ARGO</a> на акваторию Северной Атлантики, границы стран мелкомасштабной картографической основы.</td>
</tr>
<tr class="even">
<td><strong>Результат</strong></td>
<td>Поверхности температуры за 30.01.2011, построенные различными методами; поверхность кригинга, полученная после обработки фильтром 3х3; изолинии по данной поверхности с шагом 2,5 градуса; профиль температуры по меридиану 38° з.д.; карта с названием, легендой, масштабом и профилем</td>
</tr>
<tr class="odd">
<td><strong>Ключевые слова</strong></td>
<td><em>Интерполяция, аппроксимация, гидрометеорологические поля, картографирование, профили</em>.</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-14">Контрольный лист:</h3>
<ul>
<li>[x] Добавить на карту границы стран и точки наблюдений, оформить в соответствии с указаниями</li>
<li>[x] Оценить максимально возможное разрешение растра</li>
<li>[x] Построить поверхность методом обратно взвешенных расстояний</li>
<li>[x] Построить поверхность методом естественного соседа</li>
<li>[x] Построить поверхность методом сплайнов с натяжением</li>
<li>[x] Построить поверхности методом полиномиального тренда со степенями 1,2,3,4,5</li>
<li>[x] Построить поверхность методом кригинга</li>
<li>[x] Сгладить данную поверхность фильтром с плавающим окном размера 3х3</li>
<li>[x] Построить изолинии по данной поверхности</li>
<li>[x] Построить профиль по меридиану 38° з.д.</li>
<li>[x] Оформить карту с легендой и масштабом</li>
</ul>
<h3 id="аннотация-14">Аннотация</h3>
<p>Моделирование физических полей --- основа гидрометеорологического картографирования. Типичный рабочий процесс при создании карт температуры, давления, скорости ветра и прочих непрерывных в пространстве явлений заключается в восстановлении поверхности на основе точечных измерений (или модельных значений). Полученные поверхности можно визуализировать, выполнять их анализ, строить профили и разрезы.</p>
<p>В задании предлагается восстановить поле температуры в Северной Атлантике по данным <a href="http://www.argo.ucsd.edu">дрейфующих буев ARGO</a>; проанализировать отличия поверхностей, полученных разными методами. В заключении работы необходимо построить профиль и оформить карту в режиме компоновки.</p>
<h2 id="оформление-базовых-слоев-3">Оформление базовых слоев</h2>
<p><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Скопируйте каталог <em>Ex4</em> в свой рабочий каталог.</p></li>
<li><p>Подключитесь в окне каталога к вашей папке <em>Ex4</em>. Убедитесь, что в ней находится база геоданных <em>Argo.gdb</em>.</p></li>
<li><p>Используя контекстное меню базы данных, назначьте ее базой данных по умолчанию.</p></li>
<li><p>Добавьте на карту слои <em>ArgoBuoys</em> и <em>Countries</em> и оформите их следующим образом:</p></li>
</ol>
<ul>
<li><em>ArgoBuoys</em> --- черные кружки диаметром 3 пункта</li>
<li><em>Countries</em> --- заливка серым цветом 30%, обводка серым цветом 60%</li>
</ul>
<ol type="1">
<li><p>Включите подписи слоя <em>ArgoBuoys</em> по полю <em>Temp</em>, установите размер шрифта равным 7 пунктам.</p>
<p>Картографическое изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex16/image7.png" />
</figure>
<p><kbd><strong>Снимок экрана №1.</strong> Исходные данные</kbd></p></li>
<li><p>Сохраните документ карты в свою папку под названием <em>Ex4_Interpolation.mxd</em></p></li>
</ol>
<h2 id="оценка-необходимого-разрешения-растра">Оценка необходимого разрешения растра</h2>
<p><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">К содержанию ⇡</a></p>
<p>Для оценки минимально необходимого разрешения растра следует вычислить для массива исходных точек среднее расстояние до ближайшего соседа (<em>Nearest Neighbor Distance, NND</em>), которое дает оценку пространственной частоты. Согласно <a href="https://ru.wikipedia.org/wiki/Теорема_Котельникова">теореме Котельникова</a>, потерь данных можно избежать, если частота дискретизации будет вдвое больше максимальной пространственной частоты. Данная частота дискретизации именуется <em>частотой Найквиста</em>. Интерпретируя это утверждение в терминах растрового анализа, можно сказать, что <em>разрешение растра R должно быть по крайней мере в 2 раза мельче, чем среднее расстояние до ближайшего соседа</em>.</p>
<ol type="1">
<li><p>Запустите инструмент геообработки <strong>Analysis Tools &gt; Proximity &gt; Near</strong> и задайте его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Features</td>
<td>ArgoBuoys</td>
</tr>
<tr class="even">
<td>Near Features</td>
<td>ArgoBuoys</td>
</tr>
</tbody>
</table>
<p>Нажмите <strong>ОК</strong>:</p>
<figure>
<img src="../images/Ex16/image8.png" />
</figure></li>
<li><p>После завершения работы инструмента откройте атрибутивную таблицу слоя <em>ArgoBuoys</em> и в контекстном меню заголовка поля <em>Near_DIST</em> выберите команду <strong>Statistics</strong>, чтобы открыть диалог со статистикой поля.</p></li>
<li><p>Найдите в диалоговом окне строку <em>Mean</em> (среднее значение), разделите его пополам и округлите полученное значение в меньшую сторону до ближайшего числа, кратного 0,5. Если все сделано правильно, то в результате должно получиться разрешение <em>2,5 градуса</em>.</p></li>
</ol>
<p>==✔︎ <em>Более подробно с решением проблемы выбора оптимального разрешения растра вы можете ознакомиться в статье <a href="https://www.researchgate.net/publication/222014409_Finding_the_right_pixel_size">Hengl T. Finding the right pixel size // Comput. Geosci. 2006. Vol. 32, № 9. P. 1283–1298.</a></em>==</p>
<h2 id="интерполяция-поверхностей">Интерполяция поверхностей</h2>
<p><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">К содержанию ⇡</a></p>
<p>Используя инструменты геообработки, находящиеся в <strong>ArcToolbox</strong> в группе <strong>Spatial Analyst Tools &gt; Interpolation</strong>, постройте растровые поверхности нижеуказанными методами:</p>
<table style="width:14%;">
<colgroup>
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 4%" />
</colgroup>
<thead>
<tr class="header">
<th>Метод</th>
<th>Инструмент геообработки</th>
<th>Выходной растр</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="http://desktop.arcgis.com/ru/arcmap/latest/tools/3d-analyst-toolbox/how-idw-works.htm">Обратно взвешенных расстояний</a></td>
<td><strong>IDW</strong></td>
<td><code>.../Ex4/Argo.gdb/Temp_IDW</code></td>
</tr>
<tr class="even">
<td><a href="http://desktop.arcgis.com/ru/arcmap/latest/tools/3d-analyst-toolbox/how-natural-neighbor-works.htm">Естественного соседа</a></td>
<td><strong>Natural Neighbor</strong></td>
<td><code>…/Ex4/Argo.gdb/Natural</code></td>
</tr>
<tr class="odd">
<td><a href="http://desktop.arcgis.com/ru/arcmap/latest/tools/3d-analyst-toolbox/how-spline-works.htm">Сплайнов</a></td>
<td><strong>Spline</strong></td>
<td><code>…/Ex4/Argo.gdb/Spline</code></td>
</tr>
<tr class="even">
<td><a href="http://desktop.arcgis.com/ru/arcmap/latest/tools/3d-analyst-toolbox/how-kriging-works.htm">Кригинга</a></td>
<td><strong>Kriging</strong></td>
<td><code>…/Ex4/Argo.gdb/Temp_Kriging</code></td>
</tr>
<tr class="odd">
<td><a href="http://desktop.arcgis.com/ru/arcmap/latest/tools/3d-analyst-toolbox/how-trend-works.htm">Тренда</a> 1,2,3,4,5 степени</td>
<td><strong>Trend</strong> (для указания степени полинома используйте параметр Polynomial Order)</td>
<td><code>…/Ex4/Argo.gdb/Trend1</code>, <code>…/Ex4/Argo.gdb/Trend2</code>, <code>…/Ex4/Argo.gdb/Trend3</code>, <code>…/Ex4/Argo.gdb/Trend4</code>, <code>…/Ex4/Argo.gdb/Trend5</code></td>
</tr>
</tbody>
</table>
<p>==✔︎ <em>Используя гиперссылки в таблице, вы можете перейти на страницу справки и изучить принципы работы каждого из методов интерполяции.</em>==</p>
<p>Для всех инструментов будут общими следующие параметры:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Point Features</td>
<td>ArgoBuoys</td>
</tr>
<tr class="even">
<td>Z value field</td>
<td>Temp</td>
</tr>
<tr class="odd">
<td>Output Cell Size</td>
<td>2,5</td>
</tr>
</tbody>
</table>
<p>Если все выполнено верно, то в вашей базе геоданных и таблице содержания должно появиться <em>9 новых растров</em>, отражающих поверхность распределения температуры:</p>
<figure>
<img src="../images/Ex16/image9.png" />
</figure>
<p><kbd><strong>Снимок экрана №2</strong>. Построенные поверхности</kbd></p>
<h2 id="настройка-отображения-поверхностей">Настройка отображения поверхностей</h2>
<p><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">К содержанию ⇡</a></p>
<p>Для того чтобы поверхности можно было сравнивать, необходимо визуализировать их в единой цветовой шкале и с одинаковым шагом температуры. Рассмотрим последовательность действий на примере растра, полученного методом кригинга:</p>
<ol type="1">
<li><p>Убедитесь, что в свойствах слоя <em>Temp_Kriging</em> на вкладке <strong>Symbology</strong> включен режим отображения <em>Classified</em>. Нажмите на этой же вкладке кнопку <strong>Classify…</strong></p></li>
<li><p>В появившемся диалоге выберите метод классификации <em>Defined</em> (заданный интервал), установите интервал равным 2,5 метра и нажмите <strong>ОК</strong>:</p>
<figure>
<img src="../images/Ex16/image10.png" />
</figure></li>
<li><p>Выберите сине-бело-красную шкалу для отображения температуры. Диалог свойств слоя примет следующий вид:</p>
<figure>
<img src="../images/Ex16/image11.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. Картографическое изображение примет следующий вид:</p>
<figure>
<img src="../images/Ex16/image12.png" />
</figure>
<p><kbd><strong>Снимок экрана №3.</strong> Поле температуры методом кригинга</kbd></p></li>
<li><p>Повторите эту операцию для оставшихся растров.</p></li>
<li><p>Поочередно <em>включая только нужный растр</em> (так чтобы на карте был виден именно он) сделайте снимки экрана:</p></li>
</ol>
<p><kbd><strong>Снимок экрана №4.</strong> Поле температуры методом обратно взвешенных расстояний</kbd></p>
<p><kbd><strong>Снимок экрана №5.</strong> Поле температуры методом естественного соседа</kbd></p>
<p><kbd><strong>Снимок экрана №6.</strong> Поле температуры методом сплайнов</kbd></p>
<p><kbd><strong>Снимок экрана №7.</strong> Поле температуры методом тренда 1 степени</kbd></p>
<p><kbd><strong>Снимок экрана №8.</strong> Поле температуры методом тренда 2 степени</kbd></p>
<p><kbd><strong>Снимок экрана №9.</strong> Поле температуры методом тренда 3 степени</kbd></p>
<p><kbd><strong>Снимок экрана №10.</strong> Поле температуры методом тренда 4 степени</kbd></p>
<p><kbd><strong>Снимок экрана №11.</strong> Поле температуры методом тренда 5 степени</kbd></p>
<h2 id="сглаживание-поверхности-полученной-методом-кригинга">Сглаживание поверхности, полученной методом кригинга</h2>
<p><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">К содержанию ⇡</a></p>
<p>Мелкие неровности поверхности, обусловленные методом интерполяции, можно устранить с помощью сглаживания. Для этого часто используется фильтрация с помощью плавающего окна.</p>
<ol type="1">
<li><p>Отключите все растры кроме построенного методом кригинга.</p></li>
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Neighborhood &gt; Focal Statistics</strong> и настройте его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Raster</td>
<td>Temp_Kriging</td>
</tr>
<tr class="even">
<td>Output Raster</td>
<td><code>.../Ex4/Argo.gdb/Temp_Kriging_3x3</code></td>
</tr>
</tbody>
</table>
<p>Остальные параметры (включая размер окна 3×3) оставьте по умолчанию. Нажмите <strong>ОК</strong>. После выполнения сглаженный растр будет добавлен в таблицу содержания:</p>
<figure>
<img src="../images/Ex16/image13.png" />
</figure>
<p>Обратите внимание на размер ячейки.</p></li>
<li><p>Визуализируйте сглаженный растр аналогично созданным ранее растрам. Для этого вам потребуется сменить способ его отображения на <strong>Classified</strong>.</p></li>
<li><p>Нажмите <strong>ОК</strong>. Изображение примет цветной, но по прежнему пикселизованный вид:</p>
<figure>
<img src="../images/Ex16/image14.png" />
</figure></li>
<li><p>Дважды щелкните на слое <em>Temp_Kriging_3x3</em>, перейдите на вкладку <strong>Display</strong> и установите режим <a href="https://ru.wikipedia.org/wiki/Передискретизация">передискретизации</a> слоя <strong>Сubic Convolution</strong> (кубическая свертка):</p>
<figure>
<img src="../images/Ex16/image15.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. Изображение примет более привычный гладкий вид непрерывной поверхности:</p>
<figure>
<img src="../images/Ex16/image16.png" />
</figure>
<p><kbd><strong>Снимок экрана №12.</strong> Сглаженная поверхность поля температуры</kbd></p></li>
</ol>
<h2 id="построение-линии-профиля">Построение линии профиля</h2>
<p><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">К содержанию ⇡</a></p>
<p>Распространенная задача при анализе полей температуры, солености, давление — построение профилей или разрезов. Вам предлагается построить профиль температуры по меридиану 38°з.д.</p>
<ol type="1">
<li><p>Создайте в базе геоданных <em>Argo</em> линейный класс пространственных объектов c названием <em>Profile</em> и системой координат <em>WGS84</em> из группы <strong>Geographic Coordinate Systems &gt; World</strong>.</p></li>
<li><p>Добавьте этот слой на карту и смените его символ на линию черного цвета.</p></li>
<li><p>Включите режим редактирования.</p></li>
<li><p>Выберите в окне <strong>Create Features</strong> слой <strong>Profiles</strong> и щелкните правой кнопкой мыши на карте. В появившемся диалоге выберите команду <strong>Absolute X,Y</strong> чтобы задать координаты первой точки профиля:</p>
<figure>
<img src="../images/Ex16/image17.png" />
</figure></li>
<li><p>В появившемся мини-диалоге введите значения для долготы и широты соответственно -38 и 0 и нажмите на клавиатуре <kbd>Enter</kbd>.</p>
<figure>
<img src="../images/Ex16/image18.png" />
</figure></li>
<li><p>Повторите эту операцию для ввода конечной точки профиля (координаты -38 и 63 соответственно)</p></li>
<li><p>Нажмите на клавиатуре <kbd>F2</kbd>, чтобы завершить создание линии:</p>
<figure>
<img src="../images/Ex16/image19.png" />
</figure></li>
<li><p>Завершите сеанс редактирования, выбрав на панели <strong>Editor</strong> команду <strong>Editor &gt; Stop Editing</strong>.</p></li>
</ol>
<h2 id="определение-температур-по-линии-профиля">Определение температур по линии профиля</h2>
<p><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">К содержанию ⇡</a></p>
<p>Для построения профиля вдоль созданной линии необходимо перенести величины температур с поверхности на узлы линии профиля. Для этого можно воспользоваться функцией интерполяции объектов.</p>
<blockquote>
<p>Интерполяция объектов позволяет перенести информацию с поверхности на перекрывающиеся с ней объекты. В частности, при интерполяции линии каждый ее узел получит значение, интерполированное в той же точке с поверхности растра.</p>
</blockquote>
<ol type="1">
<li><p>Запустите инструмент <strong>3D Analyst Tools &gt; Functional Surface &gt; Interpolate Shape</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Surface</td>
<td>Temp_Kriging_3x3</td>
</tr>
<tr class="even">
<td>Input Feature Class</td>
<td>Profile</td>
</tr>
<tr class="odd">
<td>Output Feature Class</td>
<td><code>.../Ex4/Argo.gdb/Profile_Temp</code></td>
</tr>
</tbody>
</table>
<p>Остальные параметры оставьте по умолчанию и нажмите <strong>ОК</strong>.</p></li>
<li><p>Для корректного отображения широты коневертируйте линию в точки. Для этого запустите инструмент <strong>Data Management Tools &gt; Features &gt; Feature Vertices to Points</strong>. Назовите выходной класс <em>Profile_Temp_Pts.</em></p></li>
<li><p>Добавьте в точки значения широты, долготы и температуры. Для этого воспользуйтесь инструментом <strong>Data Management Tools &gt; Features &gt; Add XY Coordinates</strong>.</p></li>
<li><p>Откройте атрибутивную таблицу получившегося слоя. Она должна иметь следующий вид:</p>
<figure>
<img src="../images/Ex16/image20.png" />
</figure></li>
<li><p>Выберите команду меню <strong>View &gt; Graphs &gt; Create Graph</strong>:</p>
<figure>
<img src="../images/Ex16/image21.png" />
</figure></li>
<li><p>Настройте параметры графика следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Graph Type</td>
<td>Vertical Line</td>
</tr>
<tr class="even">
<td>Layer/Table</td>
<td>Profile_Temp_Pts</td>
</tr>
<tr class="odd">
<td>Y Field</td>
<td>POINT_Z</td>
</tr>
<tr class="even">
<td>X Field</td>
<td>POINT_Y</td>
</tr>
<tr class="odd">
<td>Add to Legend</td>
<td>Отключено</td>
</tr>
</tbody>
</table>
<p>Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex16/image22.png" />
</figure></li>
<li><p>Нажмите <strong>Next</strong> и настройте отображение графика следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Title</td>
<td>Профиль температуры по меридиану 38° з.д.</td>
</tr>
<tr class="even">
<td>Axis Properties &gt; Left</td>
<td>Температура, °С</td>
</tr>
<tr class="odd">
<td>Axis Properties &gt; Bottom</td>
<td>Широта, °</td>
</tr>
</tbody>
</table>
<p>Диалог примет следующий вид:</p>
<figure>
<img src="../images/Ex16/image23.png" />
</figure></li>
<li><p>Нажмите <strong>Finish</strong>. Построенный профиль будет добавлен в окно приложения:</p>
<figure>
<img src="../images/Ex16/image24.png" />
</figure>
<p><kbd><strong>Снимок экрана №13</strong>. Профиль температуры</kbd></p></li>
</ol>
<h2 id="оформление-карты-3">Оформление карты</h2>
<p><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Переключитесь в режим компоновки.</p></li>
<li><p>Установите масштаб равным 1:70 000 000.</p></li>
<li><p>Щелкните на профиле правой кнопкой мыши и выберите команду <strong>Add To Layout</strong>, чтобы добавить его на страницу компоновки.</p></li>
<li><p>Оформите карту в соответствии с нижеприведенным изображением. Добавьте на нее название, легенду и численный масштаб:</p>
<figure>
<img src="../images/Ex16/image26.png" />
</figure>
<ul>
<li>Для установки нулевого расстояния между плашками цветовой шкалы дважды щелкните на легенде, перейдите на вкладку <strong>Layout</strong> и установите параметр <strong>Vertical Patch Gap</strong> равным <em>0 pt</em>:</li>
</ul>
<figure>
<img src="../images/Ex16/image25.png" />
</figure></li>
<li><p>Экспортируйте изображение в файл формата <em>PNG</em> и вставьте его в отчет.</p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="ответы-на-вопросы-7">Ответы на вопросы</h2>
<p><a href="#интерполяция-и-картографирование-гидрометеорологических-полей">К содержанию ⇡</a></p>
<p>Заполните отчетный файл и положите его в сетевую папку для проверки преподавателем.</p>
<h1 id="гидрологический-анализ-цифровой-модели-рельефа">Гидрологический анализ цифровой модели рельефа</h1>
<h2 id="введение-16">Введение</h2>
<p><strong>Цель</strong> — научиться на основе цифровой модели рельефа выделять водотоки и их водосборные бассейны в автоматическом режиме. Осуществлять расчет статистики по высотам в рамках выделенных бассейнов</p>
<table style="width:11%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Поток</strong></th>
<th>==Физпоток==, ==Гидрометпоток==</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Теоретическая подготовка</strong></td>
<td>Растровая модель пространственных данных. Цифровые модели рельефа (ЦМР) и их типы, построение ЦМР, построение производных поверхностей (углы наклона, направление тока, площадь водосбора). Гидрологический анализ ЦМР и его принципы.</td>
</tr>
<tr class="even">
<td><strong>Практическая подготовка</strong></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Настройка символики и подписей объектов. Создание базы геоданных и классов пространственных объектов. Инструменты геообработки ArcToolbox. Создание компоновки карты: название легенда, масштаб, градусная сетка.</td>
</tr>
<tr class="odd">
<td><strong>Исходные данные</strong></td>
<td>Цифровая модель рельефа по данным топографической карты масштаба 1:200 000.</td>
</tr>
<tr class="even">
<td><strong>Результат</strong></td>
<td>Карта водотоков и их водосборных бассейнов, построенная по ЦМР, с указанием средней высотой каждого бассейна.</td>
</tr>
<tr class="odd">
<td><strong>Ключевые слова</strong></td>
<td><em>Цифровая модель рельефа, гидрологический анализ ЦМР</em>.</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-список">Контрольный список:</h3>
<ul>
<li>[x] Добавить на карту цифровую модель рельефа и визуализировать ее методом послойной окраски</li>
<li>[x] Построить растр направлений тока</li>
<li>[x] Построить растр площади водосбора</li>
<li>[x] Выделить тальвеги путем запроса</li>
<li>[x] Присвоить тальвегам порядок по методу Стралера</li>
<li>[x] Векторизовать тальвеги</li>
<li>[x] Получить устья тальвегов</li>
<li>[x] Разделить устья впадающих водотоков</li>
<li>[x] Привязать полученные точки к растру аккумуляции тока</li>
<li>[x] Построить водосборные бассейны</li>
<li>[x] Конвертировать полученные бассейны в векторный вид</li>
<li>[x] Рассчитать статистику по высотам в пределах бассейнов</li>
<li>[x] Привязать рассчитанную статистику к площадям бассейнов</li>
<li>[x] Подписать бассейны по значению средней высоты</li>
<li>[x] Завершить оформление карты в режиме компоновки</li>
</ul>
<h3 id="аннотация-15">Аннотация</h3>
<p>Цифровые модели рельефа играют важную роль в гидрологическом и геоморфологическом анализе. Одно из основных приложений ЦМР, позволивших значительно упростить анализ речных систем, — это автоматизированное построение водосборов и расчет их морфометрических характеристик.</p>
<p>В задании вам предстоит автоматически выделить тальвеги и водосборы по цифровой модели рельефа. Тальвеги будут классифицированы вами согласно их порядкам, а для каждого бассейна определена средняя высота. Задание завершается оформлением карты в режиме компоновки.</p>
<h2 id="оформление-данных">Оформление данных</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Скопируйте каталог <em>Ex5</em> в свою папку.</p></li>
<li><p>Подключитесь в окне каталога к вашей папке <em>Ex5</em>. Убедитесь, что в ней находится база геоданных <em>Ex5.gdb</em>.</p></li>
<li><p>Используя контекстное меню базы данных, назначьте ее базой данных по умолчанию.</p></li>
<li><p>Добавьте на карту слой <em>dem</em>. Это цифровая модель рельефа в растровом формате.</p></li>
<li><p>Измените оформление слоя следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Способ отображения</td>
<td>Classified</td>
</tr>
<tr class="even">
<td>Интервал</td>
<td>С равным шагом (Defined Interval), сечение 20 м.</td>
</tr>
<tr class="odd">
<td>Цветовая шкала</td>
<td>Scale_termo2: <img src="../images/Ex17/image7.png" /></td>
</tr>
</tbody>
</table>
<p>Диалог примет следующий вид:</p>
<figure>
<img src="/../images/Ex17/image8.png" />
</figure></li>
<li><p>Измените красный цвет шкалы на оранжевый. Для этого в контекстном меню цветовой шкалы выберите команду <strong>Properties...</strong>. В появившемся диалоге дважды щелкните на бело-красном градиенте и замените красный цвет на оранжевый <em>Electron Gold</em>:</p>
<figure>
<img src="/../images/Ex17/image9.png" />
</figure></li>
<li><p>Завершите настройку шкалы, нажав <strong>ОК</strong> и еще раз <strong>ОК</strong>.</p></li>
<li><p>Измените сортировку значений на вкладке <strong>Symbology</strong> таким образом, чтобы вверху оказались самые большие высоты. Нажмите <strong>ОК</strong>, чтобы закрыть диалог настройки слоя.</p></li>
<li><p>Измените название слоя <em>dem</em> на «Послойная окраска».</p></li>
<li><p>Дополнительно к послойной окраске постройте горизонтали, чтобы усилить пластику рельефа. Для этого запустите инструмент геообработки <strong>Spatial Analyst Tools &gt; Surface &gt; Contour</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Raster</td>
<td>Послойная окраска</td>
</tr>
<tr class="even">
<td>Output Polyline Features</td>
<td>…\Ex5\Ex5.gdb\contours</td>
</tr>
<tr class="odd">
<td>Contour interval</td>
<td>20</td>
</tr>
</tbody>
</table>
<p>Величина сечения рельефа указывается в параметре <strong>Contour Interval</strong>. Остальные параметры оставьте по умолчанию и нажмите <strong>ОК</strong>. Полученный слой будет добавлен на карту.</p></li>
<li><p>Переименуйте слой в <em>«Горизонтали»</em> и измените его оформление следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Цвет линии</th>
<th>Черный</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Толщина линии</td>
<td>0,2</td>
</tr>
<tr class="even">
<td>Прозрачность</td>
<td>90%</td>
</tr>
</tbody>
</table>
<p>Изображение примет следующий вид:</p>
<figure>
<img src="/../images/Ex17/image10.png" />
</figure></li>
</ol>
<p><kbd><strong>Снимок экрана №1.</strong> Изображение рельефа методом горизонталей с послойной окраской</kbd></p>
<p>Сохраните документ карты в свою папку <em>Ex5</em> под именем <em>Ex5_DemAnalysis.mxd</em>.</p>
<h2 id="направление-тока">Направление тока</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<p>Растр направления тока показывает в каждой ячейке направление максимального уклона. Он необходим для построения водосборных бассейнов и прочих задач гидрологического и морфометрического анализа.</p>
<p>Для построения растра направлений тока запустите инструмент <strong>Spatial Analyst Tools &gt; Hydrology &gt; Flow Direction</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Raster</td>
<td>Послойная окраска</td>
</tr>
<tr class="even">
<td>Output flow direction raster</td>
<td>…\Ex5\Ex5.gdb\dir</td>
</tr>
</tbody>
</table>
<p>Нажмите <strong>ОК</strong>. Полученный слой будет добавлен на карту:</p>
<figure>
<img src="/../images/Ex17/image11.png" />
</figure>
<p><kbd><strong>Снимок экрана №2</strong> Растр направления тока</kbd></p>
<h2 id="аккумуляция-тока">Аккумуляция тока</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<p>Растр аккумуляции тока в каждой ячейке хранит количество ячеек, дренируемых выше по склону. Фактически, это число показывает площадь водосбора для каждой ячейки. Площадь водосбора необходима для автоматического выделения водотоков (тальвегов) по цифровой модели рельефа.</p>
<ol type="1">
<li><p>Для построения растра аккмуляции тока запустите инструмент <strong>Spatial Analyst Tools &gt; Hydrology &gt; Flow Accumulation</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Raster</td>
<td>dir</td>
</tr>
<tr class="even">
<td>Output flow accumulation raster</td>
<td>…\Ex5\Ex5.gdb\acc</td>
</tr>
</tbody>
</table>
<p>Нажмите <strong>ОК</strong>. Полученный слой будет добавлен на карту.</p></li>
<li><p>Чтобы сделать отображение растра аккумуляции тока более наглядным, откройте его свойства и на вкладке <strong>Symbology</strong> измените растяжку гистограммы на метод <strong>Histogram Equalize</strong> (Выравнивание гистограммы):</p>
<figure>
<img src="/../images/Ex17/image12.png" />
</figure>
<p>Картографическое изображение примет следующий вид:</p>
<figure>
<img src="/../images/Ex17/image13.png" />
</figure></li>
</ol>
<p><kbd><strong>Снимок экрана №3.</strong> Растр аккумуляции тока</kbd></p>
<h2 id="выделение-и-классификация-водотоков">Выделение и классификация водотоков</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<p>Выделение тальвегов осуществляется на основе растра аккумуляции тока. Вы просто задаете запрос следующего вида: «<em>Водотокам принадлежат те пикселы, в которых значение аккумуляции тока больше заданной величины. Остальные пикселы сделать пустыми</em>».</p>
<ol type="1">
<li><p>Для реализации этого запроса используйте инструмент <strong>Spatial Analyst &gt; Conditional &gt; Set Null</strong> со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Conditional Raster</td>
<td>acc</td>
</tr>
<tr class="even">
<td>Expression</td>
<td>Value &lt; 2000</td>
</tr>
<tr class="odd">
<td>Input false raster or constant value</td>
<td>1</td>
</tr>
<tr class="even">
<td>Output raster</td>
<td>…\Ex5\Ex5.gdb\str</td>
</tr>
</tbody>
</table>
<p>По результатам выполнения данного инструмента будут выделены все водотоки, в которых значение аккумуляции тока более <em>2000</em>.</p></li>
<li><p>Измените цвет полученных пикселов на белый, чтобы они были хорошо видны. Изображение примет следующий вид:</p>
<figure>
<img src="/../images/Ex17/image14.png" />
</figure>
<p><kbd><strong>Снимок экрана №4.</strong> Водотоки, полученные по растру аккумуляции тока</kbd></p>
<p>Полученные водотоки можно ранжировать по порядкам.</p>
<blockquote>
<p>При упорядочении водотоков методом <em>Стралера</em> номер порядка увеличивается только в том случае, когда встречаются водотоки одного порядка. Водотоки, которые не имеют притоков, имеют порядок равный 1.</p>
</blockquote></li>
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Hydrology &gt; Stream Order</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Stream Raster</td>
<td>str</td>
</tr>
<tr class="even">
<td>Input Flow Direction Raster</td>
<td>dir</td>
</tr>
<tr class="odd">
<td>Output raster</td>
<td>…\Ex5\Ex5.gdb\strorder</td>
</tr>
<tr class="even">
<td>Method of Stream Ordering</td>
<td>STRAHLER</td>
</tr>
</tbody>
</table>
<p>Нажмите <strong>ОК</strong>, чтобы запустить инструмент. Растр классифицированных водотоков будет добавлен на экран. Если все выполнено верно, расцветка водотоков должна соответствовать их порядкам от 1 до 4.</p>
<figure>
<img src="/../images/Ex17/image15.png" />
</figure>
<p><kbd><strong>Снимок экрана №5.</strong> Водотоки, классифицированные методом Стралера</kbd></p></li>
</ol>
<h2 id="векторизация-водотоков">Векторизация водотоков</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Для получения векторных линий водотоков воспользуйтесь инструментом <strong>Spatial Analyst Tools &gt; Hydrology &gt; Stream to Feature</strong> и заполните его параметры согласно следующей таблице:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Stream Raster</td>
<td>strorder</td>
</tr>
<tr class="even">
<td>Input Flow Direction Raster</td>
<td>dir</td>
</tr>
<tr class="odd">
<td>Output Polyline Features</td>
<td>…\Ex5\Ex5.gdb\streams</td>
</tr>
<tr class="even">
<td>Simplify Polylines</td>
<td>Да</td>
</tr>
</tbody>
</table>
<p>После запуска инструмента в таблицу содержания будут добавлены векторные линии водотоков.</p></li>
<li><p>Переименуйте полученный слой в <em>Водотоки</em>.</p></li>
<li><p>Визуализируйте водотоки в соответствии с их порядками от 1 до 4. Для этого настройте отображение слоя следующим образом:</p>
<table style="width:11%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Способ отображения</td>
<td>Категории (Categories—Unique Values)</td>
</tr>
<tr class="even">
<td>Поле отображения (Value Field)</td>
<td>grid_code (<em>в нем хранится порядок водотока после векторизации)</em></td>
</tr>
<tr class="odd">
<td>Цвет линий</td>
<td>Steel Blue <img src="/../images/Ex17/image16.png" /></td>
</tr>
<tr class="even">
<td>Толщина линий</td>
<td>1, 1.5, 2 и 3 пункта</td>
</tr>
</tbody>
</table>
<p>Диалог настройки отображения слоя должен выглядеть примерно следующим образом:</p>
<figure>
<img src="/../images/Ex17/image17.png" />
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы применить настройки символики.</p></li>
<li><p>Измените название поля классификации в легенде с <em>grid_code</em> на «<em>Порядок</em>».</p></li>
<li><p>Отключите все слои, кроме слоев <em>Водотоки</em>, <em>Горизонтали</em> и <em>Послойная окраска</em>.</p></li>
</ol>
<p>У вас должно получиться следующее картографическое изображение:</p>
<figure>
<img src="/../images/Ex17/image18.png" />
</figure>
<p><kbd><strong>Снимок экрана №6.</strong> Классифицированные векторные линии водотоков</kbd></p>
<p>Сохраните документ карты.</p>
<h2 id="выделение-и-разделение-устьевых-точек">Выделение и разделение устьевых точек</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<p>Водосборный бассейн в рабочем процессе гидрологического анализа ЦМР строится для одной точки. Если в качестве точки выбрать устье реки, то полученный бассейн будет соответствовать бассейну всей реки. Однако если устье является точкой слияния двух водотоков, будет построен бассейн, <em>общий для обоих водотоков</em>. Проблему можно решить, немного сдвинув конечные точки водотоков выше по течению. Для этого можно использовать следующую последовательность действий:</p>
<ul>
<li><p>Получить конечные точки водотоков (устья)</p></li>
<li><p>Построить вокруг точек небольшие буферные зоны радиусом в 2<em>R</em>, где <em>R</em> — размер ячейки растра ЦМР (<em>разрешение</em> ЦМР)</p></li>
<li><p>Полученными зонами обрезать исходные линии водотоков, таким образом их несколько укоротив</p></li>
<li><p>Получить обновленные конечные точки водотоков, которые не совпадают для каждой пары сливающихся притоков.</p></li>
</ul>
<p>Приведенная последовательность действий является классическим примером интерпретации задачи в терминах инструментов ГИС-анализа.</p>
<ol type="1">
<li><p>Запустите инструмент <strong>Data Management Tools &gt; Features &gt; Feature Vertices to Points</strong> со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Features</td>
<td>Водотоки</td>
</tr>
<tr class="even">
<td>Output Feature Class</td>
<td>…\Ex5\Ex5.gdb\streams_ends</td>
</tr>
<tr class="odd">
<td>Point Type</td>
<td>END (конечные точки)</td>
</tr>
</tbody>
</table></li>
<li><p>Приблизьтесь к одной из точек слияния водотоков, пока не станут видны отдельные пикселы, чтобы внимательно наблюдать за тем, что будет происходить дальше.</p>
<figure>
<img src="/../images/Ex17/image19.png" />
</figure></li>
<li><p>Запустите инструмент <strong>Analysis Tools &gt; Proximity &gt; Buffer</strong>, который отвечает за построение буферных зон. Заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input Features</td>
<td>streams_ends</td>
</tr>
<tr class="even">
<td>Output Feature Class</td>
<td>…\Ex5\Ex5.gdb\streams_ends_Buffer</td>
</tr>
<tr class="odd">
<td>Distance (Linear Unit)</td>
<td>200</td>
</tr>
</tbody>
</table>
<p>В таблицу содержания будут добавлены буферные зона вокруг устьев водотоков:</p>
<figure>
<img src="/../images/Ex17/image20.png" />
</figure></li>
<li><p>Обрежьте водотоки с помощью инструмента <strong>Analysis Tools &gt; Overlay &gt; Erase</strong>. Разберитесь самостоятельно, какие слои следует подставить в параметры <strong>Input Features</strong> и <strong>Erase Features</strong>. Назовите выходной слой <em>streams_Erase</em>.</p>
<p>Отключите временно слои <em>Водотоки</em> и <em>streams_ends_Buffer</em>, результат будет выглядеть следующим образом:</p>
<figure>
<img src="/../images/Ex17/image21.png" />
</figure></li>
<li><p>Воспользовавшись снова инструментом <strong>Data Management Tools &gt; Features &gt; Feature Vertices to Points,</strong> постройте <em>конечные</em> точки для обрезанных водотоков. Будьте внимательны при выборе типа точек (параметр <strong>Point type</strong>). Назовите выходной класс <em>streams_Erase_ends</em>.</p>
<p>Результат должен выглядеть примерно следующим образом:</p>
<figure>
<img src="/../images/Ex17/image22.png" />
</figure>
<p><kbd><strong>Снимок экрана №7.</strong> Точки слияния, смещенные выше по течению</kbd></p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="построение-водосборных-бассейнов">Построение водосборных бассейнов</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<p>Построение водосборных бассейнов состоит из трех операций: * привязка точек устья к растру аккумуляции тока, * проведение границ водосборов в растровом режиме, * векторизация бассейнов.</p>
<ol type="1">
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Hydrology &gt; Snap Pour Point</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input raster</td>
<td>streams_Erase_ends</td>
</tr>
<tr class="even">
<td>Input accumulation raster</td>
<td>acc</td>
</tr>
<tr class="odd">
<td>Output raster</td>
<td>…\Ex5\Ex5.gdb\pour</td>
</tr>
<tr class="even">
<td>Snap Distance</td>
<td>100</td>
</tr>
</tbody>
</table>
<p>Остальные параметры оставьте по умолчанию. Параметр <strong>Snap distance</strong> указывает радиус поиска, в пределах которого вокруг каждой заданной точки устья будет искаться ячейка с максимальной аккумуляцией тока. В данном случае он равен <em>100</em> метрам — разрешению ЦМР.</p>
<p>После выполнения инструмента в окрестности каждой точки появится привязанный пиксел:</p>
<figure>
<img src="/../images/Ex17/image23.png" />
</figure></li>
<li><p>Для построения границ водосборных бассейнов запустите инструмент <strong>Spatial Analyst Tools &gt; Hydrology &gt; Watershed</strong> и заполните его параметры следующим образом:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input flow direction raster</td>
<td>dir</td>
</tr>
<tr class="even">
<td>Input raster or feature pour point data</td>
<td>pour</td>
</tr>
<tr class="odd">
<td>Pour point field</td>
<td>Value</td>
</tr>
<tr class="even">
<td>Output raster</td>
<td>…\Ex5\Ex5.gdb\wsh</td>
</tr>
</tbody>
</table>
<p>Полученный растр будет добавлен на экран, вы можете его расцветить в уникальных цветах, чтобы границы бассейнов хорошо читались:</p>
<figure>
<img src="/../images/Ex17/image24.png" />
</figure>
<p><kbd><strong>Снимок экрана №8.</strong> Растровый слой водосборных бассейнов</kbd></p></li>
<li><p>Конвертируйте полученные бассейны в векторные полигоны. Для этого запустите инструмент <strong>Conversion Tools &gt; From Raster &gt; Raster to Polygon</strong> со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input raster</td>
<td>wsh</td>
</tr>
<tr class="even">
<td>Field</td>
<td>Value</td>
</tr>
<tr class="odd">
<td>Output polygon features</td>
<td>…\Ex5\Ex5.gdb\watersheds</td>
</tr>
<tr class="even">
<td>Simplify polygons</td>
<td>Да</td>
</tr>
</tbody>
</table></li>
<li><p>Переименуйте полученный слой в «Водосборные бассейны» и измените его символ на тонкую красную линию <em>без заливки</em>.</p></li>
<li><p>Оставьте включенными следующие слои:</p>
<ul>
<li>Водотоки</li>
<li>Водосборные бассейны</li>
<li>Горизонтали</li>
<li>Послойная окраска</li>
</ul></li>
<li><p>Установите масштаб равным <em>1:400 000</em>. Картографическое изображение примет следующий вид:</p>
<figure>
<img src="/../images/Ex17/image25.png" />
</figure>
<p><kbd><strong>Снимок экрана №9.</strong> Векторный слой водосборных бассейнов</kbd></p></li>
</ol>
<h2 id="расчет-привязка-и-визуализация-статистики-по-водосборным-бассейнам">Расчет, привязка и визуализация статистики по водосборным бассейнам</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<p>В пределах границ водосборных бассейнов возможно рассчитать различную статистику по данным ЦМР. Вам предлагается рассчитать статистику по высотам. Далее эту статистику необходимо присоединить к исходному слою бассейнов.</p>
<ol type="1">
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Zonal &gt; Zonal Statistics as Table</strong> со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input raster or feature zone data</td>
<td>Водосборные бассейны</td>
</tr>
<tr class="even">
<td>Zone Field</td>
<td>Id</td>
</tr>
<tr class="odd">
<td>Input Value Raster</td>
<td>Послойная окраска</td>
</tr>
<tr class="even">
<td>Output Table</td>
<td>…\Ex5\Ex5.gdb\stats</td>
</tr>
<tr class="odd">
<td>Statistics Type</td>
<td>ALL</td>
</tr>
</tbody>
</table></li>
<li><p>Откройте полученную таблицу, чтобы ознакомиться с ее содержимым:</p></li>
</ol>
<figure>
<img src="/../images/Ex17/image26.png" />
</figure>
<p><kbd><strong>Снимок экрана №10.</strong> Таблица статистики высот по водосборным бассейнам</kbd></p>
<ol type="1">
<li><p>Присоедините статистические данные к исходному слою с помощью инструмента <strong>Data Management Tools &gt; Joins &gt; Join Field</strong> со следующими параметрами:</p>
<table>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Input table</td>
<td>Водосборные бассейны</td>
</tr>
<tr class="even">
<td>Input join field</td>
<td>Id</td>
</tr>
<tr class="odd">
<td>Join table</td>
<td>stats</td>
</tr>
<tr class="even">
<td>Output join field</td>
<td>ID</td>
</tr>
<tr class="odd">
<td>Join fields</td>
<td>Выделите все поля (кнопка Select All)</td>
</tr>
</tbody>
</table>
<p>Диалог инструмента примет следующий вид:</p>
<figure>
<img src="/../images/Ex17/image27.png" />
</figure>
<p>Нажмите <strong>ОК</strong>, чтобы запустить соединение таблиц. После выполнения инструмента, откройте атрибутивную таблицу слоя Водосборные бассейны, чтобы убедиться, что расчетные столбцы были добавлены:</p>
<figure>
<img src="/../images/Ex17/image28.png" />
</figure></li>
<li><p>Включите подписи слоя <em>Водосборные бассейны</em> по полю <em>MEAN</em> (средняя высота в пределах бассейна)</p></li>
<li><p>Чтобы избавиться от лишних значащих цифр, откройте таблицу слоя Водосборные бассейны и выберите в контекстном меню заголовка столбца <em>MEAN</em> команду <strong>Properties</strong> (свойства поля):</p>
<figure>
<img src="/../images/Ex17/image29.png" />
</figure></li>
<li><p>В открывшемся диалоге нажмите кнопку <strong>Numeric…</strong> и установите в окне <strong>Number Format</strong> округление до 1 знака после запятой:</p>
<figure>
<img src="/../images/Ex17/image30.png" />
</figure>
<p>Если все выполнено верно, на карте должны быть подписаны средние высоты по каждому бассейну:</p>
<figure>
<img src="/../images/Ex17/image31.png" />
</figure>
<p><kbd><strong>Снимок экрана №11.</strong> Средние высоты водосборных бассейнов</kbd></p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="оформление-итоговой-карты-1">Оформление итоговой карты</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Установите масштаб карты равным 1:500 000</p></li>
<li><p>Переключитесь в режим компоновки</p></li>
<li><p>Измените ориентировку листа на альбомную</p></li>
<li><p>Добавьте на карту численный масштаб и заголовок «<em>Водотоки разных порядоков и их водосборные бассейны</em>».</p></li>
<li><p>Добавьте легенду со следующими слоями: <em>Водотоки</em>, <em>Водосборные бассейны</em> и <em>Послойная окраска</em>.</p></li>
<li><p>Добавьте пометку «<em>Для каждого бассейна указана средняя высота в метрах над уровнем моря</em>»</p></li>
<li><p>Приведите внешний вид карты в соответствии с рисунком:</p>
<figure>
<img src="/../images/Ex17/image32.png" />
</figure></li>
<li><p>Полученную карту вставьте в отчет.</p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
<h2 id="ответы-на-вопросы-8">Ответы на вопросы</h2>
<p><a href="#гидрологический-анализ-цифровой-модели-рельефа">К содержанию ⇡</a></p>
<p>Заполните отчетный файл и положите его в сетевую папку для проверки преподавателем.</p>
<h1 id="трехмерное-моделирование">Трехмерное моделирование</h1>
<h2 id="введение-17">Введение</h2>
<p><strong>Цель задания</strong> --- знакомство с трехмерными моделями данных, трехмерной визуализацией и анализом в ГИС</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Параметр</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><em>Поток</em></td>
<td>Физический, экономический, гидрометеорологический</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Теоретическая подготовка</em></td>
<td>Трехмерные модели данных, виртуальное моделирование, анализ цифровых моделей рельефа, построение зон видимости.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Настройка символики и подписей объектов. Создание базы геоданных и классов пространственных объектов. Инструменты геообработки ArcToolbox. Создание компоновки карты: название легенда, масштаб, градусная сетка.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Исходные данные</em></td>
<td>База данных ГИС “Сатино”, аэрофотоснимок сверхвысокого разрешения.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><em>Результат</em></td>
<td>Трехмерная модель Сатинского учебного полигона, зоны видимости и линии небосвода для двух обзорных точек</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>Ключевые слова</em></td>
<td>Трехмерный анализ и моделирование, цифровые модели рельефа (ЦМР), драпировка снимка</td>
</tr>
</tbody>
</table>
<h3 id="контрольный-лист-15">Контрольный лист</h3>
<ul>
<li>[x] Добавить на карту ЦМР и отобразить ее методом горизонталей с послойной окраской.</li>
<li>[x] Подготовить вспомогательные объекты для учета препятствий.</li>
<li>[x] Преобразовать растровые данные в триангуляционные.</li>
<li>[x] Визуализировать данные в трехмерной среде (приложение ArcScene).</li>
<li>[x] Выполнить анализ зоны видимости наблюдательного пункта при разных положениях его высоты.</li>
</ul>
<h3 id="аннотация-16">Аннотация</h3>
<p>Трехмерные модели играют важную роль в географических исследованиях. Изучение рельефа и его морфометрических характеристик; моделирование полей распределения физических и химических показателей в океане, атмосфере и почвах; моделирование городской среды и транспортных коммуникаций; моделирование поверхностей небесных тел; имитация чрезвычайных ситуаций и военных действий — это лишь краткий список тех задач, которые решаются с помощью анализа и визуализации 3D-моделей.</p>
<p>Задание посвящено знакомству с трехмерным ГИС-моделированием. Географическая задача, которую вам предстоит решить — это определение зоны видимости в точке с учетом рельефа и физических препятствий, таких как дома и лесные массивы. Анализ зон видимости позволяет определить охват территории доступный для визуального наблюдения.</p>
<p>Зона видимости ограничивается трехмерной линией небосвода (skyline). Чем круче угол направления между точкой наблюдателя и линией небосвода, тем меньше будет открытость небосвода по данному направлению. Общая открытость небосвода характеризует долю видимой части небесной полусферы. Это важный топоклиматический параметр, накладывающий ограничение на объем поступающей прямой солнечной радиации. Как следствие, открытость небосвода учитывается при расчетах таяния снега, моделировании городского климата, оценке пригодности земель для сельского хозяйства.</p>
<p>В процессе занятия вы научитесь работать с растровыми и триангуляционными моделями рельефа, управлять отображением слоев в виртуальной 3D-среде и использовать снимки в качестве текстуры трехмерных моделей, определять зону видимости и визуализировать ее.</p>
<h2 id="организация-рабочего-пространства-1">Организация рабочего пространства</h2>
<p><a href="#трехмерное-моделирование">К содержанию ⇡</a></p>
<ol type="1">
<li><p>Скопируйте данные упражнения в свой рабочий каталог <em>Ex18</em> с помощью <strong>Проводника</strong>.</p></li>
<li><p>Откройте <strong>ArcMap</strong> и в нем — окно <strong>Catalog (Каталог)</strong>.</p></li>
<li><p>Сохраните документ карты в свой каталог <em>Ex18</em> под именем <em>Ex18_ЦМР.mxd</em>.</p></li>
<li><p>Создайте в домашнем каталоге <em>Home - &lt;Фамилия&gt;/Ex18</em> новую базу геоданных <em>Ex18</em>.</p></li>
<li><p>Щелкните по <em>Ex18.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong> чтобы назначить ее базой геоданных по умолчанию.</p></li>
</ol>
<h2 id="визуализация-цифровой-модели-рельефа">Визуализация цифровой модели рельефа</h2>
<p><a href="#трехмерное-моделирование">К содержанию ⇡</a></p>
<p>Для того чтобы полноценно моделировать видимость в трехмерном пространстве, необходимо иметь в наличии цифровую модель рельефа, а также и объекты, расположенные на поверхности.</p>
<ol type="1">
<li><p>Раскройте в домашнем каталоге базу геоданных <em>Satino.gdb</em> и перенесите на карту следующие слои из группы <em>General</em>:</p>
<ul>
<li><em>WaterPolygon</em> (площадная гидрография);</li>
<li><em>WaterLine</em> (линейная гидрография);</li>
<li><em>Contours</em> (горизонтали);</li>
<li><em>DEM</em> (цифровая модель рельефа);</li>
</ul></li>
<li><p>Разместите слои именно в том порядке, в котором они указаны выше.</p></li>
<li><p>Дважды щелкните на слое <em>Горизонтали</em>. Перейдите на вкладку <strong>Display</strong> и установите значение прозрачности равным <em>80%</em> (Рис. 1).</p>
<figure>
<img src="../images/Ex18/image2.png" alt="Рис. 1. Установка прозрачности слоя" /><figcaption><em>Рис. 1. Установка прозрачности слоя</em></figcaption>
</figure></li>
<li><p>Перейдите на вкладку <strong>Symbology</strong> и поменяйте цвет горизонталей на черный. Нажмите <strong>ОК</strong>.</p></li>
<li><p>Смените символ слоя <em>Гидрография (линии)</em> на ярко-голубую линию толщиной <em>1.5</em> пиксела.</p></li>
<li><p>Смените цвет объектов слоя <em>Гидрография (полигоны)</em> на ярко-голубой.</p></li>
<li><p>Переименуйте слой <em>DEM</em> в таблице содержания в <em>ЦМР</em>.</p></li>
<li><p>Дважды щелкните на слое <em>ЦМР</em>, перейдите на вкладку <strong>Symbology</strong> и нажмите <strong>Classify…</strong>, чтобы сменить метод классификации.</p></li>
<li><p>В появившемся диалоге выберите режим <em>Defined Interval</em> (заданный вручную интервал) и установите величину интервала равной 4 метрам. Окно классификации примет вид, аналогичный Рис. 2.</p>
<figure>
<img src="../images/Ex18/image3.png" alt="Рис. 2. Классификация высот для послойной окраски методом заданного интервала" /><figcaption><em>Рис. 2. Классификация высот для послойной окраски методом заданного интервала</em></figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong> чтобы закрыть диалог классификации высот.</p></li>
<li><p>Выберите цветовую шкалу, близкую по гамме к гипсометрической. Окно карты примет вид, аналогичный представленному на Рис. 3.</p>
<figure>
<img src="../images/Ex18/image4.png" alt="Рис. 3. Цифровая модель рельефа долины реки Протвы" /><figcaption><em>Рис. 3. Цифровая модель рельефа долины реки Протвы</em></figcaption>
</figure>
<p><kbd><strong>Снимок экрана №1.</strong> Цифровая модель рельефа долины реки Протвы</kbd></p></li>
</ol>
<h2 id="подготовка-вспомогательных-цифровых-моделей-для-учета-препятствий">Подготовка вспомогательных цифровых моделей для учета препятствий</h2>
<p><a href="#трехмерное-моделирование">К содержанию ⇡</a></p>
<p>При расчете зоны видимости важно учитывать, что на поверхности расположены разные объекты, в том числе здания и растительность. Чтобы учесть объект в качестве препятствия, есть два пути: представить его в виде трехмерного тела, либо внедрить в качестве неровности в цифровую модель рельефа. Для растительности вам предлагается воспользоваться вторым вариантом. Алгоритм состоит из двух шагов:</p>
<ul>
<li><p>­преобразовать слой растительности в растр, каждый пиксел которого хранит значение высоты растительности;</p></li>
<li><p>прибавить полученный растр к растру ЦМР; там, где леса нет, высота ЦМР сохранится; на залесенных участках к ней прибавится высота растительного покрова.</p></li>
</ul>
<ol type="1">
<li><p>Найдите слой <em>VegTypes</em> в базе данных <em>Satino.gdb</em> и добавьте его на карту.</p></li>
<li><p>Дважды щелкните на слое <em>Растительность</em> и перейдите на вкладку <strong>Symbology</strong>.</p></li>
<li><p>Выберите тип отображение <strong>Quantities &gt; Graduated Colors</strong>. В качестве поля отображения укажите поле <em>Высота</em>. Выберите шкалу от светло-зеленого к темно-зеленому. Диалог примет вид, аналогичный представленному на Рис. 4:</p>
<figure>
<img src="../images/Ex18/image5.png" alt="Рис. 4. Визуализация слоя по численному показателю методом количественного фона" /><figcaption><em>Рис. 4. Визуализация слоя по численному показателю методом количественного фона</em></figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong>. Окно карты примет следующий вид (Рис. 5):</p>
<figure>
<img src="../images/Ex18/image6.png" alt="Рис. 5. Количественный фон по высоте растительности" /><figcaption><em>Рис. 5. Количественный фон по высоте растительности</em></figcaption>
</figure></li>
<li><p>Откройте <strong>ArcToolbox</strong> и запустите инструмент <strong>Conversion Tools &gt; To Raster &gt; Polygon to Raster</strong>.</p></li>
<li><p>Выберите в качестве входных данных <strong>Input Features</strong> слой <em>Растительность</em>.</p></li>
<li><p>В списке <strong>Field</strong> выберите поле <em>Height</em> — значение, хранящееся в нем, будет присвоено каждой ячейке растра.</p></li>
<li><p>Установите параметр <strong>Cell size</strong> равным <em>2,5</em> метра. Остальные параметры оставьте по умолчанию. Диалог инструмента примет вид, аналогичный представленному на Рис. 6:</p>
<figure>
<img src="../images/Ex18/image7.png" alt="Рис. 6. Преобразование полигона лесного массива в растровое представление с помощью инструмента Polygon to Raster" /><figcaption><em>Рис. 6. Преобразование полигона лесного массива в растровое представление с помощью инструмента Polygon to Raster</em></figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить выполнение инструмента.</p></li>
<li><p>Полученный слой переименуйте в Высота растительности.</p></li>
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Math &gt; Plus</strong>, осуществляющий сложение растров.</p></li>
<li><p>Выберите в качестве первого растра <em>ЦМР</em>, в качестве второго — <em>Высота растительности</em>.</p></li>
<li><p>Назовите выходной класс <em>DEM_Veg</em>. Диалог примет следующий вид (Рис. 7).</p>
<figure>
<img src="../images/Ex18/image8.png" alt="Рис. 7. Инструмент Plus, осуществляющий сложение растров" /><figcaption><em>Рис. 7. Инструмент <strong>Plus</strong>, осуществляющий сложение растров</em></figcaption>
</figure></li>
<li><p>Нажмите <em>ОК</em>.</p></li>
<li><p>После того, как полученный слой добавится на карту, назовите его <em>ЦМР+</em>.</p></li>
<li><p>Перенесите слой <em>ЦМР+</em> под гидрографию. Обратите внимание на резкие перепады яркости изображения, обусловленные внедрением объектов растительности.</p>
<figure>
<img src="../images/Ex18/image9.png" alt="Рис. 8. Поле высот с внедренными объектами растительности" /><figcaption><em>Рис. 8. Поле высот с внедренными объектами растительности</em></figcaption>
</figure></li>
</ol>
<h2 id="преобразование-растровых-моделей-в-триангуляционные">Преобразование растровых моделей в триангуляционные</h2>
<p><a href="#трехмерное-моделирование">К содержанию ⇡</a></p>
<p>До этого момента вы использовали растровые модели, которые удобны для вычислений. Их также можно использовать и в трехмерной среде. Однако, чтобы обеспечить максимальную производительность и качество визуализации, растровые модели желательно преобразовать в триангуляционные, поскольку именно на них основаны методы трехмерной визуализации.</p>
<ol type="1">
<li><p>Запустите инструмент геообработки <strong>3D Analyst Tools &gt; Conversion &gt; From Raster &gt; Raster to TIN</strong>.</p></li>
<li><p>В качестве <strong>Input Raster</strong> выберите <em>ЦМР</em>.</p></li>
<li><p>В поле <strong>Output TIN</strong> назовите выходной слой <em>tin</em>.</p></li>
<li><p>Параметр допуска по высоте <strong>Z Tolerance</strong> установите равным <em>0,25</em> метров.</p>
<blockquote>
<p>Параметр <strong>Z Tolerance</strong> управляет чувствительностью триангуляционной модели к неровностям поверхности. Если величина неровности больше, чем указанный порог, она будет выражена в виде набора треугольников. В нашем случае сечение исходных горизонталей было 2 метра, а вспомогательных горизонталей — 1 м. Точность положения горизонталей — ¼ сечения. Следовательно, значение порога, равное 0,25 метра позволит сохранить все нюансы поверхности.</p>
</blockquote></li>
<li><p>Максимальное количество точек <strong>Maximum Number Of Points</strong> увеличьте до <em>3 000 000</em> (три миллиона). Это значение подобрано для вас эмпирически.</p></li>
<li><p>Множитель по высоте <strong>Z factor</strong> оставьте равным <em>1</em>. Окно инструмента примет вид, аналогичный представленному на Рис. 9.</p>
<figure>
<img src="../images/Ex18/image10.png" alt="Рис. 9. Инструмент Raster to TIN для преобразования растровых моделей в триангуляционные" /><figcaption><em>Рис. 9. Инструмент Raster to TIN для преобразования растровых моделей в триангуляционные</em></figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить преобразование.</p></li>
<li><p>Повторите процедуру преобразования для слоя <em>ЦМР+</em>. В диалоге инструмента назовите выходной слой <em>tin+</em>.</p></li>
<li><p>Полученный слой <em>tin+</em> поместите в таблице содержания так, чтобы он был под слоями гидрографии. Все слои, кроме <em>tin+</em> и гидрографии отключите.</p></li>
<li><p>Дважды щелкните на слое <em>tin+</em> и перейдите на вкладку <strong>Symbology</strong>.</p></li>
<li><p>Выберите в списке слева метод отображения <em>Edge Types</em> — он отвечает за показ ребер триангуляции.</p></li>
<li><p>Щелкните внизу на кнопку <strong>Add All Values</strong>, чтобы добавить к отображению все типы ребер.</p></li>
<li><p>Исправьте цвет стандартного ребра <em>Regular Edge</em> на черный и нажмите <strong>ОК</strong>.</p></li>
<li><p>Приблизьтесь к лесному массиву в центральной части карты к северу от <em>Протвы</em>. Окно карты примет вид, аналогичный представленному на (Рис. 10).</p>
<figure>
<img src="../images/Ex18/image11.png" alt="Рис. 10. Триангуляционная модель рельефа с лесным массивом" /><figcaption><em>Рис. 10. Триангуляционная модель рельефа с лесным массивом</em></figcaption>
</figure></li>
</ol>
<blockquote>
<p>Проанализируйте свойства триангуляционной модели. Является ли плотность треугольников и их размеры постоянными? Обратите внимание, как сгущается сетка на участках с большой кривизной поверхности.</p>
</blockquote>
<p>Сохраните документ карты и сверните окно.</p>
<p><kbd><strong>Снимок экрана №2.</strong> Триангуляционная модель рельефа долины реки Протвы с лесным массивом</kbd></p>
<h2 id="визуализация-данных-в-трехмерной-среде-и-знакомство-с-приложением-arcscene">Визуализация данных в трехмерной среде и знакомство с приложением ArcScene</h2>
<p><a href="#трехмерное-моделирование">К содержанию ⇡</a></p>
<p>Несмотря на то, что анализ зон видимости можно проводить и в традиционной двумерной среде, более наглядно результат выглядит в трехмерной сцене, особенно когда есть несколько местоположений наблюдателя с разными высотами.</p>
<p>Для работы в трехмерной среде в <strong>ArcGIS</strong> используется приложение <strong>ArcScene</strong>. Это инструмент визуализации, анализа и редактирования трехмерных данных.</p>
<ol type="1">
<li><p>Откройте приложение <strong>Пуск—Программы &gt; ArcGIS &gt; ArcScene</strong>.</p></li>
<li><p>Сохраните сразу же документ сцены в свой каталог <em>Ex18</em> под названием <em>Ex18_3D.sxd</em>.</p></li>
<li><p>Раскройте домашнюю директорию в окне <strong>Каталога</strong>, щелкните правой кнопкой мыши на базе геоданных <em>Ex18.gdb</em> и выберите пункт <strong>Make Default Geodatabase</strong>, чтобы назначить ее базой геоданных по умолчанию, если это еще не сделано.</p></li>
<li><p>Откройте панель инструментов <strong>Tools</strong> и обратите внимание на то, что она несколько отличается от привычной вам панели инструментов в <strong>Аркмапе</strong>. Самый первый инструмент используется для вращения сцены.</p>
<figure>
<img src="../images/Ex18/image12.png" alt="Рис. 11. Панель инструментов Tools в ArcScene " /><figcaption><em>Рис. 11. Панель инструментов <strong>Tools</strong> в <strong>ArcScene</strong> </em></figcaption>
</figure></li>
<li><p>Добавьте на карту слой <em>PhotoPlan</em> из базы геоданных <em>Satino</em>.</p>
<blockquote>
<p>Обратите внимание на то, что снимок отображается плоским. Системе известна лишь информация о цвете каждого пиксела, но не о его высоте.</p>
</blockquote></li>
<li><p>Откройте свойства слоя и перейдите на вкладку <strong>Base Heights</strong> (базовые высоты).</p></li>
<li><p>Установите параметр <strong>Elevation from surfaces</strong> в положение <em>Floating on a custom surface</em>.</p></li>
<li><p>Нажмите кнопку обзора каталогов <img src="../images/Ex18/image13.png" /> и укажите модель <em>tin+</em> в качестве источника высот.</p></li>
<li><p>На вкладке <strong>Symbology</strong> в группе <strong>Stretch</strong> установите параметр <strong>Type</strong> равным <em>None</em>. Этот параметр отвечает за растяжку гистограммы, которая в случае фотоснимка не нужна.</p></li>
<li><p>Перейдите на вкладку <strong>Display</strong> и установите параметр <strong>Resample during display using</strong> равным <em>Cubic Convolution</em> (кубическая свертка). В этом режиме изображение будет всегда сглаживаться независимо от масштаба сцены.</p></li>
<li><p>Перейдите на вкладку <strong>Rendering</strong> поставьте галочку <strong>Shade areal features relative to the scene’s light position</strong>. В этом режиме снимок на снимок будет накладываться тень в соответствии с параметрами освещения сцены.</p></li>
<li><p>На той же вкладке в группе настроек <strong>Optimize</strong> переместите ползунок <em>Quality enhancement for raster images</em> в крайнее правое положение для того чтобы снимок отображался в максимальном качестве. Диалог настройки слоя примет вид, аналогичный представленному на Рис. 12.</p>
<figure>
<img src="../images/Ex18/image14.png" alt="Рис. 12. Настройка параметров рендеринга для аэрофотоснимка" /><figcaption><em>Рис. 12. Настройка параметров рендеринга для аэрофотоснимка</em></figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong> в настройках слоя. Вам придется подождать некоторое время, пока снимок драпируется на поверхность модели.</p></li>
<li><p>Добавьте на карту слои <em>WaterLine</em> и <em>WaterPolygon</em> из базы геоданных <em>Satino</em> и переместите их наверх таблицы содержания.</p></li>
<li><p>Откройте свойства слоя <em>Гидрография (полигоны)</em> двойным щелчком.</p></li>
<li><p>Перейдите на вкладку <strong>Symbology</strong> и смените цвет заливки на ярко-голубой, и уберите обводку (поставьте <em>No Color</em>).</p></li>
<li><p>Перейдите на вкладку <strong>Display</strong> и установите прозрачность слоя (<strong>Transparency</strong>) равной 30%.</p></li>
<li><p>Перейдите на вкладку <strong>Base Heights</strong> и установите параметр <strong>Elevation from surfaces</strong> в положение <em>Floating on a custom surface.</em> Нажмите кнопку обзора каталогов и укажите в качестве источника модель <em>tin</em>.</p></li>
<li><p>Нажмите <strong>ОК</strong> в свойствах слоя.</p></li>
<li><p>Настройте аналогичным образом слой <em>Гидрография (линии)</em>, сменив цвет линии на голубой и включив опцию <strong>Floating on a custom surface</strong>.</p>
<p>Полученная сцена имеет один недостаток: необходимо увеличить масштаб по высоте, чтобы изображение стало более наглядным.</p></li>
<li><p>Дважды щелкните в таблице содержания на заголовке <strong>Scene Layers</strong> и установите параметр <strong>Vertical Exxageration</strong> равным <em>3</em>. Нажмите <strong>ОК</strong>.</p></li>
<li><p>Окно приложения примет вид, аналогичный представленному на Рис. 13.</p>
<figure>
<img src="../images/Ex18/image15.png" alt="Рис. 13. Снимок, драпированный поверх ЦМР с высотами растительности" /><figcaption><em>Рис. 13. Снимок, драпированный поверх ЦМР с высотами растительности</em></figcaption>
</figure>
<blockquote>
<p>Что изменилось в сцене после установки параметра Vertical Exxageration? Как он влияет на отображение слоев?</p>
</blockquote></li>
</ol>
<h2 id="визуализация-трехмерных-объектов-геодезические-пункты-и-здания">Визуализация трехмерных объектов: геодезические пункты и здания</h2>
<p><a href="#трехмерное-моделирование">К содержанию ⇡</a></p>
<p>В сцену необходимо добавить здания, которые играют роль дополнительных препятствий и геодезические пункты, с которых производятся наблюдения. До этого момента вы пользовались функцией драпировки объектов на поверхность. Здания и геодезические пункты, напротив, хранятся в базе данных как трехмерные объекты.</p>
<ol type="1">
<li><p>Добавьте на карту слой <em>Geopoints_3D</em> из базы данных <em>Satino</em>.</p></li>
<li><p>Дважды щелкните на слое <em>Геодезические пункты 3D</em> в таблице содержания и на вкладке <strong>Symbology</strong> щелкните на кнопку с изображением символа.</p></li>
<li><p>В открывшемся диалоге нажмите кнопку <strong>Style References</strong>, чтобы подгрузить дополнительные символы.</p></li>
<li><p>Отметьте в списке набор символов <em>3D Industrial</em> (Рис. 14) и нажмите <strong>ОК</strong>.</p>
<figure>
<img src="../images/Ex18/image16.png" alt="Рис. 14. Подключение набора символов через Symbol Selector" /><figcaption><em>Рис. 14. Подключение набора символов через Symbol Selector</em></figcaption>
</figure></li>
<li><p>Найдите в таблице символ <em>WatchTower 1</em>, выберите его и установите размер <em>40 пикселов</em>. Диалог настройки символа примет вид, аналогичный представленному на Рис. 15.</p>
<figure>
<img src="../images/Ex18/image17.png" alt="Рис. 15. Выбор символа для геодезического пункта (Watch Tower 1)" /><figcaption><em>Рис. 15. Выбор символа для геодезического пункта (Watch Tower 1)</em></figcaption>
</figure></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы завершить настройку символа для геодезического пункта.</p></li>
<li><p>Добавьте на карту слой <em>Buildings_3D</em> из базы данных <em>Satino</em>. Это трехмерные объекты типа <strong>Multipatch</strong>, у которых была заранее определена высота.</p></li>
<li><p>Приблизьтесь к участку поймы между деревнями <em>Дедюевка</em> и <em>Рыжково</em>. Окно приложения примет вид, аналогичный представленному на Рис. 16.</p>
<figure>
<img src="../images/Ex18/image18.png" alt="Рис. 16. Трехмерные данные для анализа зон видимости и открытости небосвода" /><figcaption><em>Рис. 16. Трехмерные данные для анализа зон видимости и открытости небосвода</em></figcaption>
</figure>
<p><kbd><strong>Снимок экрана №3</strong>. Визуализация исходных данных для анализа зон видимости: рельеф, снимок, геодезические пункты и трехмерные здания</kbd></p></li>
</ol>
<h2 id="анализ-зоны-видимости-наблюдательного-пункта">Анализ зоны видимости наблюдательного пункта</h2>
<p><a href="#трехмерное-моделирование">К содержанию ⇡</a></p>
<p>Зона видимости строится для определенной точки в трехмерном пространстве. В качестве наблюдательных точек удобно использовать геодезические пункты. Сначала вы определите зону видимости с точки, расположенной на земле, а затем приподнимете ее на несколько метров, чтобы понять, как изменится зона видимости.</p>
<ol type="1">
<li><p>Откройте атрибутивную таблицу слоя Геодезические пункты 3D и выделите строку с геодезическим пунктом <em>Старое русло</em>. Строка должна выделиться ярко-голубым цветом.</p></li>
<li><p>Запустите инструмент геообработки <strong>3D Analyst Tools &gt; Visibility &gt; Skyline</strong>, который строит линию небосвода.</p></li>
<li><p>В качестве слоя точек наблюдений <strong>Input Observer Point Features</strong> выберите <em>Геодезические пункты 3D</em>. Поскольку вы выделили объект в таблице этого слоя, линия небосвода будет рассчитана только для него, а не для всех объектов.</p></li>
<li><p>В поле <strong>Input Surface</strong> выберите поверхность <em>tin+</em> с помощью обзора каталогов.</p></li>
<li><p>Из списка препятствий <strong>Input Features</strong> выберите слой <em>Здания 3D</em>. Диалог инструмента и окно приложения примут вид, аналогичный представленному на Рис. 17.</p></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить расчеты.</p>
<figure>
<img src="../images/Ex18/image19.png" alt="Рис. 17. Инструмент Skyline для построения линии небосвода" /><figcaption><em>Рис. 17. Инструмент Skyline для построения линии небосвода</em></figcaption>
</figure></li>
<li><p>После того, как результат будет добавлен в таблицу содержания, смените его название на <em>Линия небосвода (Старое русло)</em> и смените символ на ярко-желтую линию.</p></li>
<li><p>Запустите инструмент <strong>3D Analyst Tools &gt; Visibility &gt; Skyline Barrier</strong>, который строит трехмерную зону видимости на основе линии небосвода.</p></li>
<li><p>Выберите в качестве <strong>Input Observer Point Features</strong> слой <em>Геодезические пункты 3D</em>.</p></li>
<li><p>В качестве <strong>Input Features</strong> выберите слой <em>Линия небосвода (Старое русло)</em>.</p></li>
<li><p>Установите галочку <em>Closed</em>, чтобы сформировать боковые стенки зоны видимости.</p></li>
<li><p>Остальные параметры оставьте по умолчанию.</p></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить расчеты.</p></li>
<li><p>После того, как результат добавится в таблицу содержания, переименуйте его в Зона видимости (Старое русло).</p></li>
<li><p>Смените цвет слоя зоны видимости на ярко-желтый и установите прозрачность слоя равной <em>50%</em>. Окно приложения примет вид, аналогичный представленному на Рис. 18.:</p>
<figure>
<img src="../images/Ex18/image20.png" alt="Рис. 18. Результат расчета зоны видимости для пункта Старое русло" /><figcaption><em>Рис. 18. Результат расчета зоны видимости для пункта Старое русло</em></figcaption>
</figure>
<p><kbd><strong>Снимок экрана №4</strong>. Результат расчета зоны видимости пункта Старое русло</kbd></p></li>
</ol>
<blockquote>
<p>Проанализируйте результат. Приблизьтесь поближе, чтобы рассмотреть полученные границы. Как ведет себя линия горизонта при встрече с препятствиями?</p>
</blockquote>
<h2 id="изменение-высоты-наблюдения">Изменение высоты наблюдения</h2>
<p><a href="#трехмерное-моделирование">К содержанию ⇡</a></p>
<p>Рассмотрим теперь, как изменится зона видимости, если переместиться в пункт, расположенный более высоко.</p>
<ol type="1">
<li><p>Выберите в таблице атрибутов слоя <em>Геодезические пункты 3D</em> строку <em>Дедюевка</em>. Строка должна выделиться ярко-голубым цветом.</p></li>
<li><p>Запустите инструмент <strong>Skyline</strong> еще раз для построения линии небосвода.</p></li>
<li><p>В параметр <strong>Input Observer Point Features</strong> подставьте слой <em>Геодезические пункты 3D</em>.</p></li>
<li><p>В поле <em>Input Surface</em> выберите поверхность <em>tin+</em> с помощью обзора каталогов.</p></li>
<li><p>Из списка препятствий <strong>Input Features</strong> выберите слой <em>Здания 3D</em>. Остальные параметры оставьте по умолчанию и запустите инструмент.</p></li>
<li><p>Получившийся слой переименуйте в <em>Линия небосвода (Дедюевка)</em> и смените его символ на ярко-красную линию.</p></li>
<li><p>Запустите снова инструмент <strong>Skyline Barrier</strong> для построения зоны видимости.</p></li>
<li><p>Выберите в качестве <strong>Input Observer Point Features</strong> слой <em>Геодезические пункты 3D</em>.</p></li>
<li><p>В качестве <strong>Input Features</strong> выберите слой <em>Линия небосвода (Дедюевка)</em>.</p></li>
<li><p>Установите галочку <strong>Closed</strong>, чтобы сформировать боковые стенки зоны видимости.</p></li>
<li><p>Остальные параметры оставьте по умолчанию и запустите инструмент, нажав <strong>ОК</strong>.</p></li>
<li><p>Переименуйте получившийся слой в <em>Зона видимости (Дедюевка)</em>, смените его цвет на розовый и установите прозрачность равной <em>50%</em>.</p></li>
<li><p>Отключите слои <em>Линия небосвода (Старое русло)</em> и <em>Зона видимости (Старое русло)</em>.</p></li>
<li><p>Нажмите <strong>глобус</strong>, чтобы вся сцена поместилась на в окне просмотра (Рис. 19).</p>
<figure>
<img src="../images/Ex18/image21.png" alt="Рис. 19. Зона видимости, построенная для пункта Дедюевка" /><figcaption><em>Рис. 19. Зона видимости, построенная для пункта Дедюевка</em></figcaption>
</figure>
<p><kbd><strong>Снимок экрана №5</strong>. Результат расчета зоны видимости пункта Дедюевка</kbd></p>
<blockquote>
<p>Проанализируйте, как изменилась зона видимости после выбора более высокой точки.</p>
</blockquote></li>
</ol>
<p>Сохраните документ сцены еще раз. Положите ваш отчетный файл в сетевую папку преподавателя.</p>
<h2 id="контрольные-вопросы-7">Контрольные вопросы</h2>
<p><a href="#трехмерное-моделирование">К содержанию ⇡</a></p>
            </div>
    </div>
  </div>
</body>
</html>
